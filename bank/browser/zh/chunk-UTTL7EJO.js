import"./chunk-FZ5VZCDA.js";import{a as St}from"./chunk-547IKIBS.js";import{$ as it,$a as pe,A as K,Da as de,Ea as dt,I as J,K as I,Lb as gt,M as ee,N as te,O as Ke,P as T,Q as A,S as ne,U as Je,V as et,W as tt,Xa as _e,Ya as _t,_ as nt,hb as fe,ib as pt,ja as ae,jb as ue,ka as se,lb as B,oa as me,pa as st,ra as le,sa as mt,ua as lt,va as ce,wa as ct,wb as ge,xb as ft,yb as ut}from"./chunk-TR53RVVY.js";import{X as at,a as ot}from"./chunk-FPVVTWH7.js";import{f as We,g as Ye,s as ie,t as rt,u as re,v as oe,x as Ne}from"./chunk-VEGMBXJ5.js";import{a as Ze}from"./chunk-B5CQEDI6.js";import"./chunk-NM3VG7M7.js";import"./chunk-Z5IRLV5N.js";import"./chunk-E2CVKBY2.js";import{$ as R,Ab as s,Ba as X,Bb as be,Bd as Qe,Ca as F,Cb as Le,Eb as $e,F as we,Gb as Ue,H as G,Ja as Ge,Ka as Oe,Kb as l,Lb as m,Ma as xe,Mb as p,Nb as u,Ob as g,Oc as De,Q as k,Qb as D,Sa as Ae,Tb as S,Uc as he,Wb as V,Yb as N,ac as j,bc as H,bd as Ve,cc as Q,fb as a,fc as O,gb as f,gc as E,ja as L,la as Te,o as M,od as ze,p as v,pc as ke,pd as Y,q as Pe,qc as z,qd as Be,rc as x,rd as qe,sa as P,sd as je,t as y,ta as $,td as Z,uc as Xe,ud as He,vb as Re,vc as Fe,xc as W,yb as _,zb as w}from"./chunk-V2NSBNR3.js";import"./chunk-XGK45UGL.js";import"./chunk-NQUV66Z4.js";function yt(e,o){e&1&&p(0,"div",2);}var Pt=new Te("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Se=(()=>{let o=class o{constructor(n,i,r,d,c){this._elementRef=n,this._ngZone=i,this._changeDetectorRef=r,this._animationMode=d,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new Ge(),this._mode="determinate",this._transitionendHandler=b=>{this.animationEnd.observers.length===0||!b.target||!b.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}));},this._isNoopAnimation=d==="NoopAnimations",c&&(c.color&&(this.color=this._defaultColor=c.color),this.mode=c.mode||this.mode);}get color(){return this._color||this._defaultColor;}set color(n){this._color=n;}get value(){return this._value;}set value(n){this._value=bt(n||0),this._changeDetectorRef.markForCheck();}get bufferValue(){return this._bufferValue||0;}set bufferValue(n){this._bufferValue=bt(n||0),this._changeDetectorRef.markForCheck();}get mode(){return this._mode;}set mode(n){this._mode=n,this._changeDetectorRef.markForCheck();}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler);});}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler);}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`;}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`;}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query";}};o.ɵfac=function(i){return new(i||o)(f(xe),f(Oe),f(De),f(Ae,8),f(Pt,8));},o.ɵcmp=P({type:o,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,r){i&2&&(w("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),$e("mat-"+r.color),Le("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()));},inputs:{color:"color",value:[2,"value","value",he],bufferValue:[2,"bufferValue","bufferValue",he],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[Re,ke],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,r){i&1&&(l(0,"div",0),p(1,"div",1),_(2,yt,1,0,"div",2),m(),l(3,"div",3),p(4,"span",4),m(),l(5,"div",5),p(6,"span",4),m()),i&2&&(a(),be("flex-basis",r._getBufferBarFlexBasis()),a(),Ue(r.mode==="buffer"?2:-1),a(),be("transform",r._getPrimaryBarTransform()));},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-app-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0});let e=o;return e;})();function bt(e,o=0,t=100){return Math.max(o,Math.min(t,e));}var ht=(()=>{let o=class o{};o.ɵfac=function(i){return new(i||o)();},o.ɵmod=$({type:o}),o.ɵinj=L({imports:[at]});let e=o;return e;})();var Ct=(()=>{class e{route;id="sign";className="d-flex flex-column flex-nowrap align-items-center w-100 h-100";constructor(t){this.route=t;}static ɵfac=function(n){return new(n||e)(f(ie));};static ɵcmp=P({type:e,selectors:[["app-sign"]],hostVars:2,hostBindings:function(n,i){n&2&&w("id",i.id)("class",i.className);},decls:4,vars:1,consts:[["role","main",1,"d-flex","flex-row","flex-nowrap","flex-fill","align-items-center","justify-content-center"]],template:function(n,i){n&1&&(p(0,"app-management-header"),l(1,"main",0),p(2,"router-outlet"),m(),p(3,"app-management-footer")),n&2&&(a(),s("@routeAnimations",i.route.firstChild.snapshot.url.toString()));},dependencies:[rt,ut,ft],styles:[`#sign{flex:0 0 100%;overflow:auto;background-color:#5c7986;background-image:radial-gradient(ellipse at center,#8cb7cb,#678796 50%,#5c7986 80%)}#sign.ng-animating{overflow-x:hidden;overflow-y:auto}#sign .mat-mdc-form-field .mdc-text-field--outlined{border-radius:5px;background-color:#f4f4f4;box-shadow:0 0 11px 1px #fff inset}#sign .mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label--float-above{width:auto;max-width:unset;left:0;padding-top:7px;padding-left:7px;padding-right:7px;border-top-left-radius:5px;border-top-right-radius:5px;background-color:#f4f4f4}#sign .mat-mdc-form-field .mat-mdc-form-field-bottom-align:before{content:none}#sign .mat-mdc-form-field .mat-icon{margin-left:.25em;background-color:#0f3949;background-clip:text;color:transparent;text-shadow:1px 0 2px rgba(255,255,255,.5)}#sign .container-field{flex:0 1 0%}@media (max-width: 1399.98px){#sign .container-field{flex:0 0 100%;width:100%}#sign .container-field .mat-mdc-form-field,#sign .container-field .mat-mdc-unelevated-button.mat-primary{width:100%}}#sign .mat-mdc-unelevated-button.mat-primary{padding:1em;min-width:8rem;height:56px;line-height:1.5;border-radius:5px;border-color:#03cafb;background-image:linear-gradient(to bottom,#02b8f9 0,#039de3);color:#50545d}@media (max-width: 767.98px){#sign .mat-mdc-unelevated-button.mat-primary{width:100%}}#sign .mat-mdc-unelevated-button.mat-primary:hover,#sign .mat-mdc-unelevated-button.mat-primary:focus{border-color:#03b6e2;background-image:linear-gradient(to bottom,#02b8f9 0,#038bca)}#sign .mat-mdc-unelevated-button.mat-primary:not(:disabled,.disabled):active,#sign .mat-mdc-unelevated-button.mat-primary:not(:disabled,.disabled).active{border-color:#02a1c9;background-image:linear-gradient(to bottom,#02b8f9 0,#075b81)}#sign .mat-fab:not([class*=mat-elevation-z]),#sign .mat-mdc-mini-fab:not([class*=mat-elevation-z]){box-shadow:none;background-color:transparent}#sign .mat-fab .mat-button-wrapper,#sign .mat-mdc-mini-fab .mat-button-wrapper{padding:0}#sign main{max-width:100vw}#sign main.ng-animating{overflow-x:hidden}#sign main>.d-flex{flex:0 0 100%;min-height:100%}#sign main a{color:#fff;text-decoration:none}#sign main a:hover{text-decoration:underline}
`],encapsulation:2,data:{animation:[St]}});}return e;})();var Xt=()=>["/sign","reset-password"],Ft=()=>["/sign","up"],vt=e=>({ctrl:e});function Dt(e,o){}function Vt(e,o){if(e&1&&(l(0,"mat-error"),_(1,Dt,0,0,"ng-template",27),m()),e&2){let t=N(),n=O(30);a(),s("ngTemplateOutlet",n)("ngTemplateOutletContext",x(2,vt,t.formGroup.controls.account));}}function zt(e,o){}function Bt(e,o){if(e&1&&(l(0,"mat-error"),_(1,zt,0,0,"ng-template",27),m()),e&2){let t=N(),n=O(30);a(),s("ngTemplateOutlet",n)("ngTemplateOutletContext",x(2,vt,t.formGroup.controls.password));}}function qt(e,o){e&1&&p(0,"mat-progress-bar",28);}function jt(e,o){e&1&&(l(0,"p",30),u(1),S(2,4),g(),m());}function Ht(e,o){e&1&&(l(0,"p",30),u(1),S(2,5),g(),m());}function Qt(e,o){if(e&1&&_(0,jt,3,0,"p",29)(1,Ht,3,0,"p",29),e&2){let t=o.ctrl;s("ngIf",t.hasError("required")),a(),s("ngIf",t.hasError("email"));}}function Wt(e,o){e&1&&(l(0,"span",17),u(1),S(2,6),g(),m());}function Yt(e,o){if(e&1){let t=D();u(0),l(1,"button",31),V("click",function(){let i=X(t).$implicit,r=N();return F(r.signInWithProvider(i));}),p(2,"mat-icon",32),m(),g();}if(e&2){let t=o.$implicit;a(),s("matTooltip",t.label),a(),s("svgIcon",t.iconName);}}var Et=(()=>{class e{router;fireAuth;authService;notification;storage;className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100";formGroup=new Ke({account:new A(null,[I.required]),password:new A(null,[I.required])});signInOptions;hasOthers=!1;requesting=!1;signInForm;constructor(t,n,i,r,d){this.router=t,this.fireAuth=n,this.authService=i,this.notification=r,this.storage=d,this.signInOptions=i.getDefaultAuthMethods().pipe(y(c=>(this.hasOthers=c.length>0,c)));}ngOnInit(){this.signInForm.form.addControl("user",this.formGroup);}ngOnDestroy(){this.notification.dismiss();}login(){let t=this.signInForm;if(t.form.markAllAsTouched(),t&&t.valid){let n=this.notification,i=this.formGroup.value;this.requesting=!0,t.control.disable(),this.authService.signIn(i.account,i.password).pipe(G(r=>{switch(r.code){case B.INVALID_PASSWORD:n.openError("\u5BC6\u7801\u9519\u8BEF!");break;default:n.openError(n.stripMessage(r.message));}return this.requesting=!1,t.control.enable(),v(!1);}),k(()=>{this.requesting=!1,t.control.enable();})).subscribe(r=>{r?(this.router.navigateByUrl(this.authService.redirectUrl||""),n.dismiss()):n.openError("\u767B\u5F55\u5931\u8D25\u3002");});}}signInWithProvider(t){this.signInWithRedirect(t.provider).subscribe();}signInWithRedirect(t){let n=this.notification;return n.showInitLoading(),this.storage.set(pt,!0),M(this.fireAuth.signInWithPopup(t)).pipe(G(i=>{switch(i.code){case B.POPUP_CLOSED_BY_USER:break;default:n.openError(n.stripMessage(i.message));}return v(void 0);}),R(i=>i?.user?this.authService.storeUser({uid:i.user.uid,name:i.user.displayName,account:i.user.email}).pipe(y(()=>(this.router.navigateByUrl(this.authService.redirectUrl||""),i))):v(i)),k(()=>{n.hideLoading();}));}static ɵfac=function(n){return new(n||e)(f(re),f(K),f(ge),f(pe),f(ue));};static ɵcmp=P({type:e,selectors:[["app-sign-in"]],viewQuery:function(n,i){if(n&1&&j(T,7),n&2){let r;H(r=Q())&&(i.signInForm=r.first);}},hostVars:1,hostBindings:function(n,i){n&2&&w("class",i.className);},decls:37,vars:13,consts:()=>{let t;t="\u8D26\u53F7(\u7535\u5B50\u90AE\u7BB1)";let n;n="\u767B\u5F55\u5BC6\u7801";let i;i="\u5FD8\u8BB0\u5BC6\u7801?";let r;r="\u6CE8\u518C";let d;d="\u767B\u5F55";let c;c="\u5FC5\u586B\u3002";let b;b="\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E\u3002";let U;return U="\u901A\u8FC7\u7B2C\u4E09\u65B9\u767B\u5F55",[["templateInputMsg",""],i,r,d,c,b,U,[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4",3,"formGroup"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline","subscriptSizing","dynamic"],["fontSet","Marching","matPrefix",""],["name","account","type","text","autocomplete","username","matInput","","formControlName","account","placeholder",t],[4,"ngIf"],["name","password","type","password","autocomplete","current-password","matInput","","formControlName","password","placeholder",n],[1,"mt-2"],[1,"mt-2",3,"routerLink"],[1,"text-white"],[1,"container-field","mb-4"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate","class","position-absolute top-0 start-0 h-100 opacity-25",4,"ngIf"],[1,"position-relative"],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center"],["class","text-white",4,"ngIf"],[1,"d-sm-block","d-md-none","mb-2","w-100"],[4,"ngFor","ngForOf"],[1,"d-sm-block","mb-4","w-100"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],["class","my-0",4,"ngIf"],[1,"my-0"],["type","button","mat-mini-fab","",1,"ms-2",3,"click","matTooltip"],[3,"svgIcon"]];},template:function(n,i){if(n&1){let r=D();l(0,"form",7),V("ngSubmit",function(){return X(r),F(i.login());}),l(1,"div",8)(2,"div",9)(3,"mat-form-field",10)(4,"mat-icon",11),E(5,"person"),m(),p(6,"input",12),_(7,Vt,2,4,"mat-error",13),m()(),l(8,"div",9)(9,"mat-form-field",10)(10,"mat-icon",11),E(11,"lock"),m(),p(12,"input",14),_(13,Bt,2,4,"mat-error",13),m(),l(14,"div",15)(15,"a",16),u(16),S(17,1),g(),m(),l(18,"span",17),E(19," | "),m(),l(20,"a",16),u(21),S(22,2),g(),m()()(),l(23,"div",18)(24,"button",19),_(25,qt,1,0,"mat-progress-bar",20),l(26,"span",21),u(27),S(28,3),g(),m()()()(),_(29,Qt,2,2,"ng-template",null,0,W),m(),l(31,"div",22),_(32,Wt,3,0,"span",23),p(33,"div",24),_(34,Yt,3,2,"ng-container",25),Xe(35,"async"),p(36,"div",26),m();}n&2&&(a(),s("formGroup",i.formGroup),a(6),s("ngIf",i.formGroup.controls.account.invalid),a(6),s("ngIf",i.formGroup.controls.password.invalid),a(2),s("routerLink",z(11,Xt)),a(5),s("routerLink",z(12,Ft)),a(4),s("disabled",i.requesting),a(),s("ngIf",i.requesting),a(7),s("ngIf",i.hasOthers),a(2),s("ngForOf",Fe(35,9,i.signInOptions)));},dependencies:[ze,Y,Z,ne,J,ee,te,T,et,tt,oe,le,mt,me,ae,se,ce,de,Se,_e,He],encapsulation:2});}return e;})();var Zt=()=>["/sign","in"],Ie=e=>({ctrl:e});function Kt(e,o){}function Jt(e,o){if(e&1&&(l(0,"mat-error"),_(1,Kt,0,0,"ng-template",25),m()),e&2){let t=N(),n=O(15);a(),s("ngTemplateOutlet",n)("ngTemplateOutletContext",x(2,Ie,t.accountCtrl));}}function en(e,o){}function tn(e,o){if(e&1&&(l(0,"mat-error"),_(1,en,0,0,"ng-template",25),m()),e&2){let t=N(2),n=O(15);a(),s("ngTemplateOutlet",n)("ngTemplateOutletContext",x(2,Ie,t.passwordCtrl));}}function nn(e,o){if(e&1&&(l(0,"div",12)(1,"mat-form-field",13)(2,"mat-icon",14),E(3,"lock"),m(),p(4,"input",26),_(5,tn,2,4,"mat-error",16),m()()),e&2){let t=N();a(4),s("formControl",t.passwordCtrl),a(),s("ngIf",t.passwordCtrl.invalid);}}function rn(e,o){}function on(e,o){if(e&1&&(l(0,"mat-error"),_(1,rn,0,0,"ng-template",25),m()),e&2){let t=N(2),n=O(15);a(),s("ngTemplateOutlet",n)("ngTemplateOutletContext",x(2,Ie,t.passwordCfmCtrl));}}function an(e,o){if(e&1&&(l(0,"div",12)(1,"mat-form-field",13)(2,"mat-icon",14),E(3,"lock"),m(),p(4,"input",27),_(5,on,2,4,"mat-error",16),m()()),e&2){let t=N();a(4),s("formControl",t.passwordCfmCtrl),a(),s("ngIf",t.passwordCfmCtrl.invalid);}}function sn(e,o){e&1&&p(0,"mat-progress-bar",34);}function mn(e,o){e&1&&(u(0),S(1,3),g());}function ln(e,o){e&1&&(u(0),S(1,4),g());}function cn(e,o){if(e&1&&(l(0,"button",28),_(1,sn,1,0,"mat-progress-bar",29),l(2,"span",30),u(3,31),_(4,mn,2,0,"ng-container",32)(5,ln,2,0,"ng-container",33),g(),m()()),e&2){let t=N();s("disabled",t.requesting),a(),s("ngIf",t.requesting),a(2),s("ngSwitch",t.isResetPassword),a(),s("ngSwitchCase",!0);}}function dn(e,o){e&1&&p(0,"mat-progress-bar",34);}function _n(e,o){if(e&1&&(l(0,"button",35),_(1,dn,1,0,"mat-progress-bar",29),l(2,"span",30),u(3),S(4,5),g(),m()()),e&2){let t=N();s("disabled",t.requesting),a(),s("ngIf",t.requesting);}}function pn(e,o){e&1&&(l(0,"p",37),u(1),S(2,6),g(),m());}function fn(e,o){e&1&&(l(0,"p",37),u(1),S(2,7),g(),m());}function un(e,o){e&1&&(l(0,"p",37),u(1),S(2,8),g(),m());}function gn(e,o){e&1&&(l(0,"p",37),u(1),S(2,9),g(),m());}function Sn(e,o){if(e&1&&_(0,pn,3,0,"p",36)(1,fn,3,0,"p",36)(2,un,3,0,"p",36)(3,gn,3,0,"p",36),e&2){let t=o.ctrl;s("ngIf",t.hasError("required")),a(),s("ngIf",t.hasError("email")),a(),s("ngIf",t.hasError("passwordDiff")),a(),s("ngIf",t.hasError("minlength")||t.hasError("maxlength"));}}var Ce=(()=>{class e{route;router;document;fireAuth;authService;notification;storage;className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100";accountCtrl=new A(null,[I.required,I.email]);passwordCtrl=new A(null,[I.required,I.minLength(8),I.maxLength(16)]);passwordCfmCtrl=new A(null,[I.required]);emailVerified=!1;isResetPassword=!1;requesting=!1;signUpForm;user;constructor(t,n,i,r,d,c,b){this.route=t,this.router=n,this.document=i,this.fireAuth=r,this.authService=d,this.notification=c,this.storage=b,this.isResetPassword=ot(t.snapshot.routeConfig.data?.resetPassword);}ngOnInit(){this.accountCtrl.disable(),this.passwordCtrl.disable(),this.passwordCfmCtrl.disable(),this.signUpForm.form.addControl("account",this.accountCtrl),this.requesting=!0,M(this.fireAuth.isSignInWithEmailLink(this.router.url)).pipe(R(t=>{let n=this.storage.get(fe);if(t&&n){let i=this.notification.openInfo("\u6B63\u5728\u9A8C\u8BC1\uFF0C\u8BF7\u7A0D\u7B49...");return this.storage.delete(fe),this.emailVerified=!0,this.accountCtrl.setValue(n),this.passwordCfmCtrl.addValidators([I.required,r=>{let d=this.passwordCtrl;return d&&d.valid&&d.value!==r.value?{passwordDiff:!0}:null;}]),this.signUpForm.form.addControl("password",this.passwordCtrl),this.signUpForm.form.addControl("passwordCfm",this.passwordCfmCtrl),M(this.fireAuth.signInWithEmailLink(n,this.router.url)).pipe(G(r=>{let d=this.notification;return d.openError(d.stripMessage(r.message)),this.emailVerified=!1,v(null);}),y(r=>(i.dismiss(),this.notification.openInfo("\u9A8C\u8BC1\u7ED3\u675F\u3002",{duration:5e3}),r)),we(r=>!!r));}else return v(null);})).subscribe(t=>{let n=this.user=t?.user;this.requesting=!1,!n&&this.accountCtrl.enable(),this.passwordCtrl.enable(),this.passwordCfmCtrl.enable();});}register(){let t=this.signUpForm;if(t.form.markAllAsTouched(),t&&t.valid){let n=this.fireAuth,i=this.notification,r=t.form.value,d=this.user;this.requesting=!0,t.control.disable(),this.emailVerified?M(d.updatePassword(r.password)).pipe(G(c=>{switch(c.code){case B.POPUP_CLOSED_BY_USER:break;default:i.openError(i.stripMessage(c.message));}return this.requesting=!1,t.control.enable(),v(!1);}),y(c=>typeof c=="boolean"?c:!0),R(c=>c?this.authService.storeUser({uid:d.uid,name:d.displayName,account:d.email}).pipe(y(()=>c)):v(c))).subscribe(c=>{c?(i.openSuccess(this.isResetPassword?"\u5BC6\u7801\u91CD\u7F6E\u6210\u529F\u3002":"\u6CE8\u518C\u6210\u529F\u3002"),this.router.navigateByUrl(this.authService.redirectUrl||"")):(i.openError(this.isResetPassword?"\u5BC6\u7801\u91CD\u7F6E\u5931\u8D25\u3002":"\u6CE8\u518C\u5931\u8D25\u3002"),this.requesting=!1,t.control.enable());}):M(n.fetchSignInMethodsForEmail(r.account)).pipe(R(c=>{let b=c.length;return b===0||b===1&&c[0]===Ze.EMAIL_LINK_SIGN_IN_METHOD?M(n.sendSignInLinkToEmail(r.account,{url:this.document.location.href,handleCodeInApp:!0})):(i.openError("\u6B64\u90AE\u7BB1\u5DF2\u7ECF\u88AB\u6CE8\u518C\u3002"),Pe(()=>new Error("There already exists an account registered with this email address.")));})).pipe(G(c=>(t.control.enable(),v(!1))),y(c=>typeof c=="boolean"?c:!0),k(()=>{this.requesting=!1;})).subscribe(c=>{c?(this.storage.set(fe,r.account),i.openSuccess("\u9A8C\u8BC1\u8FDE\u63A5\u5DF2\u7ECF\u53D1\u9001\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536\u3002")):i.openError("\u9A8C\u8BC1\u8FDE\u63A5\u53D1\u9001\u5931\u8D25\u3002");});}}static ɵfac=function(n){return new(n||e)(f(ie),f(re),f(Ve),f(K),f(ge),f(pe),f(ue));};static ɵcmp=P({type:e,selectors:[["app-sign-up"]],viewQuery:function(n,i){if(n&1&&j(T,7),n&2){let r;H(r=Q())&&(i.signUpForm=r.first);}},hostVars:1,hostBindings:function(n,i){n&2&&w("class",i.className);},decls:24,vars:9,consts:()=>{let t;t="\u7535\u5B50\u90AE\u7BB1";let n;n="\u53D1\u9001\u9A8C\u8BC1\u94FE\u63A5\u3002";let i;i="\u5DF2\u6709\u8D26\u53F7\uFF1F";let r;r="\u767B\u5F55";let d;d="\u767B\u5F55\u5BC6\u7801";let c;c="\u786E\u8BA4\u5BC6\u7801";let b;b="\u786E\u8BA4";let U;U="\u6CE8\u518C";let C;C="\u9A8C\u8BC1";let ve;ve="\u5FC5\u586B\u3002";let Ee;Ee="\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E\u3002";let Me;Me="\u5BC6\u7801\u4E0D\u4E00\u81F4\u3002";let ye;return ye="\u5BC6\u7801\u4E3A8\u81F316\u4E2A\u5927\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001_-+!.@#$%^&*\u7B49\u7279\u6B8A\u5B57\u7B26\u3002",[["templateInputMsg",""],i,r,b,U,C,ve,Ee,Me,ye,[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline","subscriptSizing","dynamic"],["fontSet","Marching","matPrefix",""],["name","account","type","email","matInput","","placeholder",t,3,"readonly","formControl"],[4,"ngIf"],["class","container-field me-lg-5 mb-4",4,"ngIf"],[1,"container-field","mb-4",3,"ngSwitch"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden",3,"disabled",4,"ngSwitchCase"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden","matTooltip",n,3,"disabled",4,"ngSwitchDefault"],[1,"mt-1"],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center","pb-4"],[1,"text-white"],[3,"routerLink"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["name","password","type","password","matInput","","placeholder",d,3,"formControl"],["name","passwordCfm","type","password","matInput","","placeholder",c,3,"formControl"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate","class","position-absolute top-0 start-0 h-100 opacity-25",4,"ngIf"],[1,"position-relative"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],["type","submit","mat-flat-button","","color","primary","matTooltip",n,1,"overflow-hidden",3,"disabled"],["class","my-0",4,"ngIf"],[1,"my-0"]];},template:function(n,i){if(n&1){let r=D();l(0,"form",10),V("ngSubmit",function(){return X(r),F(i.register());}),l(1,"div",11)(2,"div",12)(3,"mat-form-field",13)(4,"mat-icon",14),E(5,"person"),m(),p(6,"input",15),_(7,Jt,2,4,"mat-error",16),m()(),_(8,nn,6,2,"div",17)(9,an,6,2,"div",17),l(10,"div",18),_(11,cn,6,4,"button",19)(12,_n,5,2,"button",20),p(13,"div",21),m()(),_(14,Sn,4,4,"ng-template",null,0,W),m(),l(16,"div",22)(17,"span",23),u(18),S(19,1),g(),m(),E(20," \xA0 "),l(21,"a",24),u(22),S(23,2),g(),m()();}n&2&&(a(6),s("readonly",i.emailVerified)("formControl",i.accountCtrl),a(),s("ngIf",i.accountCtrl.invalid),a(),s("ngIf",i.emailVerified),a(),s("ngIf",i.emailVerified),a(),s("ngSwitch",i.emailVerified),a(),s("ngSwitchCase",!0),a(10),s("routerLink",z(8,Zt)));},dependencies:[Y,Z,Be,qe,je,ne,J,ee,te,T,Je,oe,le,me,ae,se,ce,de,Se,_e],encapsulation:2});}return e;})();var bn=[{path:"",component:Ct,children:[{path:"in",component:Et},{path:"up",component:Ce},{path:"reset-password",component:Ce,data:{resetPassword:!0}}]},{path:"",redirectTo:"/in",pathMatch:"full"},{path:"**",redirectTo:"/in"}],Mt=(()=>{class e{static ɵfac=function(n){return new(n||e)();};static ɵmod=$({type:e});static ɵinj=L({imports:[Ne.forChild(bn),Ne]});}return e;})();var ui=(()=>{class e{static ɵfac=function(n){return new(n||e)();};static ɵmod=$({type:e});static ɵinj=L({providers:[We(Ye())],imports:[Qe,nt,it,Mt,lt,st,ct,dt,ht,_t,gt]});}return e;})();export{ui as LoginModule};/**i18n:4ec78395217facedd742edef8dfa814b1ea6af3fbb33fa1f9a497a05293d0698*/