import"./chunk-MF5FWSVI.js";import{h as ht}from"./chunk-274ZLA2V.js";import{A as et,Ab as Ct,B as O,C as L,Da as pe,E as re,Ea as ft,G as tt,H as nt,I as it,M as rt,Ma as fe,N as ot,Na as ut,Qa as ue,X as me,Y as le,Ya as ge,Za as gt,_a as Se,aa as ce,ab as H,da as de,ea as ct,fa as dt,ga as _e,ha as _t,lb as be,m as ee,mb as St,nb as bt,pa as pt,u as te,w as h,y as ne,z as ie}from"./chunk-ZHNDKHWE.js";import{S as st,V as mt,ga as lt}from"./chunk-CEGVERYJ.js";import{i as Ze,j as Ke,u as oe,v as at,w as ae,x as se,z as ve}from"./chunk-AJ2ABEQE.js";import{a as Je}from"./chunk-RAFVY6Q4.js";import"./chunk-ZYVHQIOC.js";import"./chunk-HPOMB5AY.js";import"./chunk-UC2JMEVD.js";import{$,Ac as j,Bc as R,E as Oe,Ec as De,Fc as Ve,Fd as Ye,G as x,Hc as K,Jb as G,Ka as Ae,Kb as E,Lb as M,Mb as Ue,Nb as ke,Ob as Xe,P as B,Pb as m,Qb as a,Rb as r,Sb as _,Tb as f,Ub as u,Wb as z,Xc as ze,Zb as g,ac as q,ad as Ie,bc as C,db as o,fc as W,gc as Y,hb as Re,hc as Z,ib as S,ja as U,la as xe,lc as A,mc as Ne,n as y,na as k,nc as Fe,o as v,p as Ge,pb as T,pc as Be,qb as X,qc as P,s as w,sa as D,ta as V,td as qe,ud as je,vb as p,vd as He,wd as Qe,xa as he,xb as Le,xd as J,yb as $e,yd as We}from"./chunk-DAKW3Y5S.js";import"./chunk-6B763VMG.js";import"./chunk-LO4PBWZP.js";function Tt(t,l){t&1&&_(0,"div",2);}var Gt=new xe("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Ce=(()=>{class t{_elementRef=k(Ae);_ngZone=k($e);_changeDetectorRef=k(ze);_renderer=k(Re);_cleanupTransitionEnd;constructor(){let e=k(Gt,{optional:!0});e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode);}_isNoopAnimation=mt();get color(){return this._color||this._defaultColor;}set color(e){this._color=e;}_color;_defaultColor="primary";get value(){return this._value;}set value(e){this._value=Nt(e||0),this._changeDetectorRef.markForCheck();}_value=0;get bufferValue(){return this._bufferValue||0;}set bufferValue(e){this._bufferValue=Nt(e||0),this._changeDetectorRef.markForCheck();}_bufferValue=0;animationEnd=new Le();get mode(){return this._mode;}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck();}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler);});}ngOnDestroy(){this._cleanupTransitionEnd?.();}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`;}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`;}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query";}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}));};static ɵfac=function(n){return new(n||t)();};static ɵcmp=T({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(n,i){n&2&&(G("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),Be("mat-"+i.color),Fe("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()));},inputs:{color:"color",value:[2,"value","value",Ie],bufferValue:[2,"bufferValue","bufferValue",Ie],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(n,i){n&1&&(a(0,"div",0),_(1,"div",1),E(2,Tt,1,0,"div",2),r(),a(3,"div",3),_(4,"span",4),r(),a(5,"div",5),_(6,"span",4),r()),n&2&&(o(),Ne("flex-basis",i._getBufferBarFlexBasis()),o(),M(i.mode==="buffer"?2:-1),o(),Ne("transform",i._getPrimaryBarTransform()));},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0});}return t;})();function Nt(t,l=0,e=100){return Math.max(l,Math.min(e,t));}var It=(()=>{class t{static ɵfac=function(n){return new(n||t)();};static ɵmod=X({type:t});static ɵinj=U({imports:[lt]});}return t;})();var Mt=(()=>{class t{route;id="sign";className="d-flex flex-column flex-nowrap align-items-center w-100 h-100";constructor(e){this.route=e;}static ɵfac=function(n){return new(n||t)(S(oe));};static ɵcmp=T({type:t,selectors:[["app-sign"]],hostVars:2,hostBindings:function(n,i){n&2&&G("id",i.id)("class",i.className);},standalone:!1,decls:4,vars:1,consts:[["role","main",1,"d-flex","flex-row","flex-nowrap","flex-fill","align-items-center","justify-content-center"]],template:function(n,i){n&1&&(_(0,"app-management-header"),a(1,"main",0),_(2,"router-outlet"),r(),_(3,"app-management-footer")),n&2&&(o(),m("@routeAnimations",i.route.firstChild.snapshot.url.toString()));},dependencies:[at,bt,St],styles:[`#sign{flex:0 0 100%;overflow:auto;background-color:#5c7986;background-image:radial-gradient(ellipse at center,#8cb7cb,#678796 50%,#5c7986 80%)}#sign.ng-animating{overflow-x:hidden;overflow-y:auto}#sign .mat-mdc-form-field .mdc-text-field--outlined{border-radius:5px;background-color:#f4f4f4;box-shadow:0 0 11px 1px #fff inset}#sign .mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label--float-above{width:auto;max-width:unset;left:0;padding-top:7px;padding-left:7px;padding-right:7px;border-top-left-radius:5px;border-top-right-radius:5px;background-color:#f4f4f4}#sign .mat-mdc-form-field .mat-mdc-form-field-bottom-align:before{content:none}#sign .mat-mdc-form-field .mat-icon{margin-left:.25em;background-color:#0f3949;background-clip:text;color:transparent;text-shadow:1px 0 2px rgba(255,255,255,.5)}#sign .container-field{flex:0 1 0%}@media (max-width: 1399.98px){#sign .container-field{flex:0 0 100%;width:100%}#sign .container-field .mat-mdc-form-field,#sign .container-field .mat-mdc-unelevated-button.mat-primary{width:100%}}#sign .mat-mdc-unelevated-button.mat-primary{padding:1em;min-width:8rem;height:56px;line-height:1.5;border-radius:5px;border-color:#03cafb;background-image:linear-gradient(to bottom,#02b8f9 0,#039de3);color:#50545d}@media (max-width: 767.98px){#sign .mat-mdc-unelevated-button.mat-primary{width:100%}}#sign .mat-mdc-unelevated-button.mat-primary:hover,#sign .mat-mdc-unelevated-button.mat-primary:focus{border-color:#03b6e2;background-image:linear-gradient(to bottom,#02b8f9 0,#038bca)}#sign .mat-mdc-unelevated-button.mat-primary:not(:disabled,.disabled):active,#sign .mat-mdc-unelevated-button.mat-primary:not(:disabled,.disabled).active{border-color:#02a1c9;background-image:linear-gradient(to bottom,#02b8f9 0,#075b81)}#sign .mat-fab:not([class*=mat-elevation-z]),#sign .mat-mdc-mini-fab:not([class*=mat-elevation-z]){box-shadow:none;background-color:transparent}#sign .mat-fab .mat-button-wrapper,#sign .mat-mdc-mini-fab .mat-button-wrapper{padding:0}#sign main{max-width:100vw}#sign main.ng-animating{overflow-x:hidden}#sign main>.d-flex{flex:0 0 100%;min-height:100%}#sign main a{color:#fff;text-decoration:none}#sign main a:hover{text-decoration:underline}
`],encapsulation:2,data:{animation:[ht]}});}return t;})();var Dt=()=>["/sign","reset-password"],Vt=()=>["/sign","up"],Pt=t=>({ctrl:t});function zt(t,l){}function qt(t,l){if(t&1&&(a(0,"mat-error"),p(1,zt,0,0,"ng-template",25),r()),t&2){let e=C(),n=A(30);o(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,Pt,e.formGroup.controls.account));}}function jt(t,l){}function Ht(t,l){if(t&1&&(a(0,"mat-error"),p(1,jt,0,0,"ng-template",25),r()),t&2){let e=C(),n=A(30);o(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,Pt,e.formGroup.controls.password));}}function Qt(t,l){t&1&&_(0,"mat-progress-bar",19);}function Wt(t,l){t&1&&(a(0,"p",26),f(1),g(2,4),u(),r());}function Yt(t,l){t&1&&(a(0,"p",26),f(1),g(2,5),u(),r());}function Zt(t,l){if(t&1&&(E(0,Wt,3,0,"p",26),E(1,Yt,3,0,"p",26)),t&2){let e=l.ctrl;M(e.hasError("required")?0:-1),o(),M(e.hasError("email")?1:-1);}}function Kt(t,l){t&1&&(a(0,"span",16),f(1),g(2,6),u(),r());}function Jt(t,l){if(t&1){let e=z();a(0,"button",27),q("click",function(){let i=D(e).$implicit,s=C();return V(s.signInWithProvider(i));}),_(1,"mat-icon",28),r();}if(t&2){let e=l.$implicit;m("matTooltip",e.label),o(),m("svgIcon",e.iconName);}}var yt=(()=>{class t{router;fireAuth;authService;notification;storage;className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100";formGroup=new et({account:new L(null,[h.required]),password:new L(null,[h.required])});signInOptions;hasOthers=!1;requesting=!1;signInForm;constructor(e,n,i,s,d){this.router=e,this.fireAuth=n,this.authService=i,this.notification=s,this.storage=d,this.signInOptions=i.getDefaultAuthMethods().pipe(w(c=>(this.hasOthers=c.length>0,c)));}ngOnInit(){this.signInForm.form.addControl("user",this.formGroup);}ngOnDestroy(){this.notification.dismiss();}login(){let e=this.signInForm;if(e.form.markAllAsTouched(),e&&e.valid){let n=this.notification,i=this.formGroup.value;this.requesting=!0,e.control.disable(),this.authService.signIn(i.account,i.password).pipe(x(s=>{switch(s.code){case H.INVALID_PASSWORD:n.openError("\u5BC6\u7801\u9519\u8BEF!");break;default:n.openError(n.stripMessage(s.message));}return this.requesting=!1,e.control.enable(),v(!1);}),B(()=>{this.requesting=!1,e.control.enable();})).subscribe(s=>{s?(this.router.navigateByUrl(this.authService.redirectUrl||""),n.dismiss()):n.openError("\u767B\u5F55\u5931\u8D25\u3002");});}}signInWithProvider(e){this.signInWithRedirect(e.provider).subscribe();}signInWithRedirect(e){let n=this.notification;return n.showInitLoading(),this.storage.set(gt,!0),y(this.fireAuth.signInWithPopup(e)).pipe(x(i=>{switch(i.code){case H.POPUP_CLOSED_BY_USER:break;default:n.openError(n.stripMessage(i.message));}return v(void 0);}),$(i=>i?.user?this.authService.storeUser({uid:i.user.uid,name:i.user.displayName,account:i.user.email}).pipe(w(()=>(this.router.navigateByUrl(this.authService.redirectUrl||""),i))):v(i)),B(()=>{n.hideLoading();}));}static ɵfac=function(n){return new(n||t)(S(ae),S(ee),S(be),S(ue),S(Se));};static ɵcmp=T({type:t,selectors:[["app-sign-in"]],viewQuery:function(n,i){if(n&1&&W(O,7),n&2){let s;Y(s=Z())&&(i.signInForm=s.first);}},hostVars:1,hostBindings:function(n,i){n&2&&G("class",i.className);},standalone:!1,decls:38,vars:12,consts:()=>{let e;e="Account";let n;n="Password";let i;i="Forgot password?";let s;s="Sign up";let d;d="Sign in";let c;c="Required.";let N;N="Incorrect email format.";let F;return F="Sign in with",[["templateInputMsg",""],i,s,d,c,N,F,[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4",3,"formGroup"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline","subscriptSizing","dynamic"],["fontSet","Marching","matPrefix",""],["name","account","type","text","autocomplete","username","matInput","","formControlName","account","placeholder",e],["name","password","type","password","autocomplete","current-password","matInput","","formControlName","password","placeholder",n],[1,"mt-2"],[1,"mt-2",3,"routerLink"],[1,"text-white"],[1,"container-field","mb-4"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],[1,"position-relative"],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center"],[1,"d-sm-block","d-md-none","mb-2","w-100"],["type","button","mat-mini-fab","",1,"ms-2",3,"matTooltip"],[1,"d-sm-block","mb-4","w-100"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"my-0"],["type","button","mat-mini-fab","",1,"ms-2",3,"click","matTooltip"],[3,"svgIcon"]];},template:function(n,i){if(n&1){let s=z();a(0,"form",7),q("ngSubmit",function(){return D(s),V(i.login());}),a(1,"div",8)(2,"div",9)(3,"mat-form-field",10)(4,"mat-icon",11),P(5,"person"),r(),_(6,"input",12),E(7,qt,2,4,"mat-error"),r()(),a(8,"div",9)(9,"mat-form-field",10)(10,"mat-icon",11),P(11,"lock"),r(),_(12,"input",13),E(13,Ht,2,4,"mat-error"),r(),a(14,"div",14)(15,"a",15),f(16),g(17,1),u(),r(),a(18,"span",16),P(19," | "),r(),a(20,"a",15),f(21),g(22,2),u(),r()()(),a(23,"div",17)(24,"button",18),E(25,Qt,1,0,"mat-progress-bar",19),a(26,"span",20),f(27),g(28,3),u(),r()()()(),p(29,Zt,2,2,"ng-template",null,0,K),r(),a(31,"div",21),E(32,Kt,3,0,"span",16),_(33,"div",22),ke(34,Jt,2,2,"button",23,Ue),De(36,"async"),_(37,"div",24),r();}n&2&&(o(),m("formGroup",i.formGroup),o(6),M(i.formGroup.controls.account.invalid?7:-1),o(6),M(i.formGroup.controls.password.invalid?13:-1),o(2),m("routerLink",j(10,Dt)),o(5),m("routerLink",j(11,Vt)),o(4),m("disabled",i.requesting),o(),M(i.requesting?25:-1),o(7),M(i.hasOthers?32:-1),o(2),Xe(Ve(36,8,i.signInOptions)));},dependencies:[J,re,te,ne,ie,O,nt,it,se,de,ct,ce,me,le,_e,pe,Ce,fe,We],encapsulation:2});}return t;})();var en=()=>["/sign","in"],Ee=t=>({ctrl:t});function tn(t,l){}function nn(t,l){if(t&1&&(a(0,"mat-error"),p(1,tn,0,0,"ng-template",25),r()),t&2){let e=C(),n=A(15);o(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,Ee,e.accountCtrl));}}function rn(t,l){}function on(t,l){if(t&1&&(a(0,"mat-error"),p(1,rn,0,0,"ng-template",25),r()),t&2){let e=C(2),n=A(15);o(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,Ee,e.passwordCtrl));}}function an(t,l){if(t&1&&(a(0,"div",12)(1,"mat-form-field",13)(2,"mat-icon",14),P(3,"lock"),r(),_(4,"input",26),p(5,on,2,4,"mat-error",16),r()()),t&2){let e=C();o(4),m("formControl",e.passwordCtrl),o(),m("ngIf",e.passwordCtrl.invalid);}}function sn(t,l){}function mn(t,l){if(t&1&&(a(0,"mat-error"),p(1,sn,0,0,"ng-template",25),r()),t&2){let e=C(2),n=A(15);o(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,Ee,e.passwordCfmCtrl));}}function ln(t,l){if(t&1&&(a(0,"div",12)(1,"mat-form-field",13)(2,"mat-icon",14),P(3,"lock"),r(),_(4,"input",27),p(5,mn,2,4,"mat-error",16),r()()),t&2){let e=C();o(4),m("formControl",e.passwordCfmCtrl),o(),m("ngIf",e.passwordCfmCtrl.invalid);}}function cn(t,l){t&1&&_(0,"mat-progress-bar",34);}function dn(t,l){t&1&&(f(0),g(1,3),u());}function _n(t,l){t&1&&(f(0),g(1,4),u());}function pn(t,l){if(t&1&&(a(0,"button",28),p(1,cn,1,0,"mat-progress-bar",29),a(2,"span",30),f(3,31),p(4,dn,2,0,"ng-container",32)(5,_n,2,0,"ng-container",33),u(),r()()),t&2){let e=C();m("disabled",e.requesting),o(),m("ngIf",e.requesting),o(2),m("ngSwitch",e.isResetPassword),o(),m("ngSwitchCase",!0);}}function fn(t,l){t&1&&_(0,"mat-progress-bar",34);}function un(t,l){if(t&1&&(a(0,"button",35),p(1,fn,1,0,"mat-progress-bar",29),a(2,"span",30),f(3),g(4,5),u(),r()()),t&2){let e=C();m("disabled",e.requesting),o(),m("ngIf",e.requesting);}}function gn(t,l){t&1&&(a(0,"p",37),f(1),g(2,6),u(),r());}function Sn(t,l){t&1&&(a(0,"p",37),f(1),g(2,7),u(),r());}function bn(t,l){t&1&&(a(0,"p",37),f(1),g(2,8),u(),r());}function Cn(t,l){t&1&&(a(0,"p",37),f(1),g(2,9),u(),r());}function hn(t,l){if(t&1&&p(0,gn,3,0,"p",36)(1,Sn,3,0,"p",36)(2,bn,3,0,"p",36)(3,Cn,3,0,"p",36),t&2){let e=l.ctrl;m("ngIf",e.hasError("required")),o(),m("ngIf",e.hasError("email")),o(),m("ngIf",e.hasError("passwordDiff")),o(),m("ngIf",e.hasError("minlength")||e.hasError("maxlength"));}}var Me=(()=>{class t{route;router;document;fireAuth;authService;notification;storage;className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100";accountCtrl=new L(null,[h.required,h.email]);passwordCtrl=new L(null,[h.required,h.minLength(8),h.maxLength(16)]);passwordCfmCtrl=new L(null,[h.required]);emailVerified=!1;isResetPassword=!1;requesting=!1;signUpForm;user;constructor(e,n,i,s,d,c,N){this.route=e,this.router=n,this.document=i,this.fireAuth=s,this.authService=d,this.notification=c,this.storage=N,this.isResetPassword=st(e.snapshot.routeConfig.data?.resetPassword);}ngOnInit(){this.accountCtrl.disable(),this.passwordCtrl.disable(),this.passwordCfmCtrl.disable(),this.signUpForm.form.addControl("account",this.accountCtrl),this.requesting=!0,y(this.fireAuth.isSignInWithEmailLink(this.router.url)).pipe($(e=>{let n=this.storage.get(ge);if(e&&n){let i=this.notification.openInfo("\u6B63\u5728\u9A8C\u8BC1\uFF0C\u8BF7\u7A0D\u7B49...");return this.storage.delete(ge),this.emailVerified=!0,this.accountCtrl.setValue(n),this.passwordCfmCtrl.addValidators([h.required,s=>{let d=this.passwordCtrl;return d&&d.valid&&d.value!==s.value?{passwordDiff:!0}:null;}]),this.signUpForm.form.addControl("password",this.passwordCtrl),this.signUpForm.form.addControl("passwordCfm",this.passwordCfmCtrl),y(this.fireAuth.signInWithEmailLink(n,this.router.url)).pipe(x(s=>{let d=this.notification;return d.openError(d.stripMessage(s.message)),this.emailVerified=!1,v(null);}),w(s=>(i.dismiss(),this.notification.openInfo("\u9A8C\u8BC1\u7ED3\u675F\u3002",{duration:5e3}),s)),Oe(s=>!!s));}else return v(null);})).subscribe(e=>{let n=this.user=e?.user;this.requesting=!1,!n&&this.accountCtrl.enable(),this.passwordCtrl.enable(),this.passwordCfmCtrl.enable();});}register(){let e=this.signUpForm;if(e.form.markAllAsTouched(),e&&e.valid){let n=this.fireAuth,i=this.notification,s=e.form.value,d=this.user;this.requesting=!0,e.control.disable(),this.emailVerified?y(d.updatePassword(s.password)).pipe(x(c=>{switch(c.code){case H.POPUP_CLOSED_BY_USER:break;default:i.openError(i.stripMessage(c.message));}return this.requesting=!1,e.control.enable(),v(!1);}),w(c=>typeof c=="boolean"?c:!0),$(c=>c?this.authService.storeUser({uid:d.uid,name:d.displayName,account:d.email}).pipe(w(()=>c)):v(c))).subscribe(c=>{c?(i.openSuccess(this.isResetPassword?"\u5BC6\u7801\u91CD\u7F6E\u6210\u529F\u3002":"\u6CE8\u518C\u6210\u529F\u3002"),this.router.navigateByUrl(this.authService.redirectUrl||"")):(i.openError(this.isResetPassword?"\u5BC6\u7801\u91CD\u7F6E\u5931\u8D25\u3002":"\u6CE8\u518C\u5931\u8D25\u3002"),this.requesting=!1,e.control.enable());}):y(n.fetchSignInMethodsForEmail(s.account)).pipe($(c=>{let N=c.length;return N===0||N===1&&c[0]===Je.EMAIL_LINK_SIGN_IN_METHOD?y(n.sendSignInLinkToEmail(s.account,{url:this.document.location.href,handleCodeInApp:!0})):(i.openError("\u6B64\u90AE\u7BB1\u5DF2\u7ECF\u88AB\u6CE8\u518C\u3002"),Ge(()=>new Error("There already exists an account registered with this email address.")));})).pipe(x(c=>(e.control.enable(),v(!1))),w(c=>typeof c=="boolean"?c:!0),B(()=>{this.requesting=!1;})).subscribe(c=>{c?(this.storage.set(ge,s.account),i.openSuccess("\u9A8C\u8BC1\u8FDE\u63A5\u5DF2\u7ECF\u53D1\u9001\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536\u3002")):i.openError("\u9A8C\u8BC1\u8FDE\u63A5\u53D1\u9001\u5931\u8D25\u3002");});}}static ɵfac=function(n){return new(n||t)(S(oe),S(ae),S(he),S(ee),S(be),S(ue),S(Se));};static ɵcmp=T({type:t,selectors:[["app-sign-up"]],viewQuery:function(n,i){if(n&1&&W(O,7),n&2){let s;Y(s=Z())&&(i.signUpForm=s.first);}},hostVars:1,hostBindings:function(n,i){n&2&&G("class",i.className);},standalone:!1,decls:24,vars:9,consts:()=>{let e;e="Email";let n;n="Send validation link.";let i;i="Already have an account?";let s;s="Sign in";let d;d="Password";let c;c="Confirmation password";let N;N="Confirm";let F;F="Sign up";let I;I="Verify";let Pe;Pe="Required.";let ye;ye="Incorrect email format.";let we;we="Different passwords.";let Te;return Te="It's a weak password, the password must contain at least 8 characters and no more than 16 characters, and include at least one upper or lower case letter, at least one number, at least one symbol or special character (_-+!.@#$%^&*) and no spaces.",[["templateInputMsg",""],i,s,N,F,I,Pe,ye,we,Te,[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline","subscriptSizing","dynamic"],["fontSet","Marching","matPrefix",""],["name","account","type","email","matInput","","placeholder",e,3,"readonly","formControl"],[4,"ngIf"],["class","container-field me-lg-5 mb-4",4,"ngIf"],[1,"container-field","mb-4",3,"ngSwitch"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden",3,"disabled",4,"ngSwitchCase"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden","matTooltip",n,3,"disabled",4,"ngSwitchDefault"],[1,"mt-1"],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center","pb-4"],[1,"text-white"],[3,"routerLink"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["name","password","type","password","matInput","","placeholder",d,3,"formControl"],["name","passwordCfm","type","password","matInput","","placeholder",c,3,"formControl"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate","class","position-absolute top-0 start-0 h-100 opacity-25",4,"ngIf"],[1,"position-relative"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],["type","submit","mat-flat-button","","color","primary","matTooltip",n,1,"overflow-hidden",3,"disabled"],["class","my-0",4,"ngIf"],[1,"my-0"]];},template:function(n,i){if(n&1){let s=z();a(0,"form",10),q("ngSubmit",function(){return D(s),V(i.register());}),a(1,"div",11)(2,"div",12)(3,"mat-form-field",13)(4,"mat-icon",14),P(5,"person"),r(),_(6,"input",15),p(7,nn,2,4,"mat-error",16),r()(),p(8,an,6,2,"div",17)(9,ln,6,2,"div",17),a(10,"div",18),p(11,pn,6,4,"button",19)(12,un,5,2,"button",20),_(13,"div",21),r()(),p(14,hn,4,4,"ng-template",null,0,K),r(),a(16,"div",22)(17,"span",23),f(18),g(19,1),u(),r(),P(20," \xA0 "),a(21,"a",24),f(22),g(23,2),u(),r()();}n&2&&(o(6),m("readonly",i.emailVerified)("formControl",i.accountCtrl),o(),m("ngIf",i.accountCtrl.invalid),o(),m("ngIf",i.emailVerified),o(),m("ngIf",i.emailVerified),o(),m("ngSwitch",i.emailVerified),o(),m("ngSwitchCase",!0),o(10),m("routerLink",j(8,en)));},dependencies:[qe,J,je,He,Qe,re,te,ne,ie,O,tt,se,de,ce,me,le,_e,pe,Ce,fe],encapsulation:2});}return t;})();var Nn=[{path:"",component:Mt,children:[{path:"in",component:yt},{path:"up",component:Me},{path:"reset-password",component:Me,data:{resetPassword:!0}}]},{path:"",redirectTo:"/in",pathMatch:"full"},{path:"**",redirectTo:"/in"}],wt=(()=>{class t{static ɵfac=function(n){return new(n||t)();};static ɵmod=X({type:t});static ɵinj=U({imports:[ve.forChild(Nn),ve]});}return t;})();var hi=(()=>{class t{static ɵfac=function(n){return new(n||t)();};static ɵmod=X({type:t});static ɵinj=U({providers:[Ze(Ke())],imports:[Ye,rt,ot,wt,dt,pt,_t,ft,It,ut,Ct]});}return t;})();export{hi as LoginModule};/**i18n:4e954d11e025817f1aceae10dbbd8d111274144b3c3dbbdb81deac1f9b9c7958*/