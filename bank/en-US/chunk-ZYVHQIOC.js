import{T as z,U as f,V as K,Y as C,Z as G,aa as V,da as H,fa as A,u as y,v as B,x as L,y as x}from"./chunk-UC2JMEVD.js";import{i as c}from"./chunk-LO4PBWZP.js";var I="@firebase/remote-config",W="0.6.4";var O=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var J="remote-config",q=100;var Q={"already-initialized":"Remote Config already initialized","registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."},u=new x("remoteconfig","Remote Config",Q);function Z(i,t){return i instanceof L&&i.code.indexOf(t)!==-1}var tt=!1,et="",X=0,st=["1","true","t","yes","y","on"],E=class{constructor(t,e=et){this._source=t,this._value=e}asString(){return this._value}asBoolean(){return this._source==="static"?tt:st.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return X;let t=Number(this._value);return isNaN(t)&&(t=X),t}getSource(){return this._source}};function it(i){return c(this,null,function*(){let t=f(i),[e,s]=yield Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!e||!e.config||!e.eTag||e.eTag===s?!1:(yield Promise.all([t._storageCache.setActiveConfig(e.config),t._storage.setActiveConfigEtag(e.eTag)]),!0)})}function at(i){let t=f(i);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}function rt(i){return c(this,null,function*(){let t=f(i),e=new O;setTimeout(()=>c(null,null,function*(){e.abort()}),t.settings.fetchTimeoutMillis);let s=t._storageCache.getCustomSignals();s&&t._logger.debug(`Fetching config with custom signals: ${JSON.stringify(s)}`);try{yield t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:e,customSignals:s}),yield t._storageCache.setLastFetchStatus("success")}catch(a){let r=Z(a,"fetch-throttle")?"throttle":"failure";throw yield t._storageCache.setLastFetchStatus(r),a}})}function bt(i){let t=f(i);return nt(t._storageCache.getActiveConfig(),t.defaultConfig).reduce((e,s)=>(e[s]=F(i,s),e),{})}function Ft(i,t){return F(f(i),t).asBoolean()}function Mt(i,t){return F(f(i),t).asNumber()}function yt(i,t){return F(f(i),t).asString()}function F(i,t){let e=f(i);e._isInitializationComplete||e._logger.debug(`A value was requested for key "${t}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);let s=e._storageCache.getActiveConfig();return s&&s[t]!==void 0?new E("remote",s[t]):e.defaultConfig&&e.defaultConfig[t]!==void 0?new E("default",String(e.defaultConfig[t])):(e._logger.debug(`Returning static value for key "${t}". Define a default or remote value if this is unintentional.`),new E("static"))}function Lt(i,t){let e=f(i);switch(t){case"debug":e._logger.logLevel=C.DEBUG;break;case"silent":e._logger.logLevel=C.SILENT;break;default:e._logger.logLevel=C.ERROR}}function nt(i={},t={}){return Object.keys(Object.assign(Object.assign({},i),t))}var P=class{constructor(t,e,s,a){this.client=t,this.storage=e,this.storageCache=s,this.logger=a}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let s=Date.now()-e,a=s<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${s}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${a}.`),a}fetch(t){return c(this,null,function*(){let[e,s]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(s&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e))return s;t.eTag=s&&s.eTag;let a=yield this.client.fetch(t),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return a.status===200&&r.push(this.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(r),a})}};function ot(i=navigator){return i.languages&&i.languages[0]||i.language}var R=class{constructor(t,e,s,a,r,l){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=s,this.projectId=a,this.apiKey=r,this.appId=l}fetch(t){return c(this,null,function*(){let[e,s]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,l={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},o={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:s,app_id:this.appId,language_code:ot(),custom_signals:t.customSignals},n={method:"POST",headers:l,body:JSON.stringify(o)},g=fetch(r,n),T=new Promise((h,_)=>{t.signal.addEventListener(()=>{let j=new Error("The operation was aborted.");j.name="AbortError",_(j)})}),m;try{yield Promise.race([g,T]),m=yield g}catch(h){let _="fetch-client-network";throw h?.name==="AbortError"&&(_="fetch-timeout"),u.create(_,{originalErrorMessage:h?.message})}let d=m.status,M=m.headers.get("ETag")||void 0,w,p;if(m.status===200){let h;try{h=yield m.json()}catch(_){throw u.create("fetch-client-parse",{originalErrorMessage:_?.message})}w=h.entries,p=h.state}if(p==="INSTANCE_STATE_UNSPECIFIED"?d=500:p==="NO_CHANGE"?d=304:(p==="NO_TEMPLATE"||p==="EMPTY_CONFIG")&&(w={}),d!==304&&d!==200)throw u.create("fetch-status",{httpStatus:d});return{status:d,eTag:M,config:w}})}};function ct(i,t){return new Promise((e,s)=>{let a=Math.max(t-Date.now(),0),r=setTimeout(e,a);i.addEventListener(()=>{clearTimeout(r),s(u.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function lt(i){if(!(i instanceof L)||!i.customData)return!1;let t=Number(i.customData.httpStatus);return t===429||t===500||t===503||t===504}var D=class{constructor(t,e){this.client=t,this.storage=e}fetch(t){return c(this,null,function*(){let e=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,e)})}attemptFetch(a,r){return c(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:s}){yield ct(t.signal,e);try{let l=yield this.client.fetch(t);return yield this.storage.deleteThrottleMetadata(),l}catch(l){if(!lt(l))throw l;let o={throttleEndTimeMillis:Date.now()+z(s),backoffCount:s+1};return yield this.storage.setThrottleMetadata(o),this.attemptFetch(t,o)}})}};var gt=60*1e3,ut=12*60*60*1e3,N=class{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(t,e,s,a,r){this.app=t,this._client=e,this._storageCache=s,this._storage=a,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:gt,minimumFetchIntervalMillis:ut},this.defaultConfig={}}};function v(i,t){let e=i.target.error||void 0;return u.create(t,{originalErrorMessage:e&&e?.message})}var S="app_namespace_store",ht="firebase_remote_config",ft=1;function mt(){return new Promise((i,t)=>{try{let e=indexedDB.open(ht,ft);e.onerror=s=>{t(v(s,"storage-open"))},e.onsuccess=s=>{i(s.target.result)},e.onupgradeneeded=s=>{let a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(S,{keyPath:"compositeKey"})}}}catch(e){t(u.create("storage-open",{originalErrorMessage:e?.message}))}})}var b=class{getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}},k=class extends b{constructor(t,e,s,a=mt()){super(),this.appId=t,this.appName=e,this.namespace=s,this.openDbPromise=a}setCustomSignals(t){return c(this,null,function*(){let s=(yield this.openDbPromise).transaction([S],"readwrite"),a=yield this.getWithTransaction("custom_signals",s),r=Y(t,a||{});return yield this.setWithTransaction("custom_signals",r,s),r})}getWithTransaction(t,e){return c(this,null,function*(){return new Promise((s,a)=>{let r=e.objectStore(S),l=this.createCompositeKey(t);try{let o=r.get(l);o.onerror=n=>{a(v(n,"storage-get"))},o.onsuccess=n=>{let g=n.target.result;s(g?g.value:void 0)}}catch(o){a(u.create("storage-get",{originalErrorMessage:o?.message}))}})})}setWithTransaction(t,e,s){return c(this,null,function*(){return new Promise((a,r)=>{let l=s.objectStore(S),o=this.createCompositeKey(t);try{let n=l.put({compositeKey:o,value:e});n.onerror=g=>{r(v(g,"storage-set"))},n.onsuccess=()=>{a()}}catch(n){r(u.create("storage-set",{originalErrorMessage:n?.message}))}})})}get(t){return c(this,null,function*(){let s=(yield this.openDbPromise).transaction([S],"readonly");return this.getWithTransaction(t,s)})}set(t,e){return c(this,null,function*(){let a=(yield this.openDbPromise).transaction([S],"readwrite");return this.setWithTransaction(t,e,a)})}delete(t){return c(this,null,function*(){let e=yield this.openDbPromise;return new Promise((s,a)=>{let l=e.transaction([S],"readwrite").objectStore(S),o=this.createCompositeKey(t);try{let n=l.delete(o);n.onerror=g=>{a(v(g,"storage-delete"))},n.onsuccess=()=>{s()}}catch(n){a(u.create("storage-delete",{originalErrorMessage:n?.message}))}})})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}},U=class extends b{constructor(){super(...arguments),this.storage={}}get(t){return c(this,null,function*(){return Promise.resolve(this.storage[t])})}set(t,e){return c(this,null,function*(){return this.storage[t]=e,Promise.resolve(void 0)})}delete(t){return c(this,null,function*(){return this.storage[t]=void 0,Promise.resolve()})}setCustomSignals(t){return c(this,null,function*(){let e=this.storage.custom_signals||{};return this.storage.custom_signals=Y(t,e),Promise.resolve(this.storage.custom_signals)})}};function Y(i,t){let e=Object.assign(Object.assign({},t),i),s=Object.fromEntries(Object.entries(e).filter(([a,r])=>r!==null).map(([a,r])=>typeof r=="number"?[a,r.toString()]:[a,r]));if(Object.keys(s).length>q)throw u.create("custom-signal-max-allowed-signals",{maxSignals:q});return s}var $=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}loadFromStorage(){return c(this,null,function*(){let t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),s=this.storage.getActiveConfig(),a=this.storage.getCustomSignals(),r=yield t;r&&(this.lastFetchStatus=r);let l=yield e;l&&(this.lastSuccessfulFetchTimestampMillis=l);let o=yield s;o&&(this.activeConfig=o);let n=yield a;n&&(this.customSignals=n)})}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}setCustomSignals(t){return c(this,null,function*(){this.customSignals=yield this.storage.setCustomSignals(t)})}};function dt(){V(new K(J,i,"PUBLIC").setMultipleInstances(!0)),A(I,W),A(I,W,"esm2017");function i(t,{options:e}){let s=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate(),{projectId:r,apiKey:l,appId:o}=s.options;if(!r)throw u.create("registration-project-id");if(!l)throw u.create("registration-api-key");if(!o)throw u.create("registration-app-id");let n=e?.templateId||"firebase",g=y()?new k(o,s.name,n):new U,T=new $(g),m=new G(I);m.logLevel=C.ERROR;let d=new R(a,H,n,r,l,o),M=new D(d,g),w=new P(M,g,T,m),p=new N(s,w,T,g,m);return at(p),p}}function At(i){return c(this,null,function*(){return i=f(i),yield rt(i),it(i)})}function It(){return c(this,null,function*(){if(!y())return!1;try{return yield B()}catch{return!1}})}dt();export{it as a,at as b,rt as c,bt as d,Ft as e,Mt as f,yt as g,F as h,Lt as i,At as j,It as k};
/**i18n:4e954d11e025817f1aceae10dbbd8d111274144b3c3dbbdb81deac1f9b9c7958*/
