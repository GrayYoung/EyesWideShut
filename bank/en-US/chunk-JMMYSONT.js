import{a as qt,b as oe}from"./chunk-CKYNS76Y.js";import{a as Xt,b as zt}from"./chunk-EH2S62FI.js";import{d as ie}from"./chunk-TIZMGHBW.js";import{a as $t,b as Dt,c as Vt}from"./chunk-J4DDK45S.js";import{b as kt,c as Gt}from"./chunk-ZOAAWDC3.js";import{$a as S,B as J,Bb as Ut,D as ot,E as rt,Ga as bt,Ia as St,Ja as Ot,K as at,Ka as Rt,L as lt,La as It,O as ut,Pa as wt,Qa as ee,T as ft,U as gt,X as Ct,_a as vt,aa as Mt,ab as te,da as Et,ga as Pt,la as ht,m as et,mb as ne,nb as Nt,ob as Tt,pb as At,u as tt,ub as yt,vb as Lt,wb as xt,xb as Ft,y as nt,z as it}from"./chunk-XSNTQQS2.js";import{t as pt}from"./chunk-JTK26AH3.js";import{u as st,v as _t,w as ct,x as dt,y as mt,z as me}from"./chunk-7Q4VM6XY.js";import"./chunk-TLCZNPZJ.js";import"./chunk-M5HA4C4U.js";import"./chunk-JX56BWRR.js";import"./chunk-7KVNE4XP.js";import{$b as r,B as Le,Bb as N,Bc as ce,Cb as Z,Da as Fe,Dc as de,Ec as w,Ed as We,Fc as T,Fd as je,Gd as He,H as j,Hb as R,Hd as Qe,Id as Ye,J as G,Jc as A,Jd as Ze,Kc as y,Kd as Ke,Lc as L,M as _e,Nc as ke,O as H,Oc as Ge,Pc as x,Qa as Ue,Qc as Xe,Rd as Je,S as X,Sc as ze,Tb as K,Tc as qe,Ub as $,Vb as D,Vc as Be,Wb as $e,Xb as De,Yb as Ve,Zb as _,_b as a,a as U,ac as I,ca as v,ec as E,fc as P,g as ae,ga as xe,h as ye,hc as b,kb as l,kc as g,nc as M,p as F,pa as Q,pc as f,q as k,r as le,tc as z,u as se,ub as Y,uc as q,vb as C,vc as B,ya as d,za as m,zc as h}from"./chunk-OCTFRZCZ.js";import"./chunk-6B763VMG.js";import{a as Ae}from"./chunk-LO4PBWZP.js";var en=()=>[],tn=n=>({primary:n,secondary:null}),nn=n=>({outlets:n}),on=(n,c)=>["/admin",n,c];function rn(n,c){if(n&1&&I(0,"i",9),n&2){let e=f(2).$implicit;de(e.icon);}}function an(n,c){if(n&1&&(a(0,"span",8),w(1),r()),n&2){let e=f(2).$implicit;l(),T(e.description);}}function ln(n,c){if(n&1){let e=b();a(0,"a",5),M("click",function(){d(e);let t=f(2);return m(t.onMouseLeave());}),$(1,rn,1,2,"i",6),a(2,"span",7)(3,"span"),w(4),r(),$(5,an,2,1,"span",8),r()();}if(n&2){let e=f().$implicit,i=f();_("routerLink",Xe(10,on,e.url.split("/")[0],x(8,nn,x(6,tn,e.url?e.url.split("/").slice(1):Ge(5,en)))))("relativeTo",i.route.firstChild),l(),D(e.icon?1:-1),l(3),T(e.title),l(),D(e.description?5:-1);}}function sn(n,c){if(n&1&&I(0,"i",9),n&2){let e=f(2).$implicit;de(e.icon);}}function _n(n,c){if(n&1&&(a(0,"span",8),w(1),r()),n&2){let e=f(2).$implicit;l(),T(e.description);}}function cn(n,c){if(n&1&&(a(0,"a",4),$(1,sn,1,2,"i",6),a(2,"span",7)(3,"span"),w(4),r(),$(5,_n,2,1,"span",8),r(),I(6,"span",10),r()),n&2){let e=f().$implicit;l(),D(e.icon?1:-1),l(3),T(e.title),l(),D(e.description?5:-1);}}function dn(n,c){if(n&1){let e=b();a(0,"li",2),M("mouseenter",function(t){let o=d(e).$implicit,p=f();return m(p.onMouseEnterItem(t,o));})("mouseleave",function(t){let o=d(e).$implicit,p=f();return m(p.onMouseLeaveItem(t,o));}),$(1,ln,6,13,"a",3)(2,cn,7,3,"a",4),r();}if(n&2){let e,i=c.$implicit;l(),D((e=!!i.children&&i.children.length>0)?2:1);}}var Bt=(()=>{class n{route;elementRef;renderer;viewportRuler;overlay;items;mouseEntered=!1;overlayRef;parentMenu;childMenu;scrollbar;liElement;openCommand$=new ae();closeCommand$=new ae();subscription=new U();constructor(e,i,t,o,p){this.route=e,this.elementRef=i,this.renderer=t,this.viewportRuler=o,this.overlay=p;}ngOnInit(){let e=this.overlay.position().flexibleConnectedTo(this.elementRef);e.withPositions([{offsetX:-1,offsetY:0,originX:"end",originY:"top",overlayX:"start",overlayY:"top"}]),this.overlayRef=this.overlay.create({backdropClass:"cdk-overlay-invisible-backdrop",disposeOnNavigation:!0,hasBackdrop:!1,positionStrategy:e,scrollStrategy:this.overlay.scrollStrategies.noop(),width:330}),this.scrollbar=this.renderer.createElement("div"),this.renderer.addClass(this.scrollbar,"scrollbar");}ngAfterViewInit(){setTimeout(()=>{this.detectScrollbar();},100),this.subscription.add(this.viewportRuler.change(100).subscribe(()=>{this.detectScrollbar();})),this.subscription.add(this.openCommand$.pipe(_e(11)).subscribe(e=>{this.openMenu(e);})),this.subscription.add(this.closeCommand$.pipe(_e(10)).subscribe(()=>{this.isAbleToCloseMenu()&&(this.closeMenu(),this.clearMenu(this.parentMenu));}));}ngOnDestroy(){this.closeCommand$.complete(),this.subscription.unsubscribe();}onMouseEnter(){this.mouseEntered=!0;}onMouseLeave(){this.mouseEntered=!1,this.closeCommand$.next(null);}onMouseEnterItem(e,i){this.toggleActiveClass(!1),this.liElement=this.getParentLi(e.target),this.openCommand$.next(i);}onMouseLeaveItem(e,i){this.liElement=this.getParentLi(e.target),this.closeCommand$.next(i);}onScroll(e){let i=e.scrollTop/e.scrollHeight*e.clientHeight;this.renderer.setStyle(this.scrollbar,"top",i+"px");}openMenu(e){let i=e.children;if(this.closeMenu(),i&&i.length){this.overlayRef.updateSize({height:this.elementRef.nativeElement.offsetHeight});let t=new ut(n),o=this.overlayRef.attach(t);o.instance.items=i,o.instance.parentMenu=this,this.childMenu=o.instance,this.toggleActiveClass(!0);}}closeMenu(){this.overlayRef.detach(),this.childMenu=void 0,this.toggleActiveClass(!1);}clearMenu(e){e&&e.isAbleToCloseMenu()&&(e.overlayRef.detach(),e.childMenu=void 0,e.toggleActiveClass(!1),e.parentMenu&&e.clearMenu(e.parentMenu));}isAbleToCloseMenu(){return this.childMenu?!this.childMenu.mouseEntered&&this.childMenu.isAbleToCloseMenu():!0;}detectScrollbar(){let e=this.elementRef.nativeElement.children[0],i=e.scrollHeight,t=e.offsetHeight;i>t?(this.renderer.addClass(e,"with-scrollbar"),this.renderer.appendChild(this.elementRef.nativeElement,this.scrollbar),this.renderer.setStyle(this.scrollbar,"height",t*(t/i)+"px")):(this.renderer.removeClass(e,"with-scrollbar"),this.renderer.removeChild(this.elementRef.nativeElement,this.scrollbar));}getParentLi(e){if(e){let i=(e.tagName||"").toLowerCase();return i==="li"?e:i==="ul"||i==="body"?null:this.getParentLi(e.parentElement);}}toggleActiveClass(e){this.liElement&&(e?this.renderer.addClass(this.liElement,"open"):this.renderer.removeClass(this.liElement,"open"));}static ɵfac=function(i){return new(i||n)(C(st),C(Ue),C(Y),C(pt),C(ft));};static ɵcmp=N({type:n,selectors:[["app-navigation-menu"]],hostBindings:function(i,t){i&1&&M("mouseenter",function(){return t.onMouseEnter();})("mouseleave",function(){return t.onMouseLeave();});},inputs:{items:"items"},standalone:!1,decls:4,vars:0,consts:[["container",""],[3,"scroll"],[3,"mouseenter","mouseleave"],["routerLinkActive","active",1,"d-flex","flex-row","text-underline",3,"routerLink","relativeTo"],["href","javascript:void(0)",1,"d-flex","flex-row"],["routerLinkActive","active",1,"d-flex","flex-row","text-underline",3,"click","routerLink","relativeTo"],["aria-hidden","true",3,"class"],[1,"d-flex","flex-column","content"],[1,"content-description"],["aria-hidden","true"],[1,"arrow"]],template:function(i,t){if(i&1){let o=b();a(0,"ul",1,0),M("scroll",function(){d(o);let s=h(1);return m(t.onScroll(s));}),De(2,dn,3,1,"li",null,$e),r();}i&2&&(l(2),Ve(t.items));},dependencies:[dt,mt],styles:["[_nghost-%COMP%]{display:flex;width:330px;height:100%;overflow:hidden;box-shadow:-5px 0 10px #00000040}.arrow[_ngcontent-%COMP%]{display:block;position:absolute;right:2.25rem;top:50%;width:15px;height:15px;border:solid 1px #ffffff;border-width:1px 1px 0 0;margin-top:-7px;transform:rotate(45deg)}.scrollbar[_ngcontent-%COMP%]{position:absolute;top:0;right:.25rem;width:7px;border-radius:7px;border:solid 1px rgb(57.9948048,82.0636361101,93.9831952);background-color:#435f6c;pointer-events:none}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 -20px 0 0;width:350px;height:100%;overflow-y:auto;border-color:#62808e;background-color:#587380}li[_ngcontent-%COMP%]{position:relative;margin-right:20px;border-top:solid 1px rgb(111.9912332,145.8294504647,158.0007668);border-bottom:solid 1px rgb(94.0042696,122.0932706882,136.0037304);margin-bottom:1px;box-shadow:0 1px 0 1px #3b5059}li[_ngcontent-%COMP%]:nth-child(2n){background-color:#5d7987}li[_ngcontent-%COMP%]:last-child{box-shadow:0 1px 0 1px #4f6c78}li[_ngcontent-%COMP%]:hover, li[_ngcontent-%COMP%]:focus, li.open[_ngcontent-%COMP%]{background-color:#0598d2!important;border-bottom-color:#09b3d9!important;box-shadow:0 0 15px #068cc1 inset!important;transition:background-color cubic-bezier(.075,.82,.165,1) .5s}li[_ngcontent-%COMP%]:hover   .content-description[_ngcontent-%COMP%], li[_ngcontent-%COMP%]:focus   .content-description[_ngcontent-%COMP%], li.open[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%]{color:#78cbeb!important}li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:block;padding:1rem 1.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:.75rem;color:#fff}li[_ngcontent-%COMP%] > a.text-underline[_ngcontent-%COMP%]{text-decoration:underline}li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus{background-color:#0699d2!important}ul.with-scrollbar[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-right:0}.top-level[_nghost-%COMP%], .top-level   [_nghost-%COMP%]{border-right:solid 1px #DEE1F9;box-shadow:0 0 10px 1px #606a83}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%], .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{height:110px;overflow:hidden}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:nth-child(2n), .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:nth-child(2n){background-color:transparent}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{flex:1 1 auto;height:100%;text-shadow:1px 1px 1px #444444;text-decoration:none;font-size:.875rem}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after, .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{content:none}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus{background-color:transparent!important}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > .icon[_ngcontent-%COMP%], .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > .icon[_ngcontent-%COMP%]{flex:0 0 auto}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%], .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{padding-left:15px}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%], .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > .arrow[_ngcontent-%COMP%]{display:none}.top-level[_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%], .top-level   [_nghost-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .content-description[_ngcontent-%COMP%]{display:block;flex:1 1 auto;padding-top:.5rem;margin-bottom:0;overflow:hidden;text-overflow:ellipsis;white-space:normal;word-break:break-word;color:#9ab3c0;font-size:.75rem;-webkit-display:box;-webkit-line-clamp:2;-webkit-box-orient:vertical}"]});}return n;})();var fn=["leftSide"],gn=["rightSide"],Wt=(()=>{class n{router;renderer;document;authService;communication;notification;storage;className="d-flex flex-column flex-nowrap align-items-center justify-content-center w-100 h-100";menuItems=[];leftSidenav;rightSidenav;secondaryOutletState=new ye(!1);subscription=new U();constructor(e,i,t,o,p,s,O){this.router=e,this.renderer=i,this.document=t,this.authService=o,this.communication=p,this.notification=s,this.storage=O;}ngOnInit(){this.renderer.addClass(this.document.body,"with-nav-menu"),this.menuItems=this.authService.getMenu().map(e=>Ae({},e)),this.subscription.add(Le(window,"unload").subscribe(()=>{this.storage.set("redirectUrl",this.router.routerState.snapshot.url);}));}ngAfterViewInit(){setTimeout(()=>{this.subscription.add(this.secondaryOutletState.subscribe(e=>{e?this.rightSidenav.open():this.rightSidenav.close();})),this.subscription.add(this.communication.acceptFullScreenCommand().subscribe(e=>{e?this.leftSidenav.close():this.leftSidenav.open();}));});}ngOnDestroy(){this.renderer.removeClass(this.document.body,"with-nav-menu"),this.subscription.unsubscribe();}onSecondaryOutletActivate(e){this.secondaryOutletState.next(!0);}onSecondaryOutletDeactivate(e){this.secondaryOutletState.next(!1);}static ɵfac=function(i){return new(i||n)(C(ct),C(Y),C(Fe),C(ne),C(wt),C(ee),C(vt));};static ɵcmp=N({type:n,selectors:[["app-admin"]],viewQuery:function(i,t){if(i&1&&(z(fn,5),z(gn,5)),i&2){let o;q(o=B())&&(t.leftSidenav=o.first),q(o=B())&&(t.rightSidenav=o.first);}},hostVars:1,hostBindings:function(i,t){i&2&&K("class",t.className);},standalone:!1,decls:11,vars:1,consts:[["leftSide",""],["rightSide",""],["hasBackdrop","false",1,"w-100","h-100"],["mode","side","opened",""],[1,"top-level",3,"items"],["mode","over","position","end","autoFocus","false"],["name","secondary",3,"activate","deactivate"],[1,"d-flex","w-100","h-100","overflow-hidden","container-content"]],template:function(i,t){if(i&1){let o=b();I(0,"app-management-header"),a(1,"mat-sidenav-container",2)(2,"mat-sidenav",3,0),I(4,"app-navigation-menu",4),r(),a(5,"mat-sidenav",5,1)(7,"router-outlet",6),M("activate",function(s){return d(o),m(t.onSecondaryOutletActivate(s));})("deactivate",function(s){return d(o),m(t.onSecondaryOutletDeactivate(s));}),r()(),a(8,"div",7),I(9,"router-outlet"),r()(),I(10,"app-management-footer");}i&2&&(l(4),_("items",t.menuItems));},dependencies:[_t,St,Ot,Tt,Nt,Bt],styles:["[_nghost-%COMP%]{flex:0 0 100%}.mat-drawer[_ngcontent-%COMP%]{max-width:100%}"]});}return n;})();var jt=(()=>{class n{constructor(){}ngOnInit(){}static ɵfac=function(i){return new(i||n)();};static ɵcmp=N({type:n,selectors:[["app-start"]],hostAttrs:[1,"logo-large"],standalone:!1,decls:0,vars:0,template:function(i,t){},styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"]});}return n;})();var Ht=(()=>{class n{constructor(){}ngOnInit(){}static ɵfac=function(i){return new(i||n)();};static ɵcmp=N({type:n,selectors:[["app-four-zero-four"]],hostAttrs:[1,"d-flex","align-items-center","justify-content-center","w-100","h-100"],standalone:!1,decls:2,vars:0,template:function(i,t){i&1&&(a(0,"p"),w(1,"404"),r());},encapsulation:2});}return n;})();var W=n=>({ctrl:n});function Cn(n,c){if(n&1){let e=b();a(0,"button",56),M("click",function(){d(e);let t=f();return m(t.userInfoEditable=!0);}),E(1),g(2,18),P(),r();}}function Mn(n,c){if(n&1){let e=b();a(0,"button",56),M("click",function(){d(e);let t=f(),o=h(4);return t.userInfoEditable=!1,m(t.revertInfo(o));}),E(1),g(2,19),P(),r();}}function En(n,c){}function Pn(n,c){}function hn(n,c){}function bn(n,c){}function Sn(n,c){}function On(n,c){if(n&1){let e=b();a(0,"button",56),M("click",function(){d(e);let t=f(2);return m(t.patientInfoEditable=!0);}),E(1),g(2,23),P(),r();}}function Rn(n,c){if(n&1){let e=b();a(0,"button",56),M("click",function(){d(e),f();let t=h(3),o=f();return o.patientInfoEditable=!1,m(o.revertInfo(t));}),E(1),g(2,24),P(),r();}}function In(n,c){if(n&1){let e=b();a(0,"mat-tab-group",57)(1,"mat-tab",58)(2,"form",59,6),M("ngSubmit",function(){d(e);let t=h(3),o=f();return m(o.editPatientInfo(t));}),a(4,"div",33)(5,"div",34)(6,"label",35),E(7),g(8,20),P(),r(),a(9,"div",36)(10,"mat-form-field",37)(11,"input",60,7),L("ngModelChange",function(t){d(e);let o=f();return y(o.user.cardNo,t)||(o.user.cardNo=t),m(t);}),r()(),R(13,bn,0,0,"ng-template",47),r()(),a(14,"div",34)(15,"label",35),E(16),g(17,21),P(),r(),a(18,"div",36)(19,"mat-form-field",37)(20,"input",61,8),L("ngModelChange",function(t){d(e);let o=f();return y(o.user.wxid,t)||(o.user.wxid=t),m(t);}),r()(),R(22,Sn,0,0,"ng-template",47),r()()(),a(23,"div",41)(24,"button",42),E(25),g(26,22),P(),r(),R(27,On,3,0,"button",43)(28,Rn,3,0,"button",44),r()()()();}if(n&2){let e=h(12),i=h(21),t=f(),o=h(77);l(2),ce("form-disabled",!t.patientInfoEditable),l(9),_("disabled",!t.patientInfoEditable),A("ngModel",t.user.cardNo),l(2),_("ngTemplateOutlet",o)("ngTemplateOutletContext",x(13,W,e)),l(7),_("disabled",!t.patientInfoEditable),A("ngModel",t.user.wxid),l(2),_("ngTemplateOutlet",o)("ngTemplateOutletContext",x(15,W,i)),l(),_("ngSwitch",t.patientInfoEditable),l(),_("disabled",!t.patientInfoEditable),l(3),_("ngSwitchCase",!1);}}function wn(n,c){n&1&&I(0,"mat-progress-spinner",65);}function vn(n,c){if(n&1){let e=b();E(0),a(1,"div",33)(2,"div",34)(3,"label",35),I(4,"mat-icon",62),w(5),r(),a(6,"div",36)(7,"mat-slide-toggle",63),M("toggleChange",function(){let t=d(e).$implicit,o=f();return m(o.toggleAnotherAccount(t));}),L("ngModelChange",function(t){let o=d(e).$implicit;return y(o.state,t)||(o.state=t),m(t);}),r(),R(8,wn,1,0,"mat-progress-spinner",64),r()()(),P();}if(n&2){let e=c.$implicit;l(4),_("svgIcon",e.iconName),l(),T(e.label),l(2),_("name",e.formName),A("ngModel",e.state),l(),_("ngIf",e.requesting);}}function Nn(n,c){n&1&&(a(0,"mat-error"),E(1),g(2,25),P(),r());}function Tn(n,c){n&1&&(a(0,"mat-error"),E(1),g(2,26),P(),r());}function An(n,c){n&1&&(a(0,"mat-error"),E(1),g(2,27),P(),r());}function yn(n,c){n&1&&(a(0,"mat-error"),E(1),g(2,28),P(),r());}function Ln(n,c){if(n&1&&R(0,Nn,3,0,"mat-error",66)(1,Tn,3,0,"mat-error",66)(2,An,3,0,"mat-error",66)(3,yn,3,0,"mat-error",66),n&2){let e=c.ctrl;_("ngIf",e.hasError("required")),l(),_("ngIf",e.hasError("email")),l(),_("ngIf",e.hasError("passwordDiff")),l(),_("ngIf",e.hasError("minlength")||e.hasError("maxlength"));}}var Qt=(()=>{class n{authService;fireAuth;notification;hospitalDb;hostClassName="d-flex flex-column flex-nowrap w-100 h-100";hostId="containerProfile";breads=[{title:"\u8D26\u53F7\u8BBE\u7F6E"}];user={};isPatient=!1;passwordGroup={origPassword:null,newPassword:null,cfmPassword:null};signInOptions;requesting=!1;userInfoEditable=!1;patientInfoEditable=!1;passwordEditable=!0;forms;subscription=new U();constructor(e,i,t,o){this.authService=e,this.fireAuth=i,this.notification=t,this.hospitalDb=o,this.signInOptions=e.getDefaultAuthMethods().pipe(v(p=>F(this.fireAuth.fetchSignInMethodsForEmail(e.user.account)).pipe(se(s=>p.map(O=>(O.state=s.includes(O.provider.providerId),O.requesting=!1,O))))));}ngOnInit(){let e=this.authService;this.subscription.add(e.getProfile().pipe(v(i=>{let t=e.getAuthConfig()?.id===S.PATIENT;return t=t&&i.roles?.some(o=>o===S.PATIENT||o===S.ADMIN),this.isPatient=t,this.user=i,k(i);})).subscribe());}ngOnDestroy(){this.subscription.unsubscribe(),this.notification.dismiss(),this.notification.hideLoading();}editInfo(e){if(e.valid){let i=this.notification,t=e.form.value;this.userInfoEditable=!1,this.requesting=!0,i.showLoading(),this.fireAuth.user.pipe(H(1),v(o=>F(o.updateProfile({displayName:t.name})).pipe(v(()=>F(this.authService.storeUser({name:t.name}))))),G(o=>(i.openError("\u4FEE\u6539\u5931\u8D25\u3002"),this.userInfoEditable=!0,le(()=>o))),X(()=>{this.requesting=!1,i.hideLoading();})).subscribe(()=>{i.openSuccess("\u4FEE\u6539\u6210\u529F\u3002");});}}editPatientInfo(e){if(e.valid){let i=this.notification,t=e.form.value;if(t.cardNo=t.cardNo?.trim()||"",t.wxid=t.wxid?.trim()||"",!t.cardNo||!t.wxid){i.openError("\u4FE1\u606F\u6709\u8BEF\u3002");return;}this.patientInfoEditable=!1,this.requesting=!0,i.showLoading(),this.hospitalDb.getUserInfo(t.wxid).pipe(se(o=>t.wxid==o?.wxid&&t.cardNo==o?.patientId),j(o=>(o||(i.openError("\u4FE1\u606F\u4E0D\u5339\u914D\uFF0C\u8BF7\u4FEE\u6539\u540E\u91CD\u8BD5\u3002"),this.patientInfoEditable=!0),o)),v(()=>F(this.authService.storeUser({cardNo:t.cardNo,wxid:t.wxid})).pipe(G(o=>(i.openError("\u4FEE\u6539\u5931\u8D25\u3002"),le(()=>o))))),X(()=>{this.requesting=!1,i.hideLoading();})).subscribe(()=>{i.openSuccess("\u4FEE\u6539\u6210\u529F\u3002");});}}revertInfo(e){e.form.markAsPending(),e.form.markAsUntouched(),e.resetForm(),this.authService.storeUser({_update_time:Date.now()});}modifyPassword(e){if(e.valid){let i=this.notification,t=e.form.value;this.passwordEditable=!1,this.requesting=!0,i.showLoading(),F(this.fireAuth.signInWithEmailAndPassword(this.user.account,t.origPassword)).pipe(G(o=>{switch(o.code){case te.INVALID_PASSWORD:i.openError("\u5BC6\u7801\u9519\u8BEF!");break;default:i.openError(i.stripMessage(o.message));}return this.passwordEditable=!0,k(!1);}),j(o=>o!==!1),v(()=>this.fireAuth.user.pipe(H(1))),v(o=>F(o.updatePassword(t.newPassword))),X(()=>{this.requesting=!1,i.hideLoading();})).subscribe(()=>{i.openSuccess("\u5BC6\u7801\u4FEE\u6539\u6210\u529F\u3002"),e.resetForm();});}}revertPasswordForm(e){e.form.markAsPending(),e.form.markAsUntouched(),e.resetForm();}toggleAnotherAccount(e){let i=this.notification,t=e.state;k(null).pipe(xe(()=>{e.requesting=!0,this.forms.last.control.disable(),i.openInfo("\u6B63\u5728\u8FDE\u63A5...",{duration:3e3});}),v(()=>this.fireAuth.user.pipe(H(1))),v(o=>F(t?zt(o,e.provider.providerId):Xt(o,e.provider))),G(o=>{switch(o.code){case te.POPUP_CLOSED_BY_USER:i.openError("\u8D26\u53F7\u8FDE\u63A5\u5F02\u5E38\u4E2D\u65AD\u3002");break;case te.CREDENTIAL_ALREADY_IN_USE:i.openError("\u8BE5\u7B2C\u4E09\u65B9\u8D26\u53F7\u5DF2\u7ECF\u4E0E\u5176\u5B83\u8D26\u53F7\u5173\u8054\u3002");break;default:i.openError(i.stripMessage(o.message));}return e.state=t,k(!1);}),j(o=>o!==!1),X(()=>{e.requesting=!1,this.forms.last.control.enable();})).subscribe(()=>{i.openSuccess(t?"\u5DF2\u89E3\u9664\u5173\u8054\u3002":"\u5DF2\u5173\u8054\u6210\u529F\u3002");});}static ɵfac=function(i){return new(i||n)(C(ne),C(et),C(ee),C(oe));};static ɵcmp=N({type:n,selectors:[["app-user-profile"]],viewQuery:function(i,t){if(i&1&&z(J,5),i&2){let o;q(o=B())&&(t.forms=o);}},hostVars:2,hostBindings:function(i,t){i&2&&K("class",t.hostClassName)("id",t.hostId);},standalone:!1,features:[ke([qt,oe])],decls:78,vars:34,consts:()=>{let e;e="Account information";let i;i="Modify password";let t;t="Third bridge accounts";let o;o="Name";let p;p="Email";let s;s="Unique ID";let O;O="Roles";let ue;ue="Confirm";let fe;fe="New passowrd";let ge;ge="Confirmation password";let Ce;Ce="Old password";let Me;Me="Modify";let Ee;Ee="Modify";let Pe;Pe="Cancel";let he;he="Patient information";let be;be="Patient ID";let Se;Se="WeChat ID";let Oe;Oe="Confirm";let Re;Re="Modify";let Ie;Ie="Cancel";let we;we="Required.";let ve;ve="Incorrect email format.";let Ne;Ne="Different passwords.";let Te;return Te="It's a weak password, the password must contain at least 8 characters and no more than 16 characters, and include at least one upper or lower case letter, at least one number, at least one symbol or special character (_-+!.@#$%^&*) and no spaces.",[["userForm","ngForm"],["passwordForm","ngForm"],["newPasswordCtrl","ngModel"],["cfmPasswordCtrl","ngModel"],["origPasswordCtrl","ngModel"],["templateInputMsg",""],["patientForm","ngForm"],["cardNoCtrl","ngModel"],["wxidCtrl","ngModel"],o,p,s,O,ue,fe,ge,Ce,Me,Ee,Pe,be,Se,Oe,Re,Ie,we,ve,Ne,Te,[3,"items"],["color","primary","dynamicHeight","",1,"mx-2","mt-2","mb-4"],["label",e],[1,"d-block","w-100",3,"ngSubmit"],["appFieldRow",""],["appFieldGroup",""],["appFieldLabel",""],["appFieldControl",""],["appearance","outline"],["name","name","type","text","autocomplete","off","matInput","","required","",3,"ngModelChange","disabled","ngModel"],["name","account","type","email","autocomplete","off","matInput","","email","true","readonly","",3,"ngModelChange","ngModel"],[1,"mat-mdc-form-field"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","p-2","container-btns",3,"ngSwitch"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],["type","button","class","ms-2","mat-flat-button","","color","accent",3,"click",4,"ngSwitchCase"],["type","button","class","ms-2","mat-flat-button","","color","accent",3,"click",4,"ngSwitchDefault"],["label",i],["name","newPassword","type","password","autocomplete","off","required","","matInput","",3,"ngModelChange","disabled","ngModel"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["name","cfmPassword","type","password","autocomplete","off","required","","matInput","",3,"ngModelChange","disabled","ngModel"],["name","origPassword","type","password","autocomplete","off","required","","matInput","",3,"ngModelChange","disabled","ngModel"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","p-2","container-btns"],["color","primary","class","px-2 pt-2 mb-4",4,"ngIf"],["color","primary",1,"px-2","pb-2"],["label",t],[1,"d-block","w-100"],[4,"ngFor","ngForOf"],["type","button","mat-flat-button","","color","accent",1,"ms-2",3,"click"],["color","primary",1,"px-2","pt-2","mb-4"],["label",he],[1,"w-100",3,"ngSubmit"],["name","cardNo","type","text","autocomplete","off","matInput","","required","",3,"ngModelChange","disabled","ngModel"],["name","wxid","type","text","autocomplete","off","matInput","","required","",3,"ngModelChange","disabled","ngModel"],[1,"me-2",3,"svgIcon"],["color","primary",3,"toggleChange","ngModelChange","name","ngModel"],["diameter","24","mode","indeterminate","class","d-inline-block align-middle ms-3",4,"ngIf"],["diameter","24","mode","indeterminate",1,"d-inline-block","align-middle","ms-3"],[4,"ngIf"]];},template:function(i,t){if(i&1){let o=b();I(0,"app-breadcrumb",29),a(1,"mat-tab-group",30)(2,"mat-tab",31)(3,"form",32,0),M("ngSubmit",function(){d(o);let s=h(4);return m(t.editInfo(s));}),a(5,"div",33)(6,"div",34)(7,"label",35),g(8,9),r(),a(9,"div",36)(10,"mat-form-field",37)(11,"input",38),L("ngModelChange",function(s){return d(o),y(t.user.name,s)||(t.user.name=s),m(s);}),r()()()(),a(12,"div",34)(13,"label",35),g(14,10),r(),a(15,"div",36)(16,"mat-form-field",37)(17,"input",39),L("ngModelChange",function(s){return d(o),y(t.user.account,s)||(t.user.account=s),m(s);}),r()()()()(),a(18,"div",33)(19,"div",34)(20,"label",35),g(21,11),r(),a(22,"div",36)(23,"div",40),w(24),r()()(),a(25,"div",34)(26,"label",35),g(27,12),r(),a(28,"div",36)(29,"div",40),w(30),r()()()(),a(31,"div",41)(32,"button",42),E(33),g(34,13),P(),r(),R(35,Cn,3,0,"button",43)(36,Mn,3,0,"button",44),r()()(),a(37,"mat-tab",45)(38,"form",32,1),M("ngSubmit",function(){d(o);let s=h(39);return m(t.modifyPassword(s));}),a(40,"div",33)(41,"div",34)(42,"label",35),g(43,14),r(),a(44,"div",36)(45,"mat-form-field",37)(46,"input",46,2),L("ngModelChange",function(s){return d(o),y(t.passwordGroup.newPassword,s)||(t.passwordGroup.newPassword=s),m(s);}),r()(),R(48,En,0,0,"ng-template",47),r()(),a(49,"div",34)(50,"label",35),g(51,15),r(),a(52,"div",36)(53,"mat-form-field",37)(54,"input",48,3),L("ngModelChange",function(s){return d(o),y(t.passwordGroup.cfmPassword,s)||(t.passwordGroup.cfmPassword=s),m(s);}),r()(),R(56,Pn,0,0,"ng-template",47),r()()(),a(57,"div",33)(58,"div",34)(59,"label",35),g(60,16),r(),a(61,"div",36)(62,"mat-form-field",37)(63,"input",49,4),L("ngModelChange",function(s){return d(o),y(t.passwordGroup.origPassword,s)||(t.passwordGroup.origPassword=s),m(s);}),r()(),R(65,hn,0,0,"ng-template",47),r()()(),a(66,"div",50)(67,"button",42),E(68),g(69,17),P(),r()()()()(),R(70,In,29,17,"mat-tab-group",51),a(71,"mat-tab-group",52)(72,"mat-tab",53)(73,"form",54),R(74,vn,9,5,"ng-container",55),ze(75,"async"),r()()(),R(76,Ln,4,4,"ng-template",null,5,Be);}if(i&2){let o=h(47),p=h(55),s=h(64),O=h(77);_("items",t.breads),l(3),ce("form-disabled",!t.userInfoEditable),l(8),_("disabled",!t.userInfoEditable),A("ngModel",t.user.name),l(6),A("ngModel",t.user.account),l(7),T(t.user.uid),l(6),T(t.user.roles),l(),_("ngSwitch",t.userInfoEditable),l(),_("disabled",!t.userInfoEditable),l(3),_("ngSwitchCase",!1),l(11),_("disabled",!t.passwordEditable),A("ngModel",t.passwordGroup.newPassword),l(2),_("ngTemplateOutlet",O)("ngTemplateOutletContext",x(28,W,o)),l(6),_("disabled",!t.passwordEditable),A("ngModel",t.passwordGroup.cfmPassword),l(2),_("ngTemplateOutlet",O)("ngTemplateOutletContext",x(30,W,p)),l(7),_("disabled",!t.passwordEditable),A("ngModel",t.passwordGroup.origPassword),l(2),_("ngTemplateOutlet",O)("ngTemplateOutletContext",x(32,W,s)),l(2),_("disabled",!t.passwordEditable),l(3),_("ngIf",t.isPatient),l(4),_("ngForOf",qe(75,26,t.signInOptions));}},dependencies:[We,je,Ze,He,Qe,Ye,$t,Dt,rt,tt,nt,it,at,lt,ot,J,Et,Mt,Ct,Pt,bt,kt,At,Lt,xt,yt,Ft,It,Ke],styles:[`#containerProfile{overflow-x:hidden;overflow-y:auto}#containerProfile .field-control .mat-mdc-form-field{width:20em}#containerProfile .container-btns{margin-top:-1px;border:solid 1px #D1D7E4;background-color:#f1f2f8}#containerProfile .mat-mdc-button-base{min-width:8rem}#containerProfile.form-disabled .mat-mdc-form-field-infix{border-color:transparent;background-color:transparent}
`],encapsulation:2});}return n;})();var Yt=ie(S.ACCOUNTANT,[S.ADMIN,S.ACCOUNTANT]),xn=(n,c)=>Yt(n.routeConfig,n.url),re=ie(S.BANKER,[S.ADMIN,S.BANKER]),pe=(n,c)=>re(n.routeConfig,n.url),Zt=ie(S.PATIENT,[S.ADMIN,S.PATIENT]),Fn=(n,c)=>Zt(n.routeConfig,n.url),Un=[{path:"",component:Wt,children:[{path:"profile",component:Qt},{path:"cfe",canMatch:[re],canActivateChild:[pe],loadChildren:()=>import("./chunk-K56NMICR.js").then(n=>n.CFEModule)},{path:"cp",canMatch:[re],canActivateChild:[pe],loadChildren:()=>import("./chunk-DAEOM4HT.js").then(n=>n.CPModule)},{path:"ge",canMatch:[re],canActivateChild:[pe],loadChildren:()=>import("./chunk-GWUVIZ5R.js").then(n=>n.GEModule)},{path:"wacai",canMatch:[Yt],canActivateChild:[xn],loadChildren:()=>import("./chunk-MSQOM44I.js").then(n=>n.WacaiModule)},{path:"hospital",canMatch:[Zt],canActivateChild:[Fn],loadChildren:()=>import("./chunk-6YGUXKRE.js").then(n=>n.HospitalModule)},{path:"",component:jt},{path:"**",component:Ht}]}],Kt=(()=>{class n{static ɵfac=function(i){return new(i||n)();};static ɵmod=Z({type:n});static ɵinj=Q({imports:[me.forChild(Un),me]});}return n;})();var Qi=(()=>{class n{static ɵfac=function(i){return new(i||n)();};static ɵmod=Z({type:n});static ɵinj=Q({imports:[Kt,Je,ht,Rt,Vt,gt,Gt,Ut]});}return n;})();export{Qi as AdminModule};/**i18n:4e954d11e025817f1aceae10dbbd8d111274144b3c3dbbdb81deac1f9b9c7958*/