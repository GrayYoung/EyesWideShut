import{O as K,P as f,Q as $,T as C,U as x,X as z,_ as V,aa as A,q as M,r as U,t as L,u as j}from"./chunk-E2CVKBY2.js";import{i as u}from"./chunk-NQUV66Z4.js";var I="@firebase/remote-config",G="0.4.8";var y=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var q="remote-config";var Y={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},g=new j("remoteconfig","Remote Config",Y);function J(s,t){return s instanceof L&&s.code.indexOf(t)!==-1}var X=!1,Q="",H=0,W=["1","true","t","yes","y","on"],S=class{constructor(t,e=Q){this._source=t,this._value=e}asString(){return this._value}asBoolean(){return this._source==="static"?X:W.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return H;let t=Number(this._value);return isNaN(t)&&(t=H),t}getSource(){return this._source}};function Z(s){return u(this,null,function*(){let t=f(s),[e,i]=yield Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!e||!e.config||!e.eTag||e.eTag===i?!1:(yield Promise.all([t._storageCache.setActiveConfig(e.config),t._storage.setActiveConfigEtag(e.eTag)]),!0)})}function tt(s){let t=f(s);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}function et(s){return u(this,null,function*(){let t=f(s),e=new y;setTimeout(()=>u(this,null,function*(){e.abort()}),t.settings.fetchTimeoutMillis);try{yield t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:e}),yield t._storageCache.setLastFetchStatus("success")}catch(i){let r=J(i,"fetch-throttle")?"throttle":"failure";throw yield t._storageCache.setLastFetchStatus(r),i}})}function Et(s){let t=f(s);return st(t._storageCache.getActiveConfig(),t.defaultConfig).reduce((e,i)=>(e[i]=F(s,i),e),{})}function vt(s,t){return F(f(s),t).asBoolean()}function Ct(s,t){return F(f(s),t).asNumber()}function St(s,t){return F(f(s),t).asString()}function F(s,t){let e=f(s);e._isInitializationComplete||e._logger.debug(`A value was requested for key "${t}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);let i=e._storageCache.getActiveConfig();return i&&i[t]!==void 0?new S("remote",i[t]):e.defaultConfig&&e.defaultConfig[t]!==void 0?new S("default",String(e.defaultConfig[t])):(e._logger.debug(`Returning static value for key "${t}". Define a default or remote value if this is unintentional.`),new S("static"))}function Tt(s,t){let e=f(s);switch(t){case"debug":e._logger.logLevel=C.DEBUG;break;case"silent":e._logger.logLevel=C.SILENT;break;default:e._logger.logLevel=C.ERROR}}function st(s={},t={}){return Object.keys(Object.assign(Object.assign({},s),t))}var P=class{constructor(t,e,i,r){this.client=t,this.storage=e,this.storageCache=i,this.logger=r}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-e,r=i<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${r}.`),r}fetch(t){return u(this,null,function*(){let[e,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e))return i;t.eTag=i&&i.eTag;let r=yield this.client.fetch(t),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(o),r})}};function it(s=navigator){return s.languages&&s.languages[0]||s.language}var O=class{constructor(t,e,i,r,o,n){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=i,this.projectId=r,this.apiKey=o,this.appId=n}fetch(t){return u(this,null,function*(){let[e,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,n={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:i,app_id:this.appId,language_code:it()},a={method:"POST",headers:n,body:JSON.stringify(l)},c=fetch(o,a),d=new Promise((h,p)=>{t.signal.addEventListener(()=>{let B=new Error("The operation was aborted.");B.name="AbortError",p(B)})}),_;try{yield Promise.race([c,d]),_=yield c}catch(h){let p="fetch-client-network";throw h?.name==="AbortError"&&(p="fetch-timeout"),g.create(p,{originalErrorMessage:h?.message})}let m=_.status,b=_.headers.get("ETag")||void 0,E,v;if(_.status===200){let h;try{h=yield _.json()}catch(p){throw g.create("fetch-client-parse",{originalErrorMessage:p?.message})}E=h.entries,v=h.state}if(v==="INSTANCE_STATE_UNSPECIFIED"?m=500:v==="NO_CHANGE"?m=304:(v==="NO_TEMPLATE"||v==="EMPTY_CONFIG")&&(E={}),m!==304&&m!==200)throw g.create("fetch-status",{httpStatus:m});return{status:m,eTag:b,config:E}})}};function rt(s,t){return new Promise((e,i)=>{let r=Math.max(t-Date.now(),0),o=setTimeout(e,r);s.addEventListener(()=>{clearTimeout(o),i(g.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function at(s){if(!(s instanceof L)||!s.customData)return!1;let t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}var D=class{constructor(t,e){this.client=t,this.storage=e}fetch(t){return u(this,null,function*(){let e=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,e)})}attemptFetch(r,o){return u(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:i}){yield rt(t.signal,e);try{let n=yield this.client.fetch(t);return yield this.storage.deleteThrottleMetadata(),n}catch(n){if(!at(n))throw n;let l={throttleEndTimeMillis:Date.now()+K(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(l),this.attemptFetch(t,l)}})}};var ot=60*1e3,nt=12*60*60*1e3,R=class{constructor(t,e,i,r,o){this.app=t,this._client=e,this._storageCache=i,this._storage=r,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:ot,minimumFetchIntervalMillis:nt},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function T(s,t){let e=s.target.error||void 0;return g.create(t,{originalErrorMessage:e&&e?.message})}var w="app_namespace_store",ct="firebase_remote_config",lt=1;function ut(){return new Promise((s,t)=>{try{let e=indexedDB.open(ct,lt);e.onerror=i=>{t(T(i,"storage-open"))},e.onsuccess=i=>{s(i.target.result)},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(w,{keyPath:"compositeKey"})}}}catch(e){t(g.create("storage-open",{originalErrorMessage:e?.message}))}})}var N=class{constructor(t,e,i,r=ut()){this.appId=t,this.appName=e,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){return u(this,null,function*(){let e=yield this.openDbPromise;return new Promise((i,r)=>{let n=e.transaction([w],"readonly").objectStore(w),l=this.createCompositeKey(t);try{let a=n.get(l);a.onerror=c=>{r(T(c,"storage-get"))},a.onsuccess=c=>{let d=c.target.result;i(d?d.value:void 0)}}catch(a){r(g.create("storage-get",{originalErrorMessage:a?.message}))}})})}set(t,e){return u(this,null,function*(){let i=yield this.openDbPromise;return new Promise((r,o)=>{let l=i.transaction([w],"readwrite").objectStore(w),a=this.createCompositeKey(t);try{let c=l.put({compositeKey:a,value:e});c.onerror=d=>{o(T(d,"storage-set"))},c.onsuccess=()=>{r()}}catch(c){o(g.create("storage-set",{originalErrorMessage:c?.message}))}})})}delete(t){return u(this,null,function*(){let e=yield this.openDbPromise;return new Promise((i,r)=>{let n=e.transaction([w],"readwrite").objectStore(w),l=this.createCompositeKey(t);try{let a=n.delete(l);a.onerror=c=>{r(T(c,"storage-delete"))},a.onsuccess=()=>{i()}}catch(a){r(g.create("storage-delete",{originalErrorMessage:a?.message}))}})})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}};var k=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return u(this,null,function*(){let t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),r=yield t;r&&(this.lastFetchStatus=r);let o=yield e;o&&(this.lastSuccessfulFetchTimestampMillis=o);let n=yield i;n&&(this.activeConfig=n)})}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}};function gt(){z(new $(q,s,"PUBLIC").setMultipleInstances(!0)),A(I,G),A(I,G,"esm2017");function s(t,{instanceIdentifier:e}){let i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw g.create("registration-window");if(!M())throw g.create("indexed-db-unavailable");let{projectId:o,apiKey:n,appId:l}=i.options;if(!o)throw g.create("registration-project-id");if(!n)throw g.create("registration-api-key");if(!l)throw g.create("registration-app-id");e=e||"firebase";let a=new N(l,i.name,e),c=new k(a),d=new x(I);d.logLevel=C.ERROR;let _=new O(r,V,e,o,n,l),m=new D(_,a),b=new P(m,a,c,d),E=new R(i,b,c,a,d);return tt(E),E}}function Ft(s){return u(this,null,function*(){return s=f(s),yield et(s),Z(s)})}function bt(){return u(this,null,function*(){if(!M())return!1;try{return yield U()}catch{return!1}})}gt();export{Z as a,tt as b,et as c,Et as d,vt as e,Ct as f,St as g,F as h,Tt as i,Ft as j,bt as k};
/**i18n:4ec78395217facedd742edef8dfa814b1ea6af3fbb33fa1f9a497a05293d0698*/
