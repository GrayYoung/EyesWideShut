import"./chunk-JF3J26XG.js";import{h as Et}from"./chunk-GKDHEXY2.js";import{A as it,Ab as It,B as O,C as L,E as se,G as rt,Ga as be,H as ot,Ha as bt,I as at,M as st,N as mt,Na as St,Qa as Se,X as de,Y as _e,Ya as Ce,Za as Ct,_a as he,aa as pe,ab as Q,da as fe,ea as pt,fa as ft,ga as ue,ha as ut,lb as Ne,m as ie,mb as ht,nb as Nt,pa as gt,u as re,ua as ge,w as h,y as oe,z as ae}from"./chunk-G7ELUQVO.js";import{S as ct,V as dt,ha as _t}from"./chunk-GW7E2URU.js";import{i as et,j as tt,u as me,v as lt,w as le,x as ce,z as Pe}from"./chunk-FZK3JXLQ.js";import{a as nt}from"./chunk-TLCZNPZJ.js";import"./chunk-M5HA4C4U.js";import"./chunk-JX56BWRR.js";import"./chunk-7KVNE4XP.js";import{$b as Y,Aa as Ee,Bc as ze,Cb as ke,Cc as P,Db as Xe,F as Re,Fd as Qe,Gd as We,H as x,Hd as Ye,Id as Ze,Jd as ne,Kd as Ke,Mc as H,Na as $e,Nc as R,Pb as G,Q as B,Qc as qe,Rc as je,Rd as Je,Sb as v,Tb as M,Tc as te,Ub as Fe,Vb as Be,Wb as De,Xb as m,Yb as s,Zb as a,_b as p,aa as $,ac as Z,bc as z,cc as f,dc as u,fc as q,hb as r,hd as He,ic as g,la as U,lb as Ue,lc as j,mb as b,md as Me,n as y,na as Le,nc as C,o as E,p as Ae,pa as k,rc as K,s as w,sc as J,tb as T,tc as ee,ua as D,ub as X,va as V,xc as A,yc as ve,zb as _,zc as Ve}from"./chunk-XEUUNI7X.js";import"./chunk-6B763VMG.js";import"./chunk-LO4PBWZP.js";function xt(e,l){e&1&&z(0,"div",2);}var At=new Le("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var Ie=(()=>{class e{_elementRef=k($e);_ngZone=k(Xe);_changeDetectorRef=k(He);_renderer=k(Ue);_cleanupTransitionEnd;constructor(){let t=dt(),n=k(At,{optional:!0});this._isNoopAnimation=t==="di-disabled",t==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),n&&(n.color&&(this.color=this._defaultColor=n.color),this.mode=n.mode||this.mode);}_isNoopAnimation;get color(){return this._color||this._defaultColor;}set color(t){this._color=t;}_color;_defaultColor="primary";get value(){return this._value;}set value(t){this._value=vt(t||0),this._changeDetectorRef.markForCheck();}_value=0;get bufferValue(){return this._bufferValue||0;}set bufferValue(t){this._bufferValue=vt(t||0),this._changeDetectorRef.markForCheck();}_bufferValue=0;animationEnd=new ke();get mode(){return this._mode;}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck();}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler);});}ngOnDestroy(){this._cleanupTransitionEnd?.();}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`;}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`;}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query";}_transitionendHandler=t=>{this.animationEnd.observers.length===0||!t.target||!t.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}));};static ɵfac=function(n){return new(n||e)();};static ɵcmp=T({type:e,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(n,i){n&2&&(G("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),ze("mat-"+i.color),Ve("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()));},inputs:{color:"color",value:[2,"value","value",Me],bufferValue:[2,"bufferValue","bufferValue",Me],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(n,i){n&1&&(Y(0,"div",0),z(1,"div",1),v(2,xt,1,0,"div",2),Z(),Y(3,"div",3),z(4,"span",4),Z(),Y(5,"div",5),z(6,"span",4),Z()),n&2&&(r(),ve("flex-basis",i._getBufferBarFlexBasis()),r(),M(i.mode==="buffer"?2:-1),r(),ve("transform",i._getPrimaryBarTransform()));},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0});}return e;})();function vt(e,l=0,t=100){return Math.max(l,Math.min(t,e));}var Mt=(()=>{class e{static ɵfac=function(n){return new(n||e)();};static ɵmod=X({type:e});static ɵinj=U({imports:[_t]});}return e;})();var wt=(()=>{class e{route;id="sign";className="d-flex flex-column flex-nowrap align-items-center w-100 h-100";constructor(t){this.route=t;}static ɵfac=function(n){return new(n||e)(b(me));};static ɵcmp=T({type:e,selectors:[["app-sign"]],hostVars:2,hostBindings:function(n,i){n&2&&G("id",i.id)("class",i.className);},standalone:!1,decls:4,vars:1,consts:[["role","main",1,"d-flex","flex-row","flex-nowrap","flex-fill","align-items-center","justify-content-center"]],template:function(n,i){n&1&&(p(0,"app-management-header"),s(1,"main",0),p(2,"router-outlet"),a(),p(3,"app-management-footer")),n&2&&(r(),m("@routeAnimations",i.route.firstChild.snapshot.url.toString()));},dependencies:[lt,Nt,ht],styles:[`#sign{flex:0 0 100%;overflow:auto;background-color:#5c7986;background-image:radial-gradient(ellipse at center,#8cb7cb,#678796 50%,#5c7986 80%)}#sign.ng-animating{overflow-x:hidden;overflow-y:auto}#sign .mat-mdc-form-field .mdc-text-field--outlined{border-radius:5px;background-color:#f4f4f4;box-shadow:0 0 11px 1px #fff inset}#sign .mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label--float-above{width:auto;max-width:unset;left:0;padding-top:7px;padding-left:7px;padding-right:7px;border-top-left-radius:5px;border-top-right-radius:5px;background-color:#f4f4f4}#sign .mat-mdc-form-field .mat-mdc-form-field-bottom-align:before{content:none}#sign .mat-mdc-form-field .mat-icon{margin-left:.25em;background-color:#0f3949;background-clip:text;color:transparent;text-shadow:1px 0 2px rgba(255,255,255,.5)}#sign .container-field{flex:0 1 0%}@media (max-width: 1399.98px){#sign .container-field{flex:0 0 100%;width:100%}#sign .container-field .mat-mdc-form-field,#sign .container-field .mat-mdc-unelevated-button.mat-primary{width:100%}}#sign .mat-mdc-unelevated-button.mat-primary{padding:1em;min-width:8rem;height:56px;line-height:1.5;border-radius:5px;border-color:#03cafb;background-image:linear-gradient(to bottom,#02b8f9 0,#039de3);color:#50545d}@media (max-width: 767.98px){#sign .mat-mdc-unelevated-button.mat-primary{width:100%}}#sign .mat-mdc-unelevated-button.mat-primary:hover,#sign .mat-mdc-unelevated-button.mat-primary:focus{border-color:#03b6e2;background-image:linear-gradient(to bottom,#02b8f9 0,#038bca)}#sign .mat-mdc-unelevated-button.mat-primary:not(:disabled,.disabled):active,#sign .mat-mdc-unelevated-button.mat-primary:not(:disabled,.disabled).active{border-color:#02a1c9;background-image:linear-gradient(to bottom,#02b8f9 0,#075b81)}#sign .mat-fab:not([class*=mat-elevation-z]),#sign .mat-mdc-mini-fab:not([class*=mat-elevation-z]){box-shadow:none;background-color:transparent}#sign .mat-fab .mat-button-wrapper,#sign .mat-mdc-mini-fab .mat-button-wrapper{padding:0}#sign main{max-width:100vw}#sign main.ng-animating{overflow-x:hidden}#sign main>.d-flex{flex:0 0 100%;min-height:100%}#sign main a{color:#fff;text-decoration:none}#sign main a:hover{text-decoration:underline}
`],encapsulation:2,data:{animation:[Et]}});}return e;})();var qt=()=>["/sign","reset-password"],jt=()=>["/sign","up"],Tt=e=>({ctrl:e});function Ht(e,l){}function Qt(e,l){if(e&1&&(s(0,"mat-error"),_(1,Ht,0,0,"ng-template",25),a()),e&2){let t=C(),n=A(30);r(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,Tt,t.formGroup.controls.account));}}function Wt(e,l){}function Yt(e,l){if(e&1&&(s(0,"mat-error"),_(1,Wt,0,0,"ng-template",25),a()),e&2){let t=C(),n=A(30);r(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,Tt,t.formGroup.controls.password));}}function Zt(e,l){e&1&&p(0,"mat-progress-bar",19);}function Kt(e,l){e&1&&(s(0,"p",26),f(1),g(2,4),u(),a());}function Jt(e,l){e&1&&(s(0,"p",26),f(1),g(2,5),u(),a());}function en(e,l){if(e&1&&(v(0,Kt,3,0,"p",26),v(1,Jt,3,0,"p",26)),e&2){let t=l.ctrl;M(t.hasError("required")?0:-1),r(),M(t.hasError("email")?1:-1);}}function tn(e,l){e&1&&(s(0,"span",16),f(1),g(2,6),u(),a());}function nn(e,l){if(e&1){let t=q();s(0,"button",27),j("click",function(){let i=D(t).$implicit,o=C();return V(o.signInWithProvider(i));}),p(1,"mat-icon",28),a();}if(e&2){let t=l.$implicit;m("matTooltip",t.label),r(),m("svgIcon",t.iconName);}}var Gt=(()=>{class e{router;fireAuth;authService;notification;storage;className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100";formGroup=new it({account:new L(null,[h.required]),password:new L(null,[h.required])});signInOptions;hasOthers=!1;requesting=!1;signInForm;constructor(t,n,i,o,d){this.router=t,this.fireAuth=n,this.authService=i,this.notification=o,this.storage=d,this.signInOptions=i.getDefaultAuthMethods().pipe(w(c=>(this.hasOthers=c.length>0,c)));}ngOnInit(){this.signInForm.form.addControl("user",this.formGroup);}ngOnDestroy(){this.notification.dismiss();}login(){let t=this.signInForm;if(t.form.markAllAsTouched(),t&&t.valid){let n=this.notification,i=this.formGroup.value;this.requesting=!0,t.control.disable(),this.authService.signIn(i.account,i.password).pipe(x(o=>{switch(o.code){case Q.INVALID_PASSWORD:n.openError("\u5BC6\u7801\u9519\u8BEF!");break;default:n.openError(n.stripMessage(o.message));}return this.requesting=!1,t.control.enable(),E(!1);}),B(()=>{this.requesting=!1,t.control.enable();})).subscribe(o=>{o?(this.router.navigateByUrl(this.authService.redirectUrl||""),n.dismiss()):n.openError("\u767B\u5F55\u5931\u8D25\u3002");});}}signInWithProvider(t){this.signInWithRedirect(t.provider).subscribe();}signInWithRedirect(t){let n=this.notification;return n.showInitLoading(),this.storage.set(Ct,!0),y(this.fireAuth.signInWithPopup(t)).pipe(x(i=>{switch(i.code){case Q.POPUP_CLOSED_BY_USER:break;default:n.openError(n.stripMessage(i.message));}return E(void 0);}),$(i=>i?.user?this.authService.storeUser({uid:i.user.uid,name:i.user.displayName,account:i.user.email}).pipe(w(()=>(this.router.navigateByUrl(this.authService.redirectUrl||""),i))):E(i)),B(()=>{n.hideLoading();}));}static ɵfac=function(n){return new(n||e)(b(le),b(ie),b(Ne),b(Se),b(he));};static ɵcmp=T({type:e,selectors:[["app-sign-in"]],viewQuery:function(n,i){if(n&1&&K(O,7),n&2){let o;J(o=ee())&&(i.signInForm=o.first);}},hostVars:1,hostBindings:function(n,i){n&2&&G("class",i.className);},standalone:!1,decls:38,vars:12,consts:()=>{let t;t="Account";let n;n="Password";let i;i="Forgot password?";let o;o="Sign up";let d;d="Sign in";let c;c="Required.";let N;N="Incorrect email format.";let F;return F="Sign in with",[["templateInputMsg",""],i,o,d,c,N,F,[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4",3,"formGroup"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline","subscriptSizing","dynamic"],["fontSet","Marching","matPrefix",""],["name","account","type","text","autocomplete","username","matInput","","formControlName","account","placeholder",t],["name","password","type","password","autocomplete","current-password","matInput","","formControlName","password","placeholder",n],[1,"mt-2"],[1,"mt-2",3,"routerLink"],[1,"text-white"],[1,"container-field","mb-4"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],[1,"position-relative"],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center"],[1,"d-sm-block","d-md-none","mb-2","w-100"],["type","button","mat-mini-fab","",1,"ms-2",3,"matTooltip"],[1,"d-sm-block","mb-4","w-100"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"my-0"],["type","button","mat-mini-fab","",1,"ms-2",3,"click","matTooltip"],[3,"svgIcon"]];},template:function(n,i){if(n&1){let o=q();s(0,"form",7),j("ngSubmit",function(){return D(o),V(i.login());}),s(1,"div",8)(2,"div",9)(3,"mat-form-field",10)(4,"mat-icon",11),P(5,"person"),a(),p(6,"input",12),v(7,Qt,2,4,"mat-error"),a()(),s(8,"div",9)(9,"mat-form-field",10)(10,"mat-icon",11),P(11,"lock"),a(),p(12,"input",13),v(13,Yt,2,4,"mat-error"),a(),s(14,"div",14)(15,"a",15),f(16),g(17,1),u(),a(),s(18,"span",16),P(19," | "),a(),s(20,"a",15),f(21),g(22,2),u(),a()()(),s(23,"div",17)(24,"button",18),v(25,Zt,1,0,"mat-progress-bar",19),s(26,"span",20),f(27),g(28,3),u(),a()()()(),_(29,en,2,2,"ng-template",null,0,te),a(),s(31,"div",21),v(32,tn,3,0,"span",16),p(33,"div",22),Be(34,nn,2,2,"button",23,Fe),qe(36,"async"),p(37,"div",24),a();}n&2&&(r(),m("formGroup",i.formGroup),r(6),M(i.formGroup.controls.account.invalid?7:-1),r(6),M(i.formGroup.controls.password.invalid?13:-1),r(2),m("routerLink",H(10,qt)),r(5),m("routerLink",H(11,jt)),r(4),m("disabled",i.requesting),r(),M(i.requesting?25:-1),r(7),M(i.hasOthers?32:-1),r(2),De(je(36,8,i.signInOptions)));},dependencies:[ne,se,re,oe,ae,O,ot,at,ce,fe,pt,pe,de,_e,ue,be,Ie,ge,Ke],encapsulation:2});}return e;})();var rn=()=>["/sign","in"],ye=e=>({ctrl:e});function on(e,l){}function an(e,l){if(e&1&&(s(0,"mat-error"),_(1,on,0,0,"ng-template",25),a()),e&2){let t=C(),n=A(15);r(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,ye,t.accountCtrl));}}function sn(e,l){}function mn(e,l){if(e&1&&(s(0,"mat-error"),_(1,sn,0,0,"ng-template",25),a()),e&2){let t=C(2),n=A(15);r(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,ye,t.passwordCtrl));}}function ln(e,l){if(e&1&&(s(0,"div",12)(1,"mat-form-field",13)(2,"mat-icon",14),P(3,"lock"),a(),p(4,"input",26),_(5,mn,2,4,"mat-error",16),a()()),e&2){let t=C();r(4),m("formControl",t.passwordCtrl),r(),m("ngIf",t.passwordCtrl.invalid);}}function cn(e,l){}function dn(e,l){if(e&1&&(s(0,"mat-error"),_(1,cn,0,0,"ng-template",25),a()),e&2){let t=C(2),n=A(15);r(),m("ngTemplateOutlet",n)("ngTemplateOutletContext",R(2,ye,t.passwordCfmCtrl));}}function _n(e,l){if(e&1&&(s(0,"div",12)(1,"mat-form-field",13)(2,"mat-icon",14),P(3,"lock"),a(),p(4,"input",27),_(5,dn,2,4,"mat-error",16),a()()),e&2){let t=C();r(4),m("formControl",t.passwordCfmCtrl),r(),m("ngIf",t.passwordCfmCtrl.invalid);}}function pn(e,l){e&1&&p(0,"mat-progress-bar",34);}function fn(e,l){e&1&&(f(0),g(1,3),u());}function un(e,l){e&1&&(f(0),g(1,4),u());}function gn(e,l){if(e&1&&(s(0,"button",28),_(1,pn,1,0,"mat-progress-bar",29),s(2,"span",30),f(3,31),_(4,fn,2,0,"ng-container",32)(5,un,2,0,"ng-container",33),u(),a()()),e&2){let t=C();m("disabled",t.requesting),r(),m("ngIf",t.requesting),r(2),m("ngSwitch",t.isResetPassword),r(),m("ngSwitchCase",!0);}}function bn(e,l){e&1&&p(0,"mat-progress-bar",34);}function Sn(e,l){if(e&1&&(s(0,"button",35),_(1,bn,1,0,"mat-progress-bar",29),s(2,"span",30),f(3),g(4,5),u(),a()()),e&2){let t=C();m("disabled",t.requesting),r(),m("ngIf",t.requesting);}}function Cn(e,l){e&1&&(s(0,"p",37),f(1),g(2,6),u(),a());}function hn(e,l){e&1&&(s(0,"p",37),f(1),g(2,7),u(),a());}function Nn(e,l){e&1&&(s(0,"p",37),f(1),g(2,8),u(),a());}function In(e,l){e&1&&(s(0,"p",37),f(1),g(2,9),u(),a());}function En(e,l){if(e&1&&_(0,Cn,3,0,"p",36)(1,hn,3,0,"p",36)(2,Nn,3,0,"p",36)(3,In,3,0,"p",36),e&2){let t=l.ctrl;m("ngIf",t.hasError("required")),r(),m("ngIf",t.hasError("email")),r(),m("ngIf",t.hasError("passwordDiff")),r(),m("ngIf",t.hasError("minlength")||t.hasError("maxlength"));}}var we=(()=>{class e{route;router;document;fireAuth;authService;notification;storage;className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100";accountCtrl=new L(null,[h.required,h.email]);passwordCtrl=new L(null,[h.required,h.minLength(8),h.maxLength(16)]);passwordCfmCtrl=new L(null,[h.required]);emailVerified=!1;isResetPassword=!1;requesting=!1;signUpForm;user;constructor(t,n,i,o,d,c,N){this.route=t,this.router=n,this.document=i,this.fireAuth=o,this.authService=d,this.notification=c,this.storage=N,this.isResetPassword=ct(t.snapshot.routeConfig.data?.resetPassword);}ngOnInit(){this.accountCtrl.disable(),this.passwordCtrl.disable(),this.passwordCfmCtrl.disable(),this.signUpForm.form.addControl("account",this.accountCtrl),this.requesting=!0,y(this.fireAuth.isSignInWithEmailLink(this.router.url)).pipe($(t=>{let n=this.storage.get(Ce);if(t&&n){let i=this.notification.openInfo("\u6B63\u5728\u9A8C\u8BC1\uFF0C\u8BF7\u7A0D\u7B49...");return this.storage.delete(Ce),this.emailVerified=!0,this.accountCtrl.setValue(n),this.passwordCfmCtrl.addValidators([h.required,o=>{let d=this.passwordCtrl;return d&&d.valid&&d.value!==o.value?{passwordDiff:!0}:null;}]),this.signUpForm.form.addControl("password",this.passwordCtrl),this.signUpForm.form.addControl("passwordCfm",this.passwordCfmCtrl),y(this.fireAuth.signInWithEmailLink(n,this.router.url)).pipe(x(o=>{let d=this.notification;return d.openError(d.stripMessage(o.message)),this.emailVerified=!1,E(null);}),w(o=>(i.dismiss(),this.notification.openInfo("\u9A8C\u8BC1\u7ED3\u675F\u3002",{duration:5e3}),o)),Re(o=>!!o));}else return E(null);})).subscribe(t=>{let n=this.user=t?.user;this.requesting=!1,!n&&this.accountCtrl.enable(),this.passwordCtrl.enable(),this.passwordCfmCtrl.enable();});}register(){let t=this.signUpForm;if(t.form.markAllAsTouched(),t&&t.valid){let n=this.fireAuth,i=this.notification,o=t.form.value,d=this.user;this.requesting=!0,t.control.disable(),this.emailVerified?y(d.updatePassword(o.password)).pipe(x(c=>{switch(c.code){case Q.POPUP_CLOSED_BY_USER:break;default:i.openError(i.stripMessage(c.message));}return this.requesting=!1,t.control.enable(),E(!1);}),w(c=>typeof c=="boolean"?c:!0),$(c=>c?this.authService.storeUser({uid:d.uid,name:d.displayName,account:d.email}).pipe(w(()=>c)):E(c))).subscribe(c=>{c?(i.openSuccess(this.isResetPassword?"\u5BC6\u7801\u91CD\u7F6E\u6210\u529F\u3002":"\u6CE8\u518C\u6210\u529F\u3002"),this.router.navigateByUrl(this.authService.redirectUrl||"")):(i.openError(this.isResetPassword?"\u5BC6\u7801\u91CD\u7F6E\u5931\u8D25\u3002":"\u6CE8\u518C\u5931\u8D25\u3002"),this.requesting=!1,t.control.enable());}):y(n.fetchSignInMethodsForEmail(o.account)).pipe($(c=>{let N=c.length;return N===0||N===1&&c[0]===nt.EMAIL_LINK_SIGN_IN_METHOD?y(n.sendSignInLinkToEmail(o.account,{url:this.document.location.href,handleCodeInApp:!0})):(i.openError("\u6B64\u90AE\u7BB1\u5DF2\u7ECF\u88AB\u6CE8\u518C\u3002"),Ae(()=>new Error("There already exists an account registered with this email address.")));})).pipe(x(c=>(t.control.enable(),E(!1))),w(c=>typeof c=="boolean"?c:!0),B(()=>{this.requesting=!1;})).subscribe(c=>{c?(this.storage.set(Ce,o.account),i.openSuccess("\u9A8C\u8BC1\u8FDE\u63A5\u5DF2\u7ECF\u53D1\u9001\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536\u3002")):i.openError("\u9A8C\u8BC1\u8FDE\u63A5\u53D1\u9001\u5931\u8D25\u3002");});}}static ɵfac=function(n){return new(n||e)(b(me),b(le),b(Ee),b(ie),b(Ne),b(Se),b(he));};static ɵcmp=T({type:e,selectors:[["app-sign-up"]],viewQuery:function(n,i){if(n&1&&K(O,7),n&2){let o;J(o=ee())&&(i.signUpForm=o.first);}},hostVars:1,hostBindings:function(n,i){n&2&&G("class",i.className);},standalone:!1,decls:24,vars:9,consts:()=>{let t;t="Email";let n;n="Send validation link.";let i;i="Already have an account?";let o;o="Sign in";let d;d="Password";let c;c="Confirmation password";let N;N="Confirm";let F;F="Sign up";let I;I="Verify";let Te;Te="Required.";let Ge;Ge="Incorrect email format.";let Oe;Oe="Different passwords.";let xe;return xe="It's a weak password, the password must contain at least 8 characters and no more than 16 characters, and include at least one upper or lower case letter, at least one number, at least one symbol or special character (_-+!.@#$%^&*) and no spaces.",[["templateInputMsg",""],i,o,N,F,I,Te,Ge,Oe,xe,[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline","subscriptSizing","dynamic"],["fontSet","Marching","matPrefix",""],["name","account","type","email","matInput","","placeholder",t,3,"readonly","formControl"],[4,"ngIf"],["class","container-field me-lg-5 mb-4",4,"ngIf"],[1,"container-field","mb-4",3,"ngSwitch"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden",3,"disabled",4,"ngSwitchCase"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden","matTooltip",n,3,"disabled",4,"ngSwitchDefault"],[1,"mt-1"],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center","pb-4"],[1,"text-white"],[3,"routerLink"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["name","password","type","password","matInput","","placeholder",d,3,"formControl"],["name","passwordCfm","type","password","matInput","","placeholder",c,3,"formControl"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate","class","position-absolute top-0 start-0 h-100 opacity-25",4,"ngIf"],[1,"position-relative"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],["type","submit","mat-flat-button","","color","primary","matTooltip",n,1,"overflow-hidden",3,"disabled"],["class","my-0",4,"ngIf"],[1,"my-0"]];},template:function(n,i){if(n&1){let o=q();s(0,"form",10),j("ngSubmit",function(){return D(o),V(i.register());}),s(1,"div",11)(2,"div",12)(3,"mat-form-field",13)(4,"mat-icon",14),P(5,"person"),a(),p(6,"input",15),_(7,an,2,4,"mat-error",16),a()(),_(8,ln,6,2,"div",17)(9,_n,6,2,"div",17),s(10,"div",18),_(11,gn,6,4,"button",19)(12,Sn,5,2,"button",20),p(13,"div",21),a()(),_(14,En,4,4,"ng-template",null,0,te),a(),s(16,"div",22)(17,"span",23),f(18),g(19,1),u(),a(),P(20," \xA0 "),s(21,"a",24),f(22),g(23,2),u(),a()();}n&2&&(r(6),m("readonly",i.emailVerified)("formControl",i.accountCtrl),r(),m("ngIf",i.accountCtrl.invalid),r(),m("ngIf",i.emailVerified),r(),m("ngIf",i.emailVerified),r(),m("ngSwitch",i.emailVerified),r(),m("ngSwitchCase",!0),r(10),m("routerLink",H(8,rn)));},dependencies:[Qe,ne,We,Ye,Ze,se,re,oe,ae,O,rt,ce,fe,pe,de,_e,ue,be,Ie,ge],encapsulation:2});}return e;})();var vn=[{path:"",component:wt,children:[{path:"in",component:Gt},{path:"up",component:we},{path:"reset-password",component:we,data:{resetPassword:!0}}]},{path:"",redirectTo:"/in",pathMatch:"full"},{path:"**",redirectTo:"/in"}],Ot=(()=>{class e{static ɵfac=function(n){return new(n||e)();};static ɵmod=X({type:e});static ɵinj=U({imports:[Pe.forChild(vn),Pe]});}return e;})();var Ei=(()=>{class e{static ɵfac=function(n){return new(n||e)();};static ɵmod=X({type:e});static ɵinj=U({providers:[et(tt())],imports:[Je,st,mt,Ot,ft,gt,ut,bt,Mt,St,It]});}return e;})();export{Ei as LoginModule};/**i18n:4e954d11e025817f1aceae10dbbd8d111274144b3c3dbbdb81deac1f9b9c7958*/