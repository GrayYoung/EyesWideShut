"use strict";(self.webpackChunkbank=self.webpackChunkbank||[]).push([[431],{6431:(Be,y,_)=>{_.r(y),_.d(y,{LoginModule:()=>Ze});var c=_(6895),l=_(4006),q=_(529),I=_(7392),E=_(4859),g=_(9549),C=_(4144),e=_(4650),P=_(3238),G=_(1281),H=_(727),W=_(4968),w=_(9300);const J=["primaryValueBar"],Y=(0,P.pj)(class{constructor(n){this._elementRef=n}},"primary"),z=new e.OlP("mat-progress-bar-location",{providedIn:"root",factory:function V(){const n=(0,e.f3M)(c.K0),a=n?n.location:null;return{getPathname:()=>a?a.pathname+a.search:""}}}),F=new e.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let j=0,U=(()=>{class n extends Y{constructor(t,o,r,i,m,s){super(t),this._ngZone=o,this._animationMode=r,this._changeDetectorRef=s,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new e.vpe,this._animationEndSubscription=H.w0.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+j++;const d=i?i.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${d}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===r,m&&(m.color&&(this.color=this.defaultColor=m.color),this.mode=m.mode||this.mode)}get value(){return this._value}set value(t){this._value=x((0,G.su)(t)||0),this._changeDetectorRef?.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=x(t||0),this._changeDetectorRef?.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=(0,W.R)(t,"transitionend").pipe((0,w.h)(o=>o.target===t)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(e.QbO,8),e.Y36(z,8),e.Y36(F,8),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mat-progress-bar"]],viewQuery:function(t,o){if(1&t&&e.Gf(J,5),2&t){let r;e.iGM(r=e.CRH())&&(o._primaryValueBar=r.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,o){2&t&&(e.uIk("aria-valuenow","indeterminate"===o.mode||"query"===o.mode?null:o.value)("mode",o.mode),e.ekj("_mat-animation-noopable",o._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[e.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.O4$(),e.TgZ(1,"svg",1)(2,"defs")(3,"pattern",2),e._UZ(4,"circle",3),e.qZA()(),e._UZ(5,"rect",4),e.qZA(),e.kcU(),e._UZ(6,"div",5)(7,"div",6,7)(9,"div",8),e.qZA()),2&t&&(e.xp6(3),e.Q6J("id",o.progressbarId),e.xp6(2),e.uIk("fill",o._rectangleFillValue),e.xp6(1),e.Q6J("ngStyle",o._bufferTransform()),e.xp6(1),e.Q6J("ngStyle",o._primaryTransform()))},dependencies:[c.PC],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}.mat-progress-bar._mat-animation-noopable{transition:none !important;animation:none !important}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}'],encapsulation:2,changeDetection:0}),n})();function x(n,a=0,t=100){return Math.max(a,Math.min(t,n))}let ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,P.BQ,P.BQ]}),n})();var R=_(266),te=_(9982),u=_(4793),ne=_(5173),oe=_(410),ae=_(3394);let re=(()=>{class n{constructor(t){this.route=t,this.id="sign",this.className="d-flex flex-column flex-nowrap align-items-center w-100 h-100"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign"]],hostVars:2,hostBindings:function(t,o){2&t&&e.uIk("id",o.id)("class",o.className)},decls:4,vars:1,consts:[["role","main",1,"d-flex","flex-row","flex-nowrap","flex-fill","align-items-center","justify-content-center"]],template:function(t,o){1&t&&(e._UZ(0,"app-management-header"),e.TgZ(1,"main",0),e._UZ(2,"router-outlet"),e.qZA(),e._UZ(3,"app-management-footer")),2&t&&(e.xp6(1),e.Q6J("@routeAnimations",o.route.firstChild.snapshot.url.toString()))},dependencies:[u.lC,oe.Z,ae.V],styles:["#sign{flex:0 0 100%;overflow:auto;background-color:#5c7986;background-image:radial-gradient(ellipse at center,#8cb7cb 0%,#678796 50%,#5c7986 80%)}#sign.ng-animating{overflow-x:hidden;overflow-y:auto}#sign .mat-form-field{border-radius:5px;background-color:#f4f4f4;box-shadow:0 0 11px 1px #fff inset}#sign .mat-form-field .mat-icon{margin-left:.25em;margin-right:.25em;background-color:#0f3949;-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:1px 0 2px rgba(255,255,255,.5)}#sign .mat-form-field+div>.mat-error{display:none;white-space:break-spaces;word-break:break-word}#sign .mat-form-field-appearance-outline .mat-form-field-wrapper{padding-bottom:0;margin:0}#sign .mat-form-field-appearance-outline .mat-form-field-prefix,#sign .mat-form-field-appearance-outline .mat-form-field-suffix{top:-.25em}#sign .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label-wrapper,#sign .mat-form-field-appearance-outline.mat-form-field-can-float.mat-input-server:focus .mat-form-field-label-wrapper{overflow:visible}#sign .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,#sign .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float+.mat-form-field-label-wrapper .mat-form-field-label,#sign .mat-form-field-appearance-outline.mat-form-field-can-float.mat-input-server:focus .mat-form-field-label,#sign .mat-form-field-appearance-outline.mat-form-field-can-float.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label{display:inline-block;padding-top:7px;padding-left:7px;padding-right:7px;margin-left:-5px;border-top-left-radius:5px;border-top-right-radius:5px;width:auto;background-color:#f4f4f4}#sign .container-field{flex:0 1 0%}@media (max-width: 1399.98px){#sign .container-field{flex:0 0 100%;width:100%}#sign .container-field .mat-form-field,#sign .container-field .mat-flat-button.mat-primary{width:100%}}#sign .mat-form-field-invalid+div>.mat-error{display:block}#sign .mat-flat-button.mat-primary{padding:1em;min-width:8rem;height:4.0325em;line-height:1.5;border-radius:5px;border-color:#03cafb;background-image:linear-gradient(to bottom,#02b8f9 0,#039de3 100%);color:#50545d}@media (max-width: 767.98px){#sign .mat-flat-button.mat-primary{width:100%}}#sign .mat-flat-button.mat-primary:hover,#sign .mat-flat-button.mat-primary:focus{border-color:#03b6e2;background-image:linear-gradient(to bottom,#02b8f9 0,#038bca 100%)}#sign .mat-flat-button.mat-primary:not(:disabled,.disabled):active,#sign .mat-flat-button.mat-primary:not(:disabled,.disabled).active{border-color:#02a1c9;background-image:linear-gradient(to bottom,#02b8f9 0,#075b81 100%)}#sign .mat-fab:not([class*=mat-elevation-z]),#sign .mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:none;background-color:transparent}#sign .mat-fab .mat-button-wrapper,#sign .mat-mini-fab .mat-button-wrapper{padding:0}#sign main{max-width:100vw}#sign main.ng-animating{overflow-x:hidden}#sign main>.d-flex{flex:0 0 100%;min-height:100%}#sign main a{color:#fff;text-decoration:none}#sign main a:hover{text-decoration:underline}\n"],encapsulation:2,data:{animation:[ne.J]}}),n})();var b=_(4004),A=_(262),S=_(9646),T=_(8746),N=_(8996),O=_(2033),h=_(1303),L=_(948),$=_(3790),Z=_(155);function ie(n,a){}function _e(n,a){}function se(n,a){1&n&&e._UZ(0,"mat-progress-bar",27)}function le(n,a){1&n&&(e.TgZ(0,"mat-error"),e.ynx(1),e.SDv(2,29),e.BQk(),e.qZA())}function me(n,a){1&n&&(e.TgZ(0,"mat-error"),e.ynx(1),e.SDv(2,30),e.BQk(),e.qZA())}function ce(n,a){if(1&n&&(e.YNc(0,le,3,0,"mat-error",28),e.YNc(1,me,3,0,"mat-error",28)),2&n){const t=a.ctrl;e.Q6J("ngIf",t.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.hasError("email"))}}function de(n,a){1&n&&(e.TgZ(0,"span",14),e.ynx(1),e.SDv(2,31),e.BQk(),e.qZA())}function fe(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",32),e.NdJ("click",function(){const i=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.signInWithProvider(i))}),e._UZ(2,"mat-icon",33),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(1),e.Q6J("matTooltip",t.label),e.xp6(1),e.Q6J("svgIcon",t.iconName)}}const B=function(n){return{ctrl:n}},pe=function(){return["/sign","reset-password"]},ge=function(){return["/sign","up"]};let ue=(()=>{class n{constructor(t,o,r,i,m){this.router=t,this.fireAuth=o,this.authService=r,this.notification=i,this.storage=m,this.className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100",this.formGroup=new l.cw({account:new l.NI(null,[l.kI.required]),password:new l.NI(null,[l.kI.required])}),this.hasOthers=!1,this.requesting=!1,this.signInOptions=r.getDefaultAuthMethods().pipe((0,b.U)(s=>(this.hasOthers=s.length>0,s)))}ngOnInit(){this.signInForm.form.addControl("user",this.formGroup)}ngOnDestroy(){this.notification.dismiss()}login(){const t=this.signInForm;if(t.form.markAllAsTouched(),t&&t.valid){const o=this.notification,r=this.formGroup.value;this.requesting=!0,t.control.disable(),this.authService.signIn(r.account,r.password).pipe((0,A.K)(i=>(o.openError(i.code===O.k.INVALID_PASSWORD?"\u5bc6\u7801\u9519\u8bef!":o.stripMessage(i.message)),this.requesting=!1,t.control.enable(),(0,S.of)(!1))),(0,T.x)(()=>{this.requesting=!1,t.control.enable()})).subscribe(i=>{i?(this.router.navigateByUrl(this.authService.redirectUrl||""),o.dismiss()):o.openError("\u767b\u5f55\u5931\u8d25\u3002")})}}signInWithProvider(t){this.signInWithRedirect(t.provider).subscribe()}signInWithRedirect(t){const o=this.notification;return o.showInitLoading(),this.storage.set(h.cN,!0),(0,N.D)(this.fireAuth.signInWithPopup(t)).pipe((0,A.K)(r=>(r.code===O.k.POPUP_CLOSED_BY_USER||o.openError(o.stripMessage(r.message)),(0,S.of)(void 0))),(0,b.U)(r=>{const i=r;return i?.user&&this.router.navigateByUrl(this.authService.redirectUrl||""),i}),(0,T.x)(()=>{o.hideLoading()}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0),e.Y36(L.zQ),e.Y36($.b),e.Y36(Z.g),e.Y36(h.V1))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-in"]],viewQuery:function(t,o){if(1&t&&e.Gf(l.F,7),2&t){let r;e.iGM(r=e.CRH())&&(o.signInForm=r.first)}},hostVars:1,hostBindings:function(t,o){2&t&&e.uIk("class",o.className)},decls:43,vars:19,consts:function(){let a,t,o,r,i,m,s,d;return a="\u8D26\u53F7(\u7535\u5B50\u90AE\u7BB1)",t="\u767B\u5F55\u5BC6\u7801",o="\u5FD8\u8BB0\u5BC6\u7801?",r="\u6CE8\u518C",i="\u767B\u5F55",m="\u5FC5\u586B\u3002",s="\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E\u3002",d="\u901A\u8FC7\u7B2C\u4E09\u65B9\u767B\u5F55",[[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4",3,"formGroup"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline"],["fontSet","Marching","matPrefix",""],a,["name","account","type","text","autocomplete","username","matInput","","formControlName","account"],[1,"mt-1"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],t,["name","password","type","password","autocomplete","current-password","matInput","","formControlName","password"],[1,"mt-2"],[1,"mt-2",3,"routerLink"],o,[1,"text-white"],r,[1,"container-field","mb-4"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate","class","position-absolute top-0 start-0 h-100 opacity-25",4,"ngIf"],[1,"position-relative"],i,["templateInputMsg",""],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center"],["class","text-white",4,"ngIf"],[1,"d-sm-block","d-md-none","mb-2","w-100"],[4,"ngFor","ngForOf"],[1,"d-sm-block","mb-4","w-100"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],[4,"ngIf"],m,s,d,["type","button","mat-mini-fab","",1,"ms-2",3,"matTooltip","click"],[3,"svgIcon"]]},template:function(t,o){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-icon",4),e._uU(5,"person"),e.qZA(),e.TgZ(6,"mat-label"),e.SDv(7,5),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",7),e.YNc(10,ie,0,0,"ng-template",8),e.qZA()(),e.TgZ(11,"div",2)(12,"mat-form-field",3)(13,"mat-icon",4),e._uU(14,"lock"),e.qZA(),e.TgZ(15,"mat-label"),e.SDv(16,9),e.qZA(),e._UZ(17,"input",10),e.qZA(),e.TgZ(18,"div",7),e.YNc(19,_e,0,0,"ng-template",8),e.qZA(),e.TgZ(20,"div",11)(21,"a",12),e.ynx(22),e.SDv(23,13),e.BQk(),e.qZA(),e.TgZ(24,"span",14),e._uU(25," | "),e.qZA(),e.TgZ(26,"a",12),e.ynx(27),e.SDv(28,15),e.BQk(),e.qZA()()(),e.TgZ(29,"div",16)(30,"button",17),e.YNc(31,se,1,0,"mat-progress-bar",18),e.TgZ(32,"span",19),e.ynx(33),e.SDv(34,20),e.BQk(),e.qZA()()()(),e.YNc(35,ce,2,2,"ng-template",null,21,e.W1O),e.qZA(),e.TgZ(37,"div",22),e.YNc(38,de,3,0,"span",23),e._UZ(39,"div",24),e.YNc(40,fe,3,2,"ng-container",25),e.ALo(41,"async"),e._UZ(42,"div",26),e.qZA()),2&t){const r=e.MAs(36);e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(9),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(13,B,o.formGroup.controls.account)),e.xp6(9),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(15,B,o.formGroup.controls.account)),e.xp6(2),e.Q6J("routerLink",e.DdM(17,pe)),e.xp6(5),e.Q6J("routerLink",e.DdM(18,ge)),e.xp6(4),e.Q6J("disabled",o.requesting),e.xp6(1),e.Q6J("ngIf",o.requesting),e.xp6(7),e.Q6J("ngIf",o.hasOthers),e.xp6(2),e.Q6J("ngForOf",e.lcZ(41,11,o.signInOptions))}},dependencies:[c.sg,c.O5,c.tP,l._Y,l.Fj,l.JJ,l.JL,l.F,l.sg,l.u,u.yS,E.lW,g.TO,g.KE,g.hX,g.qo,I.Hw,C.Nt,U,R.gM,c.Ov],encapsulation:2}),n})();var Se=_(8937),M=_(3900),be=_(2843);function Ne(n,a){}function he(n,a){}const v=function(n){return{ctrl:n}};function Ae(n,a){if(1&n&&(e.TgZ(0,"div",2)(1,"mat-form-field",3)(2,"mat-icon",4),e._uU(3,"lock"),e.qZA(),e.TgZ(4,"mat-label"),e.SDv(5,19),e.qZA(),e._UZ(6,"input",20),e.qZA(),e.TgZ(7,"div",7),e.YNc(8,he,0,0,"ng-template",8),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(18);e.xp6(6),e.Q6J("formControl",t.passwordCtrl),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(3,v,t.passwordCtrl))}}function Ie(n,a){}function Ee(n,a){if(1&n&&(e.TgZ(0,"div",2)(1,"mat-form-field",3)(2,"mat-icon",4),e._uU(3,"lock"),e.qZA(),e.TgZ(4,"mat-label"),e.SDv(5,21),e.qZA(),e._UZ(6,"input",22),e.qZA(),e.TgZ(7,"div",7),e.YNc(8,Ie,0,0,"ng-template",8),e.qZA()()),2&n){const t=e.oxw(),o=e.MAs(18);e.xp6(6),e.Q6J("formControl",t.passwordCfmCtrl),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(3,v,t.passwordCfmCtrl))}}function Ce(n,a){1&n&&e._UZ(0,"mat-progress-bar",29)}function Pe(n,a){1&n&&(e.ynx(0),e.SDv(1,30),e.BQk())}function Re(n,a){1&n&&(e.ynx(0),e.SDv(1,31),e.BQk())}function Te(n,a){if(1&n&&(e.TgZ(0,"button",23),e.YNc(1,Ce,1,0,"mat-progress-bar",24),e.TgZ(2,"span",25),e.ynx(3,26),e.YNc(4,Pe,2,0,"ng-container",27),e.YNc(5,Re,2,0,"ng-container",28),e.BQk(),e.qZA()()),2&n){const t=e.oxw();e.Q6J("disabled",t.requesting),e.xp6(1),e.Q6J("ngIf",t.requesting),e.xp6(2),e.Q6J("ngSwitch",t.isResetPassword),e.xp6(1),e.Q6J("ngSwitchCase",!0)}}function Oe(n,a){1&n&&e._UZ(0,"mat-progress-bar",29)}function Me(n,a){if(1&n&&(e.TgZ(0,"button",32),e.YNc(1,Oe,1,0,"mat-progress-bar",24),e.TgZ(2,"span",25),e.ynx(3),e.SDv(4,33),e.BQk(),e.qZA()()),2&n){const t=e.oxw();e.Q6J("disabled",t.requesting),e.xp6(1),e.Q6J("ngIf",t.requesting)}}function ve(n,a){1&n&&(e.TgZ(0,"mat-error"),e.ynx(1),e.SDv(2,35),e.BQk(),e.qZA())}function ye(n,a){1&n&&(e.TgZ(0,"mat-error"),e.ynx(1),e.SDv(2,36),e.BQk(),e.qZA())}function Ge(n,a){1&n&&(e.TgZ(0,"mat-error"),e.ynx(1),e.SDv(2,37),e.BQk(),e.qZA())}function we(n,a){1&n&&(e.TgZ(0,"mat-error"),e.ynx(1),e.SDv(2,38),e.BQk(),e.qZA())}function Ue(n,a){if(1&n&&(e.YNc(0,ve,3,0,"mat-error",34),e.YNc(1,ye,3,0,"mat-error",34),e.YNc(2,Ge,3,0,"mat-error",34),e.YNc(3,we,3,0,"mat-error",34)),2&n){const t=a.ctrl;e.Q6J("ngIf",t.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.hasError("email")),e.xp6(1),e.Q6J("ngIf",t.hasError("passwordDiff")),e.xp6(1),e.Q6J("ngIf",t.hasError("minlength")||t.hasError("maxlength"))}}const xe=function(){return["/sign","in"]};let k=(()=>{class n{constructor(t,o,r,i,m,s,d){this.route=t,this.router=o,this.document=r,this.fireAuth=i,this.authService=m,this.notification=s,this.storage=d,this.className="d-flex flex-column flex-nowrap align-items-center justify-content-center container-fluid w-100 mh-100",this.accountCtrl=new l.NI(null,[l.kI.required,l.kI.email]),this.passwordCtrl=new l.NI(null,[l.kI.required,l.kI.minLength(8),l.kI.maxLength(16)]),this.passwordCfmCtrl=new l.NI(null,[l.kI.required]),this.emailVerified=!1,this.isResetPassword=!1,this.requesting=!1,this.isResetPassword=(0,G.Ig)(t.snapshot.routeConfig.data?.resetPassword)}ngOnInit(){this.accountCtrl.disable(),this.passwordCtrl.disable(),this.passwordCfmCtrl.disable(),this.signUpForm.form.addControl("account",this.accountCtrl),this.requesting=!0,(0,N.D)(this.fireAuth.isSignInWithEmailLink(this.router.url)).pipe((0,M.w)(t=>{const o=this.storage.get(h.Xk);if(t&&o){const r=this.notification.openInfo("\u6b63\u5728\u9a8c\u8bc1\uff0c\u8bf7\u7a0d\u7b49...");return this.storage.delete(h.Xk),this.emailVerified=!0,this.accountCtrl.setValue(o),this.passwordCfmCtrl.addValidators([l.kI.required,i=>{const m=this.passwordCtrl;return m&&m.valid&&m.value!==i.value?{passwordDiff:!0}:null}]),this.signUpForm.form.addControl("password",this.passwordCtrl),this.signUpForm.form.addControl("passwordCfm",this.passwordCfmCtrl),(0,N.D)(this.fireAuth.signInWithEmailLink(o,this.router.url)).pipe((0,A.K)(i=>{const m=this.notification;return m.openError(m.stripMessage(i.message)),this.emailVerified=!1,(0,S.of)(null)}),(0,b.U)(i=>(r.dismiss(),this.notification.openInfo("\u9a8c\u8bc1\u7ed3\u675f\u3002",{duration:5e3}),i)),(0,w.h)(i=>!!i))}return(0,S.of)(null)})).subscribe(t=>{const o=this.user=t?.user;this.requesting=!1,!o&&this.accountCtrl.enable(),this.passwordCtrl.enable(),this.passwordCfmCtrl.enable()})}register(){const t=this.signUpForm;if(t.form.markAllAsTouched(),t&&t.valid){const o=this.fireAuth,r=this.notification,i=t.form.value,m=this.user;this.requesting=!0,t.control.disable(),this.emailVerified?(0,N.D)(m.updatePassword(i.password)).pipe((0,A.K)(s=>(s.code===O.k.POPUP_CLOSED_BY_USER||r.openError(r.stripMessage(s.message)),this.requesting=!1,t.control.enable(),(0,S.of)(!1))),(0,b.U)(s=>"boolean"!=typeof s||s),(0,M.w)(s=>s?this.authService.storeUser({uid:m.uid,name:m.displayName,account:m.email}).pipe((0,b.U)(()=>s)):(0,S.of)(s))).subscribe(s=>{s?(r.openSuccess(this.isResetPassword?"\u5bc6\u7801\u91cd\u7f6e\u6210\u529f\u3002":"\u6ce8\u518c\u6210\u529f\u3002"),this.router.navigateByUrl(this.authService.redirectUrl||"")):(r.openError(this.isResetPassword?"\u5bc6\u7801\u91cd\u7f6e\u5931\u8d25\u3002":"\u6ce8\u518c\u5931\u8d25\u3002"),this.requesting=!1,t.control.enable())}):(0,N.D)(o.fetchSignInMethodsForEmail(i.account)).pipe((0,M.w)(s=>{const d=s.length;return 0===d||1===d&&s[0]===Se.w9.EMAIL_LINK_SIGN_IN_METHOD?(0,N.D)(o.sendSignInLinkToEmail(i.account,{url:this.document.location.href,handleCodeInApp:!0})):(r.openError("\u6b64\u90ae\u7bb1\u5df2\u7ecf\u88ab\u6ce8\u518c\u3002"),(0,be._)(()=>new Error("There already exists an account registered with this email address.")))})).pipe((0,A.K)(s=>(t.control.enable(),(0,S.of)(!1))),(0,b.U)(s=>"boolean"!=typeof s||s),(0,T.x)(()=>{this.requesting=!1})).subscribe(s=>{s?(this.storage.set(h.Xk,i.account),r.openSuccess("\u9a8c\u8bc1\u8fde\u63a5\u5df2\u7ecf\u53d1\u9001\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\u3002")):r.openError("\u9a8c\u8bc1\u8fde\u63a5\u53d1\u9001\u5931\u8d25\u3002")})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(c.K0),e.Y36(L.zQ),e.Y36($.b),e.Y36(Z.g),e.Y36(h.V1))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-up"]],viewQuery:function(t,o){if(1&t&&e.Gf(l.F,7),2&t){let r;e.iGM(r=e.CRH())&&(o.signUpForm=r.first)}},hostVars:1,hostBindings:function(t,o){2&t&&e.uIk("class",o.className)},decls:27,vars:12,consts:function(){let a,t,o,r,i,m,s,d,p,D,K,X,Q;return a="\u7535\u5B50\u90AE\u7BB1",t="\u53D1\u9001\u9A8C\u8BC1\u94FE\u63A5\u3002",o="\u5DF2\u6709\u8D26\u53F7\uFF1F",r="\u767B\u5F55",i="\u767B\u5F55\u5BC6\u7801",m="\u786E\u8BA4\u5BC6\u7801",s="\u786E\u8BA4",d="\u6CE8\u518C",p="\u9A8C\u8BC1",D="\u5FC5\u586B\u3002",K="\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E\u3002",X="\u5BC6\u7801\u4E0D\u4E00\u81F4\u3002",Q="\u5BC6\u7801\u4E3A8\u81F316\u4E2A\u5927\u5C0F\u5199\u5B57\u6BCD\u3001\u6570\u5B57\u3001_-+!.@#$%^&*\u7B49\u7279\u6B8A\u5B57\u7B26\u3002",[[1,"d-block","w-100",3,"ngSubmit"],[1,"d-flex","flex-wrap","align-items-start","justify-content-center","w-100","pt-4"],[1,"container-field","me-lg-5","mb-4"],["appearance","outline"],["fontSet","Marching","matPrefix",""],a,["name","account","type","email","matInput","",3,"readonly","formControl"],[1,"mt-1"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","container-field me-lg-5 mb-4",4,"ngIf"],[1,"container-field","mb-4",3,"ngSwitch"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden",3,"disabled",4,"ngSwitchCase"],["type","submit","mat-flat-button","","color","primary","class","overflow-hidden","matTooltip",t,3,"disabled",4,"ngSwitchDefault"],["templateInputMsg",""],[1,"w-100","d-flex","flex-wrap","align-items-center","justify-content-center","pb-4"],[1,"text-white"],o,[3,"routerLink"],r,i,["name","password","type","password","matInput","",3,"formControl"],m,["name","passwordCfm","type","password","matInput","",3,"formControl"],["type","submit","mat-flat-button","","color","primary",1,"overflow-hidden",3,"disabled"],["mode","indeterminate","class","position-absolute top-0 start-0 h-100 opacity-25",4,"ngIf"],[1,"position-relative"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","indeterminate",1,"position-absolute","top-0","start-0","h-100","opacity-25"],s,d,["type","submit","mat-flat-button","","color","primary","matTooltip",t,1,"overflow-hidden",3,"disabled"],p,[4,"ngIf"],D,K,X,Q]},template:function(t,o){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.register()}),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-icon",4),e._uU(5,"person"),e.qZA(),e.TgZ(6,"mat-label"),e.SDv(7,5),e.qZA(),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"div",7),e.YNc(10,Ne,0,0,"ng-template",8),e.qZA()(),e.YNc(11,Ae,9,5,"div",9),e.YNc(12,Ee,9,5,"div",9),e.TgZ(13,"div",10),e.YNc(14,Te,6,4,"button",11),e.YNc(15,Me,5,2,"button",12),e._UZ(16,"div",7),e.qZA()(),e.YNc(17,Ue,4,4,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(19,"div",14)(20,"span",15),e.ynx(21),e.SDv(22,16),e.BQk(),e.qZA(),e._uU(23," \xa0 "),e.TgZ(24,"a",17),e.ynx(25),e.SDv(26,18),e.BQk(),e.qZA()()),2&t){const r=e.MAs(18);e.xp6(8),e.Q6J("readonly",o.emailVerified)("formControl",o.accountCtrl),e.xp6(2),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(9,v,o.accountCtrl)),e.xp6(1),e.Q6J("ngIf",o.emailVerified),e.xp6(1),e.Q6J("ngIf",o.emailVerified),e.xp6(1),e.Q6J("ngSwitch",o.emailVerified),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(10),e.Q6J("routerLink",e.DdM(11,xe))}},dependencies:[c.O5,c.tP,c.RF,c.n9,c.ED,l._Y,l.Fj,l.JJ,l.JL,l.F,l.oH,u.yS,E.lW,g.TO,g.KE,g.hX,g.qo,I.Hw,C.Nt,U,R.gM],encapsulation:2}),n})();const Le=[{path:"",component:re,children:[{path:"in",component:ue},{path:"up",component:k},{path:"reset-password",component:k,data:{resetPassword:!0}}]},{path:"",redirectTo:"/in",pathMatch:"full"},{path:"**",redirectTo:"/in"}];let $e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(Le),u.Bz]}),n})(),Ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,l.u5,l.UX,q.JF,$e,E.ot,g.lN,I.Ps,C.c,ee,R.AV,te.m]}),n})()}}]);