"use strict";(self.webpackChunkbank=self.webpackChunkbank||[]).push([[430],{7430:(Pi,se,m)=>{m.r(se),m.d(se,{WacaiModule:()=>vi});var t=m(4650),I=m(6895),Gt=m(529),Jt=m(2673),Q=m(3238);const Ke=["*",[["mat-card-footer"]]],tn=["*","mat-card-footer"];let en=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),nn=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.QbO,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,a){2&e&&t.ekj("_mat-animation-noopable","NoopAnimations"===a._animationMode)},exportAs:["matCard"],ngContentSelectors:tn,decls:2,vars:0,template:function(e,a){1&e&&(t.F$t(Ke),t.Hsn(0),t.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),an=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Q.BQ,Q.BQ]}),n})();var on=m(6308),pt=m(8739),M=m(7155),bt=m(3848),rn=m(6331),cn=m(9982),sn=m(2497),J=m(4793),E=m(4006),ot=m(727),v=m(9646),it=m(4128),rt=m(8372),_n=m(8675),Xt=m(3900),Z=m(8746),W=m(262),U=m(4004),ct=(()=>{return(n=ct||(ct={}))[n.REVENUE=2]="REVENUE",n[n.PAY=3]="PAY",ct;var n})(),R=(()=>{return(n=R||(R={}))[n.PAY=1]="PAY",n[n.REVENUE=2]="REVENUE",n[n.TRANSFER=3]="TRANSFER",n[n.BORROW=4]="BORROW",n[n.RETURN=5]="RETURN",R;var n})(),P=(()=>{return(n=P||(P={}))[n.BORROW=1]="BORROW",n[n.LEND=2]="LEND",n[n.RECEIVE=3]="RECEIVE",n[n.REPAYMENT=4]="REPAYMENT",P;var n})(),st=m(155),ft=m(1357),Wt=m(2140),Ot=m(4242);let _t=(()=>{class n{constructor(e){this.requestService=e}getBooks(){return this.books?(0,v.of)({code:null,error:null,data:{books:this.books}}):this.requestService.get("activity/bkk-frontier/api/v2/book/web/query").pipe((0,U.U)(e=>(e&&e.data&&e.data.books&&(this.books=e.data.books),e)))}getAccountTypeList(){return this.requestService.get("setting/account_allAccountTypes.action",{timesamp:Date.now()})}getAccountList(e=!0,a=!1,i=!0){return this.requestService.get("setting/account_list.action",{timesamp:Date.now(),hidden:e,reqBalance:a,loanFlag:i})}getVisibleAccountList(){return this.requestService.post("activity/bkk-frontier/api/account/index",{localTime:Date.now(),timeZoneId:this.requestService.TIME_ZONE_ID,useCompleteSort:!0})}getHiddenAccountList(){return this.requestService.post("activity/bkk-frontier/api/account/hiddenList",{localTime:Date.now(),timeZoneId:this.requestService.TIME_ZONE_ID,useCompleteSort:!0})}getShortAccounts(e=1){return this.requestService.get("activity/bkk-frontier/api/account/web/query",{accountOption:e})}getEntryCategories(e,a){return this.requestService.get("activity/bkk-frontier/api/v2/category/web/query",{bkId:e,categoryType:a})}getTransactionObjects(e){return this.requestService.get("activity/bkk-frontier/api/v2/trade/target/web/query",{bkId:e})}getBookProjects(e){return this.requestService.get("activity/bkk-frontier/api/v2/project/web/query",{bkId:e})}getMembers(e){return this.requestService.get("activity/bkk-frontier/api/v2/book/member/web/query",{bkId:e})}queryEntries(e){return this.requestService.post("activity/bkk-frontier/api/v2/flow/list/web",e)}getEntries(e,a,i){const r={accountId:e,startDate:a.valueOf(),endDate:i.valueOf(),timeZoneId:this.requestService.TIME_ZONE_ID,localTime:Date.now()};return this.requestService.post("activity/bkk-frontier/api/account/detail/flow",r)}getEntry(e,a){return this.requestService.get("activity/bkk-frontier/api/v2/flow/query/web/"+e+"/"+a)}saveEntry(e){return this.requestService.post("activity/bkk-frontier/api/v2/flow/save",{flows:e})}deleteEntries(e){return this.requestService.post("activity/bkk-frontier/api/v2/flow/batch/delete",{flowIds:e})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ot.s))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(e){this.requestService=e}getCategoryStatistics(e,a,i,r=1){return this.requestService.post("activity/bkk-frontier/api/v2/report/chartStat",{bkId:e,startTime:a.valueOf(),endTime:i.valueOf(),statNo:r})}getRevenueNExpenditureStatistics(e,a,i,r=11){return this.requestService.post("activity/bkk-frontier/api/v2/report/monthStat",{bkId:e,startTime:a.valueOf(),endTime:i.valueOf(),statNo:r})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ot.s))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var w=m(1281),S=m(2516),ln=m(8186),un=m(2855),gn=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(function dn(n){for(var o=n.length/6|0,e=new Array(o),a=0;a<o;)e[a]="#"+n.slice(6*a,6*++a);return e});const pn=(0,un.hD)((n=gn)[n.length-1]);var n,le,fn=m(961),An=m(3489),xt=m(3179),Ut=m(8415),At=m(714),hn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vt(n){if(!(o=hn.exec(n)))throw new Error("invalid format: "+n);var o;return new zt({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}function zt(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+""}function Pt(n,o){if((e=(n=o?n.toExponential(o-1):n.toExponential()).indexOf("e"))<0)return null;var e,a=n.slice(0,e);return[a.length>1?a[0]+a.slice(2):a,+n.slice(e+1)]}function ht(n){return(n=Pt(Math.abs(n)))?n[1]:NaN}function de(n,o){var e=Pt(n,o);if(!e)return n+"";var a=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")}vt.prototype=zt.prototype,zt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const ue={"%":(n,o)=>(100*n).toFixed(o),b:n=>Math.round(n).toString(2),c:n=>n+"",d:function En(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)},e:(n,o)=>n.toExponential(o),f:(n,o)=>n.toFixed(o),g:(n,o)=>n.toPrecision(o),o:n=>Math.round(n).toString(8),p:(n,o)=>de(100*n,o),r:de,s:function bn(n,o){var e=Pt(n,o);if(!e)return n+"";var a=e[0],i=e[1],r=i-(le=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,c=a.length;return r===c?a:r>c?a+new Array(r-c+1).join("0"):r>0?a.slice(0,r)+"."+a.slice(r):"0."+new Array(1-r).join("0")+Pt(n,Math.max(0,o+r-1))[0]},X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function me(n){return n}var wt,fe,Ae,ge=Array.prototype.map,pe=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function he(n){var o=n.domain;return n.ticks=function(e){var a=o();return(0,At.ZP)(a[0],a[a.length-1],e??10)},n.tickFormat=function(e,a){var i=o();return function Dn(n,o,e,a){var r,i=(0,At.ly)(n,o,e);switch((a=vt(a??",f")).type){case"s":var c=Math.max(Math.abs(n),Math.abs(o));return null==a.precision&&!isNaN(r=function Cn(n,o){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ht(o)/3)))-ht(Math.abs(n)))}(i,c))&&(a.precision=r),Ae(a,c);case"":case"e":case"g":case"p":case"r":null==a.precision&&!isNaN(r=function Rn(n,o){return n=Math.abs(n),o=Math.abs(o)-n,Math.max(0,ht(o)-ht(n))+1}(i,Math.max(Math.abs(n),Math.abs(o))))&&(a.precision=r-("e"===a.type));break;case"f":case"%":null==a.precision&&!isNaN(r=function yn(n){return Math.max(0,-ht(Math.abs(n)))}(i))&&(a.precision=r-2*("%"===a.type))}return fe(a)}(i[0],i[i.length-1],e??10,a)},n.nice=function(e){null==e&&(e=10);var l,d,a=o(),i=0,r=a.length-1,c=a[i],s=a[r],f=10;for(s<c&&(d=c,c=s,s=d,d=i,i=r,r=d);f-- >0;){if((d=(0,At.G9)(c,s,e))===l)return a[i]=c,a[r]=s,o(a);if(d>0)c=Math.floor(c/d)*d,s=Math.ceil(s/d)*d;else{if(!(d<0))break;c=Math.ceil(c*d)/d,s=Math.floor(s*d)/d}l=d}return n},n}function Ht(){var n=(0,xt.ZP)();return n.copy=function(){return(0,xt.JG)(n,Ht())},Ut.o.apply(n,arguments),he(n)}function $t(){var e,a,i,r,l,n=0,o=1,c=xt.yR,s=!1;function d(_){return null==_||isNaN(_=+_)?l:c(0===i?.5:(_=(r(_)-e)*i,s?Math.max(0,Math.min(1,_)):_))}function f(_){return function(g){var A,h;return arguments.length?([A,h]=g,c=_(A,h),d):[c(0),c(1)]}}return d.domain=function(_){return arguments.length?([n,o]=_,e=r(n=+n),a=r(o=+o),i=e===a?0:1/(a-e),d):[n,o]},d.clamp=function(_){return arguments.length?(s=!!_,d):s},d.interpolator=function(_){return arguments.length?(c=_,d):c},d.range=f(fn.Z),d.rangeRound=f(An.Z),d.unknown=function(_){return arguments.length?(l=_,d):l},function(_){return r=_,e=_(n),a=_(o),i=e===a?0:1/(a-e),d}}function Zt(n,o){return o.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}!function In(n){wt=function Mn(n){var o=void 0===n.grouping||void 0===n.thousands?me:function Tn(n,o){return function(e,a){for(var i=e.length,r=[],c=0,s=n[0],l=0;i>0&&s>0&&(l+s+1>a&&(s=Math.max(1,a-l)),r.push(e.substring(i-=s,i+s)),!((l+=s+1)>a));)s=n[c=(c+1)%n.length];return r.reverse().join(o)}}(ge.call(n.grouping,Number),n.thousands+""),e=void 0===n.currency?"":n.currency[0]+"",a=void 0===n.currency?"":n.currency[1]+"",i=void 0===n.decimal?".":n.decimal+"",r=void 0===n.numerals?me:function Sn(n){return function(o){return o.replace(/[0-9]/g,function(e){return n[+e]})}}(ge.call(n.numerals,String)),c=void 0===n.percent?"%":n.percent+"",s=void 0===n.minus?"\u2212":n.minus+"",l=void 0===n.nan?"NaN":n.nan+"";function d(_){var g=(_=vt(_)).fill,A=_.align,h=_.sign,p=_.symbol,u=_.zero,T=_.width,G=_.comma,k=_.precision,tt=_.trim,D=_.type;"n"===D?(G=!0,D="g"):ue[D]||(void 0===k&&(k=12),tt=!0,D="g"),(u||"0"===g&&"="===A)&&(u=!0,g="0",A="=");var lt="$"===p?e:"#"===p&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",dt="$"===p?a:/[%p]/.test(D)?c:"",et=ue[D],ut=/[defgprs%]/.test(D);function nt(N){var L,at,b,Y=lt,O=dt;if("c"===D)O=et(N)+O,N="";else{var mt=(N=+N)<0||1/N<0;if(N=isNaN(N)?l:et(Math.abs(N),k),tt&&(N=function Nn(n){t:for(var i,o=n.length,e=1,a=-1;e<o;++e)switch(n[e]){case".":a=i=e;break;case"0":0===a&&(a=e),i=e;break;default:if(!+n[e])break t;a>0&&(a=0)}return a>0?n.slice(0,a)+n.slice(i+1):n}(N)),mt&&0==+N&&"+"!==h&&(mt=!1),Y=(mt?"("===h?h:s:"-"===h||"("===h?"":h)+Y,O=("s"===D?pe[8+le/3]:"")+O+(mt&&"("===h?")":""),ut)for(L=-1,at=N.length;++L<at;)if(48>(b=N.charCodeAt(L))||b>57){O=(46===b?i+N.slice(L+1):N.slice(L))+O,N=N.slice(0,L);break}}G&&!u&&(N=o(N,1/0));var gt=Y.length+N.length+O.length,B=gt<T?new Array(T-gt+1).join(g):"";switch(G&&u&&(N=o(B+N,B.length?T-O.length:1/0),B=""),A){case"<":N=Y+N+O+B;break;case"=":N=Y+B+N+O;break;case"^":N=B.slice(0,gt=B.length>>1)+Y+N+O+B.slice(gt);break;default:N=B+Y+N+O}return r(N)}return k=void 0===k?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k)),nt.toString=function(){return _+""},nt}return{format:d,formatPrefix:function f(_,g){var A=d(((_=vt(_)).type="f",_)),h=3*Math.max(-8,Math.min(8,Math.floor(ht(g)/3))),p=Math.pow(10,-h),u=pe[8+h/3];return function(T){return A(p*T)+u}}}}(n),fe=wt.format,Ae=wt.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var Ft=m(8448);const Et=(Symbol(),{"font-family":"Google Sans","font-size":14}),Ct=new t.OlP("Default chart options"),vn={padding:{top:10,right:0,bottom:30,left:80},layout:"grouped",delay:20,maxBandWidth:100,valueFun:n=>n,colors:["#a6aaad","#11a3dc","#5e92a8","#10536d","#012345"],palette:function Ee(){var n=he($t()(xt.yR));return n.copy=function(){return Zt(n,Ee())},Ut.O.apply(n,arguments)}(pn),xAxis:{type:"string",clipped:!0,font:Et,minZoom:1,maxZoom:10,padding:10,position:"bottom"},yAxis:{clipped:!1,font:Et,minZoom:1,maxZoom:1,padding:10,position:"left"}},Pn=(Ht([],[]).interpolate(ln.q),(0,Ft.Z)(),{padding:{top:10,right:10,bottom:10,left:10},delay:20,font:{"pointer-events":"none","text-anchor":"middle","font-size":10,"fill-opacity":.9},title:{font:{dy:"0.35em"}},palette:(0,Ft.Z)([],[])});var Se=m(2687),wn=m(445),$n=m(5589),Zn=m(3353),kn=m(4080),qt=m(266),Yn=m(9751),Ln=m(7579),kt=m(9300),Ne=m(7489),be=m(3511),Qn=m(3698),Me=m(8169),Yt=m(29),Gn=m(9338),Jn=m(1351);function jt(){var r,c,n=(0,Ft.Z)().unknown(void 0),o=n.domain,e=n.range,a=0,i=1,s=!1,l=0,d=0,f=.5;function _(){var g=o().length,A=i<a,h=A?i:a,p=A?a:i;r=(p-h)/Math.max(1,g-l+2*d),s&&(r=Math.floor(r)),h+=(p-h-r*(g-l))*f,c=r*(1-l),s&&(h=Math.round(h),c=Math.round(c));var u=(0,be.Z)(g).map(function(T){return h+r*T});return e(A?u.reverse():u)}return delete n.unknown,n.domain=function(g){return arguments.length?(o(g),_()):o()},n.range=function(g){return arguments.length?([a,i]=g,a=+a,i=+i,_()):[a,i]},n.rangeRound=function(g){return[a,i]=g,a=+a,i=+i,s=!0,_()},n.bandwidth=function(){return c},n.step=function(){return r},n.round=function(g){return arguments.length?(s=!!g,_()):s},n.padding=function(g){return arguments.length?(l=Math.min(1,d=+g),_()):l},n.paddingInner=function(g){return arguments.length?(l=Math.min(1,g),_()):l},n.paddingOuter=function(g){return arguments.length?(d=+g,_()):d},n.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),_()):f},n.copy=function(){return jt(o(),[a,i]).round(s).paddingInner(l).paddingOuter(d).align(f)},Ut.o.apply(_(),arguments)}var Xn=m(4659),Re=m(711),Mt=m(8791),Wn=m(1426),z=m(7524),H=m(3409),j=m(9388),V=m(3573),ye=m(4558),Tt=m(682),Vt=m(2526),Un=m(821);const F=1e3,q=60*F,K=60*q,X=24*K,It=30*X,Kt=365*X,Rt=[[z.E,1,F],[z.E,2,2*F],[z.E,3,3*F],[z.E,4,4*F],[z.E,5,5*F],[z.E,10,10*F],[z.E,15,15*F],[z.E,30,30*F],[H.Z_,1,q],[H.Z_,2,2*q],[H.Z_,3,3*q],[H.Z_,4,4*q],[H.Z_,5,5*q],[H.Z_,10,10*q],[H.Z_,15,15*q],[H.Z_,30,30*q],[j.WQ,1,K],[j.WQ,2,2*K],[j.WQ,3,3*K],[j.WQ,4,4*K],[j.WQ,6,6*K],[j.WQ,8,8*K],[j.WQ,12,12*K],[V.rr,1,X],[V.rr,2,2*X],[V.rr,3,3*X],[V.rr,4,4*X],[V.rr,5,5*X],[V.rr,6,6*X],[V.rr,10,10*X],[ye.Zy,1,6048e5],[Tt.F0,1,It],[Tt.F0,2,2*It],[Tt.F0,3,3*It],[Tt.F0,4,4*It],[Tt.F0,6,6*It],[Vt.jB,1,Kt]],De=n=>{let o;switch(n){case"second":o=z.E;break;case"minute":o=H.Z_;break;case"hour":o=j.WQ;break;case"day":o=V.rr;break;case"week":o=ye.Zy;break;case"month":o=Tt.F0;break;case"year":o=Vt.jB;break;default:o=Un.A}return o},Oe=(n,o,e)=>{const a=De(e);return Math.max(1,a.count(n,o))};var te=m(8184);let Fn=0;const yt=(n,o,e)=>{const a=n.invertX(o[0][0])-e[0][0],i=n.invertX(o[1][0])-e[1][0],r=n.invertY(o[0][1])-e[0][1],c=n.invertY(o[1][1])-e[1][1];return n.translate(i>a?a:Math.min(0,a)||Math.max(0,i),c>r?r:Math.min(0,r)||Math.max(0,c))};let xe=(()=>{class n{constructor(e,a,i,r,c){this.renderer=a,this.changeDetectorRef=i,this.overlay=r,this.injector=c,this.dimension=new DOMRect(0,0,0,0),this.subscription=new ot.w0,this._isDev=!1,this.CONTENT_CLASS_NAME="drawing",this.X_AXIS_CLASS_NAME="x-axis",this.Y_AXIS_CLASS_NAME="y-axis";const s=this.createSVGElement("svg"),l=this.createSVGElement("g"),d=this.createSVGElement("g"),f=this.createSVGElement("g"),_=this.createSVGElement("rect");a.addClass(l,this.X_AXIS_CLASS_NAME),a.addClass(d,this.Y_AXIS_CLASS_NAME),a.addClass(f,this.CONTENT_CLASS_NAME),a.addClass(_,"canvas-area"),a.appendChild(s,this.createSVGElement("defs")),a.appendChild(f,_),a.appendChild(s,l),a.appendChild(s,d),a.appendChild(s,f),a.appendChild(e,s),this.id_count=++Fn,this.chartOptions=(0,Ne.merge)({},c.get(Ct)),this._container=e,this.content=(0,Re.Z)(s),this.resizeObservable=new Yn.y(g=>{const A=new ResizeObserver(h=>{const p=h[0].contentRect;g.next(new DOMRect(Math.floor(p.left),Math.floor(p.top),Math.floor(p.width),Math.floor(p.height)))});return A.observe(e),function(){A.disconnect()}}),this.renderingObs=new Ln.x,this.zoom=(0,Mt.sP)().constrain(yt),this.xZoom=(0,Mt.sP)().constrain(yt),this.yZoom=(0,Mt.sP)().constrain(yt),this.tooltipPositionStrategy=this.overlay.position().flexibleConnectedTo(s).withPositions([{originX:"start",originY:"top",overlayX:"center",overlayY:"bottom"}])}set options(e){this.chartOptions=(0,Ne.merge)({},this.injector.get(Ct),e)}get options(){return this.chartOptions}set xTransform(e){const a=this.xZoom;e&&(e=new Mt.ax(Math.min(a.scaleExtent()[1],Math.max(a.scaleExtent()[0],e.k)),e.x,e.y),e=yt(e,a.extent()(),a.translateExtent())),this._xTransform=e}get xTransform(){return this._xTransform}set yTransform(e){const a=this.yZoom;e&&(e=new Mt.ax(Math.min(a.scaleExtent()[1],Math.max(a.scaleExtent()[0],e.k)),e.x,e.y),e=yt(e,a.extent()(),a.translateExtent())),this._yTransform=e}get yTransform(){return this._yTransform}ngOnChanges(e){if(e.options){const a=e.options?.previousValue,i=e.options?.currentValue,r=this.options;this.zoom.scaleExtent([this.getScaleBoundary(r.minZoom),this.getScaleBoundary(r.maxZoom)]),this.xZoom.scaleExtent([this.getScaleBoundary(typeof r.xAxis?.minZoom<"u"?r.xAxis.minZoom:r.minZoom),this.getScaleBoundary(typeof r.xAxis?.maxZoom<"u"?r.xAxis.maxZoom:r.maxZoom)]),this.yZoom.scaleExtent([this.getScaleBoundary(typeof r.yAxis?.minZoom<"u"?r.yAxis.minZoom:r.minZoom),this.getScaleBoundary(typeof r.yAxis?.maxZoom<"u"?r.yAxis.maxZoom:r.maxZoom)]),i?.xAxis?.position!==a?.xAxis?.position||i?.xAxis?.type!==a?.xAxis?.type?this.createAxisScale("x",r.xAxis):typeof i?.xAxis?.format<"u"&&this.xAxis.tickFormat(i.xAxis.format),i?.yAxis?.position!==a?.yAxis?.position?this.createAxisScale("y",r.yAxis):typeof i?.yAxis?.format<"u"&&this.yAxis.tickFormat(i.yAxis.format),this.tooltip.disabled=(0,w.Ig)(r.tooltip?.disabled)}(e.data||e.options)&&this.tooltip&&this.tooltip.hide()}ngOnInit(){this.subscription.add(this.resizeObservable.pipe((0,kt.h)(e=>{const a=this.dimension;return e.width!==a.width||e.height!==a.height}),(0,U.U)(e=>(this.dimension=e,e)),(0,rt.b)(100)).subscribe(()=>{this.resize(),this.identifyZoom(),this.prepareToRender()})),this.renderingObs.pipe((0,rt.b)(5)).subscribe(()=>{this.render()}),this.content.on("contextmenu",e=>{e.preventDefault()})}ngAfterViewInit(){}ngOnDestroy(){this.renderingObs.complete(),this.subscription.unsubscribe(),this.tooltip&&this.tooltip.hide()}zoomIn(){this.content.call(this.zoom.scaleBy,2)}zoomOut(){this.content.call(this.zoom.scaleBy,.5)}getValue(...e){const a=this.invertViewData.call(this,...e);return this.options.valueFun(a,...e)}getXValue(e){const a=this.options.xAxis?.valueFun;return(0,w.su)("function"==typeof a?a(e):e)}getYValue(e){const a=this.options.yAxis?.valueFun;return(0,w.su)("function"==typeof a?a(e):e)}getPalette(){return this.palette}getCanvasArea(){const e=this.dimension,a=this.options.padding;return{...a,width:Math.max(0,e.width-a.left-a.right),height:Math.max(0,e.height-a.top-a.bottom)}}getContainer(){return this._container}resize(){const e=this.dimension,a=e.width,i=e.height;this.content.attr("viewBox",[0,0,a,i]).attr("width",a).attr("height",i),this.setViewportExtent()}setPalette(){const e=this.options,a=this.injector.get(Ct);let i=e.palette;if(i&&i.unknown(a.palette.unknown()),i=this.palette=i||a.palette.copy(),"static"!==e.domain||!e.palette){const c=(this.data||[]).length;let s=e.colors;(!s||!s.length)&&(s=(0,Gn.Z)(Xn.Z,c+2),s.shift(),s.pop()),i.domain((0,be.Z)(0,c+1)).range(s)}}setViewportExtent(){const e=this.options,a=this.getCanvasArea(),i=this.content,r=[{className:this.X_AXIS_CLASS_NAME,viewBox:this.getAxisViewBox(e.xAxis,a)},{className:this.Y_AXIS_CLASS_NAME,viewBox:this.getAxisViewBox(e.yAxis,a)},{className:this.CONTENT_CLASS_NAME,viewBox:[a.left,a.top,a.width,a.height]}];[{axis:this.xAxis,scale:this.xAxisScale,zoom:this.xZoom,options:e.xAxis},{axis:this.yAxis,scale:this.yAxisScale,zoom:this.yZoom,options:e.yAxis}].forEach(c=>{const{axis:s,scale:l,zoom:d,options:f}=c;if("string"==typeof f?.minZoom||"string"==typeof f?.maxZoom){const _=d.scaleExtent(),g=this.calcAppropriateNumberOfTicks(s,l,f,a);if("string"==typeof f?.minZoom){const A=Oe(l.domain()[0],l.domain().slice(-1)[0],f.minZoom);_[0]=A/g}if("string"==typeof f?.maxZoom){const A=Oe(l.domain()[0],l.domain().slice(-1)[0],f.maxZoom);_[1]=A/g}d.scaleExtent(_)}}),i.selectAll("defs").data([null]).join(c=>c.append(()=>this.createSVGElement("defs"))).selectAll("clipPath").data(r).join(c=>c.append(()=>this.createSVGElement("clipPath"))).attr("clipPathUnits","userSpaceOnUse").attr("id",(c,s,l)=>{const d=(0,Re.Z)(l[s]);let f;switch(c.className){case this.X_AXIS_CLASS_NAME:f=this.xZoom.translateExtent([[c.viewBox[0],c.viewBox[1]],[c.viewBox[0]+c.viewBox[2],c.viewBox[1]]]);break;case this.Y_AXIS_CLASS_NAME:f=this.yZoom.translateExtent([[c.viewBox[0],c.viewBox[1]],[c.viewBox[0],c.viewBox[1]+c.viewBox[3]]]);break;default:f=this.zoom.translateExtent([[c.viewBox[0],c.viewBox[1]],[c.viewBox[0]+c.viewBox[2],c.viewBox[1]+c.viewBox[3]]])}return f.extent([[c.viewBox[0],c.viewBox[1]],[c.viewBox[0]+c.viewBox[2],c.viewBox[1]+c.viewBox[3]]]),d.selectAll("rect").data([null]).join(_=>_.append(()=>this.createSVGElement("rect"))).attr("x",c.viewBox[0]).attr("y",c.viewBox[1]).attr("width",c.viewBox[2]).attr("height",c.viewBox[3]),this.getClipID(c.className)}),i.select(`.${this.CONTENT_CLASS_NAME}`).attr("clip-path",`url(#${this.getClipID(this.CONTENT_CLASS_NAME)})`).select("rect.canvas-area").attr("fill","transparent").attr("x",a.left).attr("y",a.top).attr("width",a.width).attr("height",a.height)}prepareToRender(){this.renderingObs.next()}createAxisScale(e,a){let i,r;switch(a?.type){case"date":i=(0,Jn.Z)();break;case"string":i=jt();break;default:i=Ht()}switch(a?.position){case"top":if("y"===e)throw new Error("yAxis cannot be placed on horizontal.");r=(0,Yt.F5)(i);break;case"left":if("x"===e)throw new Error("xAxis cannot be placed on vertical.");r=(0,Yt.y4)(i);break;case"right":if("x"===e)throw new Error("xAxis cannot be placed on vertical.");r=(0,Yt.Kh)(i);break;default:if("y"===e)throw new Error("yAxis cannot be placed on horizontal.");r=(0,Yt.LL)(i)}return r.tickSize(5).tickPadding(10),typeof a?.format<"u"&&r.tickFormat(a.format),"x"===e?(this.xAxisScale=i,this.xAxis=r):(this.yAxisScale=i,this.yAxis=r),i}createAxis(e,a,i,r){const c=e.scale(),s=this.getCanvasArea(),l=this.getAxisViewBox(a,s),d=this.content,f=this.calcAppropriateNumberOfTicks(e,c,a,s);let _;if("function"==typeof c.invert)e.ticks("date"===a.type?((n,o,e,a)=>{const i=Math.abs(o-n)/e,r=(0,Wn.Z)(([,,l])=>l).right(Rt,i);if(r===Rt.length)return Vt.jB.every((0,At.ly)(n/Kt,o/Kt,e));if(0===r)return De(a).every(Math.max((0,At.ly)(n,o,e),1));const[c,s]=Rt[i/Rt[r-1][2]<Rt[r][2]/i?r-1:r];return c.every(s)})(c.invert(0).valueOf(),c.invert(s.width).valueOf(),f-2,"string"==typeof a.minZoom?a.minZoom:void 0):f);else{const A=Math.max(1,(0,w.su)(this.data?.length));e.tickValues(function Bn(n,o){if("function"!=typeof o)throw new TypeError("test is not a function");const e=[];let a=-1;for(const i of n)o(i,++a,n)&&e.push(i);return e}(c.domain(),(h,p)=>p%Math.max(1,Math.floor(A/f/(0,w.su)(r.k)))==0))}switch(a?.position){case"left":_=[s.left,0];break;case"right":_=[s.left+s.width,0];break;case"top":_=[0,s.top];break;default:_=[0,s.top+s.height]}const g=d.select(`.${i}`).attr("clip-path",(0,w.Ig)(a?.clipped)?`url(#${this.getClipID(i)})`:"").on("wheel",A=>{A.preventDefault()});g.selectAll("rect").data(A=>[A]).join(A=>A.append(()=>this.createSVGElement("rect"))).attr("x",l[0]).attr("y",l[1]).attr("width",l[2]).attr("height",l[3]).attr("fill","transparent"),g.selectAll("g").data(A=>[A]).join(A=>A.append(()=>this.createSVGElement("g"))).attr("transform",`translate(${_})`).style("user-select","none").call(e).call(A=>{this.setStyle(A,a.font),this.setStyle(A.selectAll(".domain"),a.baseline?.style),this.setStyle(A.selectAll(".tick line"),a.ticks?.style)})}getAxisViewBox(e,a){let i;switch(e?.position){case"top":i=[a.left,0,a.width,a.top];break;case"left":i=[0,a.top,a.left,a.height];break;case"right":i=[a.left+a.width,a.top,a.right,a.height];break;default:i=[a.left,a.top+a.height,a.width,a.bottom]}return i}calcAppropriateNumberOfTicks(e,a,i,r){const c=(0,w.su)(i?.font["font-size"])||14,s=(0,w.su)(i?.padding);let d,f,_,g,l=e.tickFormat();switch(l=null===l?a.tickFormat?a.tickFormat.apply(a,e.tickArguments()):A=>A:l,i?.position){case"left":case"right":d=r.top+r.height,f=r.height,_=c;break;default:const h=this.renderer.createElement("canvas").getContext("2d"),p=u=>"function"==typeof u?.toString?h.measureText(u.toString()).width:0;h.font=`${c}px "${i.font["font-family"]}"`,d=r.left,f=r.width,_=(0,Qn.Z)((a.invert?(0,Me.Z)((0,At.ZP)(d,d+f,f),u=>p(l(a.invert(u),-1))):(0,Me.Z)(a.domain(),u=>p(l(u,-1)))).concat([s]))}return _=Math.ceil(_)+s,g=Math.max(1,Math.floor(f/_)),g}getTransformXAxisScale(){const e=this.xAxisScale,a=this.xTransform;try{return a.rescaleX(e)}catch{return("function"==typeof e.rangeRound?e.copy().rangeRound:e.copy().range)(e.range().map(r=>a.applyX(r)))}}getTransformYAxisScale(){const e=this.yAxisScale,a=this.yTransform;try{return a.rescaleY(e)}catch{return("function"==typeof e.rangeRound?e.copy().rangeRound:e.copy().range)(e.range().map(r=>a.applyY(r)))}}getScaleBoundary(e,a){let i;switch(typeof e){case"boolean":i=e?1/0:1;break;case"number":i=e;break;default:i=1}return i}createSVGElement(e){return this.renderer.createElement(e,"svg")}setStyle(e,a){let i;i="function"==typeof a?a(e.data()):a||{};for(const r in i)e.attr(r,i[r])}createTooltip(){const e=this.injector,a=new qt.gM(this.overlay,new t.SBq(this.getContainer()),e.get($n.mF),e.get(t.s_b),e.get(t.R0b),e.get(Zn.t4),e.get(Se.$s),e.get(Se.tE),e.get(qt.cV),e.get(wn.Is),e.get(qt.Jm),e.get(I.K0)),i=this.options?.tooltip?.component;return i&&(a._portal=new kn.C5(i,e.get(t.s_b))),a.message="_",a.show(),a.hide(),a._overlayRef.updatePositionStrategy(this.tooltipPositionStrategy),a}updateTooltip(e,a){const i=this.tooltip,r=this.injector.get(t.R0b),c=e.offsetX,s=e.offsetY;r.run(()=>{this.tooltipPositionStrategy.withPositions([{offsetX:c,offsetY:s,originX:"start",originY:"top",overlayX:"center",overlayY:"bottom"}]),i.message=`${a}`,i.show()})}enableMultipleSelection(e){return navigator.platform?.toLowerCase().indexOf("mac")>-1?e.metaKey:e.ctrlKey}getClipID(e){return`boundsClip-${this.injector.get(t.AFp)}-${this.id_count}-${e}`}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(HTMLElement),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(te.aV),t.Y36(t.zs3))},n.\u0275dir=t.lG2({type:n,inputs:{data:"data",selection:"selection",options:"options"},features:[t.TTD]}),n})(),qn=(()=>{class n extends xe{constructor(e,a,i,r,c){super((0,w.fI)(e),a,i,r,c),this.renderer=a,this.changeDetectorRef=i,this.overlay=r,this.injector=c,this.createAxisScale("x",this.options.xAxis),this.createAxisScale("y",this.options.yAxis),this.tooltip=this.createTooltip()}ngOnChanges(e){if(super.ngOnChanges(e),["data","options"].some(i=>e[i]&&(e[i].firstChange||e[i].currentValue!==e[i].previousValue))){const i=this.options,r="stacked"===i.layout,c=this.data||[];[{scale:this.xAxisScale,options:i.xAxis,domain:S.UID(c,l=>l[0])},{scale:this.yAxisScale,options:i.yAxis,domain:S.TSy(S.UID(c,l=>S.UID(l.slice(1),r?(d,f)=>S.e3P(l.slice(1,f+2)):d=>Math.abs((0,w.su)(d))))).concat([0])}].forEach(l=>{if("string"===l.options.type)l.scale.domain(l.domain);else{const d=typeof l.options?.min<"u",f=typeof l.options?.max<"u";let _=S.Wem(l.domain);d&&(_[0]=S.VV$([_[0],l.options.min])),f&&(_[1]=S.Fp7([_[1],l.options.max])),l.scale.domain(_),"function"==typeof l.scale.nice&&l.scale.nice()}}),this.setPalette()}this.xTransform&&this.yTransform&&this.prepareToRender()}ngOnInit(){super.ngOnInit(),this.xZoom.on("zoom",e=>{const a=this.xTransform;this.xTransform=e.transform,(a.k!==e.transform.k||a.x!==e.transform.x)&&this.prepareToRender()}),this.yZoom.on("zoom",e=>{const a=this.yTransform;this.yTransform=e.transform,(a.k!==e.transform.k||a.y!==e.transform.y)&&this.prepareToRender()})}render(){this.renderAxes(),this.renderContent()}renderContent(){const e=this.data||[],a=this.getNumOfSeries(e),i=this.options,r="stacked"===i.layout,s=this.getPalette(),l=this.getTransformXAxisScale(),d=this.getTransformYAxisScale(),f=this.content.select(`.${this.CONTENT_CLASS_NAME}`);let _=30;"function"==typeof l.clamp&&l.clamp(!1),"function"==typeof d.clamp&&d.clamp(!1),_="function"==typeof l.bandwidth?l.bandwidth():Math.abs(Math.floor(l(e[0][0])-l(e[1][0]))),f.selectAll("g.bars").data([null]).join(p=>p.append(()=>this.createSVGElement("g"))).attr("class","bars").selectAll("g.bar").data(e).join(p=>p.append(()=>this.createSVGElement("g"))).attr("class","bar").call(p=>{p.selectAll("rect").data(u=>S.UID(u.slice(1),()=>u)).join(u=>u.append(()=>this.createSVGElement("rect"))).attr("fill",(u,T)=>s(T)).attr("x",(u,T)=>l(u[0])+(r?0:_/a*T)).attr("width",r?_:_/a).attr("y",(u,T)=>d(r?T<1?u[T+1]:u[T]:Math.abs(u[T+1]))).attr("height",(u,T)=>d(0)-d(Math.abs(u[T+1])))}).on("mousemove",p=>{this.tooltip&&this.showTooltip(p)}).on("mouseenter",p=>{this.tooltip&&this.showTooltip(p),p.stopPropagation()}).on("mouseleave",p=>{this.tooltip&&this.tooltip.hide(),p.stopPropagation()});const g=new Array(Math.min(1,a)),A=S.q$2(S.OOA,a+2);A.unshift(),A.pop();const h=S.PKp(S.w6H(0,a,1),A);g.length&&(g[0]=a-1),f.selectAll("g.lines").data(g).join(p=>p.append(()=>this.createSVGElement("g"))).attr("class","lines").call(p=>{p.selectAll("path").data(u=>[S.UID(e,T=>[T[0],r?S.e3P(T.slice(1)):T[u]])]).join(u=>u.append(()=>this.createSVGElement("path"))).attr("fill","none").attr("stroke",(u,T)=>h(T)).attr("stroke-width",1).attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("d",S.jvg().curve(S.FdL).x(u=>l(u[0])+_/2).y(u=>d(u[1]))).call(u=>{this.setStyle(u,i.lineStyle)})})}renderAxes(){const e=this.options,a=this.content,i=this.X_AXIS_CLASS_NAME,r=this.Y_AXIS_CLASS_NAME,c=this.getCanvasArea(),s=this.xAxisScale;if("function"==typeof s.bandwidth){const l=s.domain().length,d=(0,w.su)(e.maxBandWidth),f=this.xTransform;s.paddingOuter(Math.max(.01,1-l/(c.width/d))),s.paddingInner(Math.max(.38,s.paddingOuter())),this.xZoom.scaleExtent([1,Math.max(1,d/s.step())]),this.xTransform=new S.axH(f.k,f.x,f.y)}this.createAxis(this.xAxis.scale(this.getTransformXAxisScale()),e.xAxis,i,this.xTransform),this.createAxis(this.yAxis.scale(this.getTransformYAxisScale()),e.yAxis,r,this.yTransform),a.select(`.${i}`).call(this.xZoom).call(this.xZoom.transform,this.xTransform),a.select(`.${r}`).call(l=>{l.selectAll(".tick line").clone().attr("x2",c.width).attr("stroke","#000000").style("stroke-dasharray",d=>0===d?null:"3 3").attr("stroke-opacity",d=>0===d?.5:.2)}).call(this.yZoom)}viewData(e){return this.getTransformXAxisScale()(this.getXValue(e))}invertViewData(e,a=this.data){return a[e]}setViewportExtent(){super.setViewportExtent();const e=this.options,a=this.getCanvasArea();[{scale:this.xAxisScale,options:e.xAxis},{scale:this.yAxisScale,options:e.yAxis}].forEach(r=>{switch(r.options?.position){case"left":case"right":("function"==typeof r.scale.rangeRound?r.scale.rangeRound:r.scale.range)([a.top+a.height,a.top]);break;default:("function"==typeof r.scale.rangeRound?r.scale.rangeRound:r.scale.range)([a.left,a.left+a.width])}})}identifyZoom(){this.xTransform=this.yTransform=S.CRH}showTooltip(e){const a=S.Ys(e.target),i=a.size()?a.data()[0]:null,r=this.options.tooltip?.content,c=i?"function"==typeof r?r(i):S.u4g(i,(s,l)=>s+`${l} \n`,""):"";this.updateTooltip(e,c)}getNumOfSeries(e){return e&&e[0]?e[0].length-1:0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(te.aV),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bar-chart"]],hostAttrs:[1,"chart","chart-bar"],inputs:{data:"data"},features:[t._Bn([{provide:Ct,useValue:vn}]),t.qOj,t.TTD],decls:0,vars:0,template:function(e,a){},styles:["[_nghost-%COMP%]{display:block;overflow:hidden}","svg[_ngcontent-%COMP%]{display:block}"]}),n})(),jn=(()=>{class n extends xe{constructor(e,a,i,r,c,s){super((0,w.fI)(e),a,i,r,c),this.renderer=a,this.changeDetectorRef=i,this.overlay=r,this.injector=c,this.percentPipe=s,this.arc=S.Nb1().startAngle(l=>l.x0).endAngle(l=>l.x1).padAngle(l=>Math.min((l.x1-l.x0)/2,.005)).innerRadius(l=>l.y0).outerRadius(l=>l.y1-1),this.totalDepth=0,this.tooltip=this.createTooltip()}ngOnChanges(e){super.ngOnChanges(e),["data","options"].some(i=>e[i]&&(e[i].firstChange||e[i].currentValue!==e[i].previousValue))&&this.setPalette(),this.prepareToRender()}ngOnInit(){super.ngOnInit()}render(){this.renderContent()}renderContent(){const e=(this.data?this.data[0]:null)||{id:"",name:"",children:[]},a=this.options,i=(0,w.su)(a?.font["font-size"])||14,c=this.getPalette(),s=this.getCanvasArea(),l=Math.min(s.width,s.height)/2,d=this.content.select(`.${this.CONTENT_CLASS_NAME}`),f=this.arc.padRadius(l/2),_=this.root=S.uKc().size([2*Math.PI,l])(S.bT9(e).sum(p=>p.children&&p.children.length?0:p.value).sort((p,u)=>u.value-p.value)),g=this.totalDepth=S.Fp7(_.descendants(),p=>p.depth),A=1/this.totalDepth,h=S.sXR(Math.min(Math.max(A,.4),.9),Math.max(Math.min(1-A,.9),.9));c.domain(S.UID(e.children,p=>p.id)),d.selectAll("text.main").data([e]).join(p=>p.append(()=>this.createSVGElement("text"))).attr("class","main").attr("transform",`translate(${[s.left+s.width/2,s.top+s.height/2]})`).attr("text-anchor","middle").call(p=>{this.setTitle(p,p.data()[0]),this.setStyle(p,a.title?.font)}),d.selectAll("g.part").data(_.descendants().filter(p=>p.depth&&p.x1-p.x0>.001)).join(p=>p.append(()=>this.createSVGElement("g"))).attr("class","part").attr("transform",`translate(${[s.left+s.width/2,s.top+s.height/2]})`).call(p=>{p.selectAll("path").data(u=>u).join(u=>u.append(()=>this.createSVGElement("path"))).attr("fill",(u,T)=>this.getColorByData(u,T).toString()).attr("fill-opacity",u=>h((u.depth+1)/g)).attr("d",f),p.selectAll("text").data(u=>u).join(u=>u.append(()=>this.createSVGElement("text"))).attr("transform",u=>{const T=(u.x0+u.x1)/2*180/Math.PI;return`rotate(${T-90}) translate(${(u.y0+u.y1)/2}, 0) rotate(${T<180?0:180})`}).text(u=>u.depth&&(u.y0+u.y1)/2*(u.x1-u.x0)>i?u.data.name:"").call(u=>{u.attr("dy","0.35em"),this.setStyle(u,a.font)})}).on("mousemove",p=>{this.tooltip&&this.showTooltip(p)}).on("mouseenter",p=>{const u=S.Ys(p.target),T=u.data()[0];u.select("path").attr("fill-opacity",1),this.setTitle(d.select("text.main"),T.data),this.tooltip&&this.showTooltip(p),p.stopPropagation()}).on("mouseleave",p=>{const u=S.Ys(p.target),T=u.data()[0];u.select("path").attr("fill-opacity",h((T.depth+1)/g)),this.setTitle(d.select("text.main"),this.data?this.data[0]:null),this.tooltip&&this.tooltip.hide(),p.stopPropagation()})}renderAxes(){throw new Error("Method not implemented.")}viewData(e){throw new Error("Method not implemented.")}invertViewData(e){return e}setPalette(){const e=this.options,a=this.injector.get(Ct),r=((this.data?this.data[0]:null)||{id:"",name:"",children:[]}).children.length;let c=e.palette,s=e.colors;c&&c.unknown(a.palette.unknown()),c=this.palette=c||a.palette.copy(),(!s||!s.length)&&(s=S.q$2(S.ICD,r+1).reverse(),s.pop()),c.range(s)}identifyZoom(){this.xTransform=this.yTransform=S.CRH}showTooltip(e){const a=this.options.tooltip?.content,i=S.Ys(e.target),r=i.size()?i.data()[0]:null,c=r?"function"==typeof a?a(r.data):`${r.ancestors().map(s=>s.data.name).reverse().join("/")}\n${this.percentPipe.transform(r.value/this.root.value,"0.0-2")}`:"";this.updateTooltip(e,c)}setTitle(e,a){let i="",r=0;a&&(a.name?i=a.name:a.data&&(i=a.data.name),"number"==typeof a.value&&(r=a.value)),e.selectAll(".percentage").data([i,this.getValue(r).toString()]).join(c=>c.append(()=>this.createSVGElement("tspan"))).attr("class","percentage").attr("x",0).attr("y",0).attr("dy",(c,s)=>1.2*s-.1+"em").text(c=>c)}getColorByData(e,a){const i=e.depth;let r=1,c=a%r;for(e.parent&&(r=e.parent.data.children.length,c=a%r,e.parent.data.children.some((_,g)=>e.data.name===_.name&&(c=g,!0)));e.depth>1;)e=e.parent;const s=S.Ym7(this.getPalette()(e.data.id)),l=S.Ym7(s).h,d=1/this.totalDepth;let f=s;if(i>1){const _=S.Ym7(l,Math.max(1-d,.3),Math.max(1-d,.8)),g=S.Ym7(l,1,Math.min(d,.2));f=S.Ym7(S.USs(_,g)(c/r))}return f}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(te.aV),t.Y36(t.zs3),t.Y36(I.Zx))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sunburst-chart"]],hostAttrs:[1,"chart","chart-sunburst"],features:[t._Bn([{provide:Ct,useValue:Pn}]),t.qOj,t.TTD],decls:0,vars:0,template:function(e,a){},styles:["[_nghost-%COMP%]{display:block;overflow:hidden}","svg[_ngcontent-%COMP%]{display:block}"]}),n})();var St=m(4859),y=m(9602),$=m(9549),Nt=m(7392),Lt=m(4385),Bt=m(1299),Vn=m(8811),ee=m(2201);function Kn(n,o){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}let ta=(()=>{class n{constructor(e,a,i,r,c,s,l,d,f){this.elementRef=e,this.currencyPipe=a,this.datePipe=i,this.dateAdapter=r,this.notification=c,this.communication=s,this.datetimeService=l,this.database=d,this.statistics=f,this.currencyValueFormat=_=>this.currencyPipe.transform(_/100,"CNY","symbol-narrow","0.0-2"),this.dateRange=new E.cw({start:new E.NI(null),end:new E.NI(null)}),this.books=[],this.totalBalance="",this.sunburstChartOptions={valueFun:this.currencyValueFormat},this.barChartOptions={layout:"stacked",lineStyle:{stroke:"#5e92a8","stroke-width":2},valueFun:this.currencyValueFormat,tooltip:{content:_=>`${this.datePipe.transform(_[0],"MMMM, y")}\n        \t ${_.slice(1).reduce((g,A,h)=>g+`${h>0?"\n":""} ${A<0?"":"+"}${this.currencyValueFormat(A)}`,"")}\n        \t =${this.currencyValueFormat(_.slice(1).reduce((g,A)=>g+A,0))}\n      `},xAxis:{baseline:{style:{stroke:"#808080"}},font:{color:"#808080"},format:_=>this.datePipe.transform(_,"MMM, y")},yAxis:{baseline:{style:{stroke:"transparent"}},font:{color:"#808080"},format:this.currencyValueFormat}},this.subscription=new ot.w0}ngOnInit(){this.dateRange.valueChanges.subscribe(()=>{this.communication.giveRefreshCommand()}),this.datetimeService.initTimeRange(this.dateRange)}ngAfterViewInit(){setTimeout(()=>{this.database.getBooks().subscribe(e=>{this.books=e.data.books,this.selectedBook=this.books[0].id,this.initRefreshIndicator()})})}ngOnDestroy(){this.subscription.unsubscribe(),this.datetimeService.destoryTimeRange()}onBookSelectionChange(e){this.communication.giveRefreshCommand()}prevYear(){const a=this.dateAdapter.getYear(this.dateRange.value.start)-1;this.dateRange.setValue({start:this.dateAdapter.createDate(a,0,1),end:this.dateAdapter.createDate(a,11,31)})}nextYear(){const a=this.dateAdapter.getYear(this.dateRange.value.end)+1;this.dateRange.setValue({start:this.dateAdapter.createDate(a,0,1),end:this.dateAdapter.createDate(a,11,31)})}prevMonth(){const e=this.dateAdapter;let a=e.clone(this.dateRange.value.start),i=e.today();a=e.createDate(e.getYear(a),e.getMonth(a)-1,1),i=e.createDate(e.getYear(a),e.getMonth(a)+1,1),i=e.addCalendarDays(i,-1),this.dateRange.setValue({start:a,end:i})}nextMonth(){const e=this.dateAdapter;let i,a=this.dateAdapter.clone(this.dateRange.value.end);a=e.createDate(e.getYear(a),e.getMonth(a)+2,1),a=e.addCalendarDays(a,-1),i=e.createDate(e.getYear(a),e.getMonth(a),1),this.dateRange.setValue({start:i,end:a})}showAllHistory(){this.dateRange.setValue({start:this.datetimeService.getMinDate(),end:this.datetimeService.getMaxDate()})}initRefreshIndicator(){this.subscription.add(this.communication.acceptRefreshCommand().pipe((0,rt.b)(500),(0,_n.O)({}),(0,Xt.w)(()=>{let e=this.dateRange.controls.start.value,a=this.dateRange.controls.end.value;return this.dateRange.invalid?(0,v.of)(null):(this.notification.showLoading(this.elementRef.nativeElement),e&&a?(e=this.dateAdapter.deserialize(this.datetimeService.getStartDatetime(e)),a=this.dateAdapter.deserialize(this.datetimeService.getEndDatetime(a)),(0,it.D)([this.assemblePayCategoriesStatistics(e,a),this.assembleRevenueCategoriesStatistics(e,a),this.assembleRevenueNExpenditureStatistics(e,a)])):(0,v.of)(null))}),(0,Z.x)(()=>{this.notification.hideLoading()})).subscribe(()=>{this.notification.hideLoading()}))}assemblePayCategoriesStatistics(e,a){return(0,it.D)([this.database.getEntryCategories(this.selectedBook,ct.PAY),this.statistics.getCategoryStatistics(this.selectedBook,e,a,1),this.statistics.getCategoryStatistics(this.selectedBook,e,a,2)]).pipe((0,W.K)(()=>(0,v.of)([])),(0,U.U)(i=>{let r=!1;if(i.forEach(d=>{d.error&&(r=!0),r=!d.data||r}),r)return void(this.payCategoriesData=[]);const c=i[0].data.bookCategories,s=i[1].data,l=i[2].data.groups;return this.payCategoriesData=[{id:"_",name:s.title,value:s.totalAmount,children:s.groups.map(d=>{const f=d.id,_=c.find(A=>A.categoryId===f)?.outgoSubTypes,g=l.filter(A=>_.some(h=>h.categoryId===A.id)).map(A=>({id:A.id,name:A.name,value:A.amount}));return{id:d.id,name:d.name,value:d.amount,children:g}})}],null}))}assembleRevenueCategoriesStatistics(e,a){return this.statistics.getCategoryStatistics(this.selectedBook,e,a,6).pipe((0,W.K)(()=>(0,v.of)({})),(0,U.U)(i=>{const r=i.data;if(r&&r.groups)return this.revenueCategoriesData=[{id:"_",name:r.title,value:r.totalAmount,children:r.groups.map(c=>({id:c.id,name:c.name,value:c.amount}))}],null;this.revenueCategoriesData=[]}))}assembleRevenueNExpenditureStatistics(e,a){return this.statistics.getRevenueNExpenditureStatistics(this.selectedBook,e,a,11).pipe((0,W.K)(()=>(0,v.of)({})),(0,U.U)(i=>{const r=this.dateAdapter,c=i.data;if(c){if(this.totalBalance=c.currency+" "+c.totalBalance/100,!c.groups)return void(this.revNExpndData=[]);this.revNExpndData=c.groups.map(s=>[r.deserialize(s.startTime),s.balanceMoney+s.outgoMoney,-s.outgoMoney])}else this.totalBalance="",this.revNExpndData=[];return null}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(I.H9),t.Y36(I.uU),t.Y36(Q._A),t.Y36(st.g),t.Y36(ft.O),t.Y36(Wt.d),t.Y36(_t),t.Y36(_e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],hostAttrs:[1,"d-flex","flex-column","flex-nowrap","w-100","h-100"],decls:51,vars:20,consts:function(){let o;return o="\u8D26\u672C",[["role","group",1,"btn-group"],["mat-button","",3,"for"],["matDatepickerToggleIcon",""],["type","button","mat-button","",3,"click"],["appearance","legacy","floatLabel","never",1,"mat-mini","mat-form-field-outline"],o,["name","book",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"align-middle","ms-2"],[1,"visually-hidden",3,"formGroup","rangePicker"],["matStartDate","","formControlName","start"],["matEndDate","","formControlName","end"],["dateRangePicker",""],[1,"flex-fill","px-2",2,"overflow-x","hidden","overflow-y","auto"],[1,"row"],[1,"col-12","col-lg-6","py-2","sunburst-chart"],[3,"data","options"],[1,"col-12","py-2","bar-chart"],[3,"value"]]},template:function(e,a){if(1&e&&(t.TgZ(0,"app-operation-toolbar")(1,"div",0)(2,"mat-datepicker-toggle",1)(3,"mat-icon",2),t._uU(4,"date_range"),t.qZA()(),t.TgZ(5,"button",3),t.NdJ("click",function(){return a.showAllHistory()}),t.TgZ(6,"mat-icon"),t._uU(7,"history_toggle_off"),t.qZA()(),t.TgZ(8,"button",3),t.NdJ("click",function(){return a.prevYear()}),t.TgZ(9,"mat-icon"),t._uU(10,"first_page"),t.qZA()(),t.TgZ(11,"button",3),t.NdJ("click",function(){return a.prevMonth()}),t.TgZ(12,"mat-icon"),t._uU(13,"chevron_left"),t.qZA()(),t.TgZ(14,"button",3),t.NdJ("click",function(){return a.nextMonth()}),t.TgZ(15,"mat-icon"),t._uU(16,"chevron_right"),t.qZA()(),t.TgZ(17,"button",3),t.NdJ("click",function(){return a.nextYear()}),t.TgZ(18,"mat-icon"),t._uU(19,"last_page"),t.qZA()()(),t.TgZ(20,"mat-form-field",4)(21,"mat-label"),t.ynx(22),t.SDv(23,5),t.BQk(),t.qZA(),t.TgZ(24,"mat-select",6),t.NdJ("valueChange",function(r){return a.selectedBook=r})("selectionChange",function(r){return a.onBookSelectionChange(r)}),t.YNc(25,Kn,2,2,"mat-option",7),t.qZA()()(),t.TgZ(26,"app-breadcrumb")(27,"span",8),t._uU(28),t.ALo(29,"date"),t.ALo(30,"date"),t.qZA()(),t.TgZ(31,"mat-date-range-input",9),t._UZ(32,"input",10)(33,"input",11),t.qZA(),t._UZ(34,"mat-date-range-picker",null,12),t.TgZ(36,"div",13)(37,"div",14)(38,"div",15)(39,"mat-card")(40,"mat-card-content"),t._UZ(41,"app-sunburst-chart",16),t.qZA()()(),t.TgZ(42,"div",15)(43,"mat-card")(44,"mat-card-content"),t._UZ(45,"app-sunburst-chart",16),t.qZA()()()(),t.TgZ(46,"div",14)(47,"div",17)(48,"mat-card")(49,"mat-card-content"),t._UZ(50,"app-bar-chart",16),t.qZA()()()()()),2&e){const i=t.MAs(35);t.xp6(2),t.Q6J("for",i),t.xp6(22),t.Q6J("value",a.selectedBook),t.xp6(1),t.Q6J("ngForOf",a.books),t.xp6(3),t.lnq(" (",t.xi3(29,14,a.dateRange.value.start,"longDate")," - ",t.xi3(30,17,a.dateRange.value.end,"longDate")," => ",a.totalBalance,") "),t.xp6(3),t.Q6J("formGroup",a.dateRange)("rangePicker",i),t.xp6(10),t.Q6J("data",a.payCategoriesData)("options",a.sunburstChartOptions),t.xp6(4),t.Q6J("data",a.revenueCategoriesData)("options",a.sunburstChartOptions),t.xp6(5),t.Q6J("data",a.revNExpndData)("options",a.barChartOptions)}},dependencies:[qn,jn,I.sg,nn,en,E.Fj,E.JJ,E.JL,St.lW,y.nW,y.Q0,y.wx,y.zY,y.By,y._g,$.KE,$.hX,Nt.Hw,Lt.gD,Q.ey,E.sg,E.u,Bt.L,Vn.U,ee.e],styles:[".mat-button-base[_ngcontent-%COMP%]{border-radius:0}.sunburst-chart[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{height:calc(60vh - 140px);min-height:300px}.bar-chart[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{height:calc(40vh - 100px);min-height:300px}.chart[_ngcontent-%COMP%]{width:100%;height:100%}"]}),n})(),ve=(()=>{class n{constructor(e){this.requestService=e}getBankList(){return this.requestService.get("setting/account_bankList.action",{type:""})}getCardTypeList(){return this.requestService.get("setting/account_cardList.action",{type:""})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ot.s))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var ne=m(4159),ae=m(636),oe=m(7633);function ea(n,o){1&n&&(t.TgZ(0,"th",16),t.ynx(1),t.SDv(2,17),t.BQk(),t.qZA())}function na(n,o){if(1&n&&(t.TgZ(0,"td",18),t._uU(1),t.TgZ(2,"span",19),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",e.name," "),t.xp6(2),t.Oqu(e.tailNo)}}function aa(n,o){1&n&&(t.TgZ(0,"th",16),t.ynx(1),t.SDv(2,20),t.BQk(),t.qZA())}function oa(n,o){if(1&n&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.groupName)}}function ia(n,o){1&n&&(t.TgZ(0,"th",16),t.ynx(1),t.SDv(2,21),t.BQk(),t.qZA())}function ra(n,o){if(1&n&&(t.TgZ(0,"td",18),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.AsE("",e.moneyType.flag," ",t.xi3(2,2,e.balanceMoney,"0.2-2"),"")}}function ca(n,o){1&n&&t._UZ(0,"th",22)}function sa(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",18)(1,"button",23),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.goToEntryList(r))}),t.TgZ(2,"mat-icon"),t._uU(3,"receipt"),t.qZA()()()}}function _a(n,o){1&n&&t._UZ(0,"tr",24)}function la(n,o){1&n&&t._UZ(0,"tr",25)}function da(n,o){1&n&&(t.TgZ(0,"th",16),t.ynx(1),t.SDv(2,26),t.BQk(),t.qZA())}function ua(n,o){if(1&n&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.name)}}function ma(n,o){1&n&&(t.TgZ(0,"th",16),t.ynx(1),t.SDv(2,27),t.BQk(),t.qZA())}function ga(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.groupName," ")}}function pa(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",33),t._uU(2),t.ALo(3,"lowercase"),t.qZA(),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,null==e.bank?null:e.bank.ename))}}function fa(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"img",34),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("alt",null==e.bank?null:e.bank.ename)("src",e.iconUrl,t.LSH)}}function Aa(n,o){if(1&n&&(t.ynx(0,31),t.YNc(1,pa,4,3,"ng-container",29),t.YNc(2,fa,2,2,"ng-container",32),t._uU(3),t.BQk()),2&n){const e=t.oxw().$implicit;t.Q6J("ngSwitch",2===e.type&&!e.iconUrl),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(2),t.hij(" ",e.tailNo," ")}}function ha(n,o){1&n&&(t.TgZ(0,"td",28),t.YNc(1,ga,2,1,"ng-container",29),t.YNc(2,Aa,4,3,"ng-container",30),t.qZA()),2&n&&(t.Q6J("ngSwitch",!o.$implicit.name),t.xp6(1),t.Q6J("ngSwitchCase",!0))}function Ea(n,o){if(1&n&&(t.TgZ(0,"th",16),t.ynx(1),t.SDv(2,35),t.BQk(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.totalBalance," ")}}function Ca(n,o){if(1&n&&(t.TgZ(0,"td",18),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.AsE("",e.moneyType.flag," ",t.xi3(2,2,e.balanceMoney,"0.2-2"),"")}}function Ta(n,o){1&n&&t._UZ(0,"th",22)}function Sa(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.goToEntryList(i))}),t.TgZ(1,"mat-icon"),t._uU(2,"receipt"),t.qZA()()}}function Na(n,o){if(1&n&&(t.TgZ(0,"td",18),t.YNc(1,Sa,3,0,"button",36),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!!e.uuid)}}function ba(n,o){1&n&&t._UZ(0,"tr",24)}function Ma(n,o){1&n&&t._UZ(0,"tr",25),2&n&&t.ekj("table-primary",!o.$implicit.name)}let Ia=(()=>{class n{constructor(e,a,i,r,c,s,l){this.route=e,this.router=a,this.elementRef=i,this.communication=r,this.notification=c,this.databaseService=s,this.additionalData=l,this.displayedColumns=["name","groupName","balanceMoney","tailNo"],this.totalBalance="",this.subscription=new ot.w0,this.dataSource=new M.by,this.secondaryDataSource=new M.by}ngOnInit(){this.subscription.add(this.communication.acceptRefreshCommand().pipe((0,rt.b)(300)).subscribe(()=>{this.updateAccounts()})),this.communication.giveRefreshCommand()}ngOnDestroy(){this.subscription.unsubscribe()}goToEntryList(e){this.router.navigate(["accounts",e.uuid],{queryParams:{title:e.name},relativeTo:this.route.parent})}updateAccounts(){this.notification.showLoading(this.elementRef.nativeElement),(0,it.D)([this.databaseService.getVisibleAccountList(),this.databaseService.getHiddenAccountList(),this.additionalData.getBankList()]).pipe((0,Z.x)(()=>{this.notification.hideLoading()})).subscribe(e=>{const a=e[0],i=e[1],r=e[2].banks,c=a.data.accountSummary[0];let l,s=[];a.data.accountList.forEach(d=>{d.accountData.forEach(f=>{l=r.find(_=>f.bankId===_.id.toString()),f.groupName=d.groupName,f.balanceMoney=f.balanceMoney/100,f.bank=l}),s.push({name:"",groupName:d.groupName,balanceMoney:d.groupMoney.summaryAssets/100,moneyType:d.groupMoney.allMoneyCategory[0].moneyType}),s=s.concat(d.accountData)}),this.dataSource.data=s,this.totalBalance=c.moneyType.flag+" "+c.assets/100,this.secondaryDataSource.data=i.data})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(J.gz),t.Y36(J.F0),t.Y36(t.SBq),t.Y36(ft.O),t.Y36(st.g),t.Y36(_t),t.Y36(ve))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-accounts"]],hostAttrs:[1,"d-flex","flex-column","flex-nowrap","w-100","h-100"],decls:36,vars:8,consts:function(){let o,e,a,i,r,c;return o="\u540D\u79F0",e="\u7C7B\u578B",a="\u4F59\u989D/\u6B20\u6B3E",i="\u540D\u79F0",r="\u7C7B\u578B",c="\u4F59\u989D/\u6B20\u6B3E",[["appStartContent","",1,"d-flex","flex-column","h-100"],[1,"w-100","h-100","overflow-auto"],["mat-table","",1,"table","table-sm","table-bordered","table-striped","table-hover","table-narrow","w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","groupName"],["matColumnDef","balanceMoney"],["matColumnDef","tailNo","stickyEnd","true"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"w-100","mh-100","overflow-auto","main-content"],["mat-cell","",3,"ngSwitch",4,"matCellDef"],["matColumnDef","tailNo"],["mat-row","",3,"table-primary",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],o,["mat-cell",""],[1,"text-muted"],e,a,["mat-header-cell","","width","1"],["type","button","mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],i,r,["mat-cell","",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[3,"ngSwitch"],[4,"ngSwitchDefault"],["fontSet","Marching"],["width","32","height","32",3,"alt","src"],c,["type","button","mat-icon-button","","color","primary","y","",3,"click",4,"ngIf"],["type","button","mat-icon-button","","color","primary","y","",3,"click"]]},template:function(e,a){1&e&&(t._UZ(0,"app-default-operation-toolbar")(1,"app-breadcrumb"),t.TgZ(2,"app-two-cols-layout")(3,"div",0)(4,"div",1)(5,"table",2),t.ynx(6,3),t.YNc(7,ea,3,0,"th",4),t.YNc(8,na,4,2,"td",5),t.BQk(),t.ynx(9,6),t.YNc(10,aa,3,0,"th",4),t.YNc(11,oa,2,1,"td",5),t.BQk(),t.ynx(12,7),t.YNc(13,ia,3,0,"th",4),t.YNc(14,ra,3,5,"td",5),t.BQk(),t.ynx(15,8),t.YNc(16,ca,1,0,"th",9),t.YNc(17,sa,4,0,"td",5),t.BQk(),t.YNc(18,_a,1,0,"tr",10),t.YNc(19,la,1,0,"tr",11),t.qZA()()(),t.TgZ(20,"div",12)(21,"table",2),t.ynx(22,3),t.YNc(23,da,3,0,"th",4),t.YNc(24,ua,2,1,"td",5),t.BQk(),t.ynx(25,6),t.YNc(26,ma,3,0,"th",4),t.YNc(27,ha,3,2,"td",13),t.BQk(),t.ynx(28,7),t.YNc(29,Ea,4,1,"th",4),t.YNc(30,Ca,3,5,"td",5),t.BQk(),t.ynx(31,14),t.YNc(32,Ta,1,0,"th",9),t.YNc(33,Na,2,1,"td",5),t.BQk(),t.YNc(34,ba,1,0,"tr",10),t.YNc(35,Ma,1,2,"tr",15),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("dataSource",a.secondaryDataSource),t.xp6(13),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("dataSource",a.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns))},dependencies:[I.O5,I.RF,I.n9,I.ED,St.lW,Nt.Hw,M.BZ,M.fO,M.as,M.w1,M.Dz,M.nj,M.ge,M.ev,M.XQ,M.Gk,Bt.L,ne.Y,ae.o,oe.h,I.i8,I.JJ],styles:[".table[_ngcontent-%COMP%]{font-size:.75rem}img[_ngcontent-%COMP%]{width:32px;height:32px;vertical-align:middle}"]}),n})();var Pe=m(5017),Ra=m(6451),we=m(8505);class $e extends M._4{constructor(o,e,a=!0,i=!0){super(),this.remoteSourceFn=o,this.dataConverter=e,this.remotePagetion=a,this.readied=i,this.loading=!1,this.pageSizeOptions=[20,50,100],this.responseError=new t.vpe,this.countId=0,this.pageTokenMap=new Map}reset(){const o=this.paginator;this.pageTokenMap.clear(),o&&(o.pageIndex=0),this.reload()}reload(){this.load().subscribe()}_updateChangeSubscription(){super._updateChangeSubscription();const o=this.paginator;let e;o&&(o.pageSizeOptions=this.pageSizeOptions,this.pageSize=o.pageSize),e=this.remotePagetion&&o?(0,Ra.T)(o.page.pipe((0,kt.h)(i=>this.pageSize===i.pageSize||(this.pageSize=i.pageSize,this.reset(),!1))),o.initialized):(0,v.of)(null);const a=e.pipe((0,kt.h)(()=>this.readied&&!!this.pageTokenMap),(0,Xt.w)(()=>this.load()));this.dataSubscription?.unsubscribe(),this.dataSubscription=a.subscribe()}_pageData(o){return this.remotePagetion?o:super._pageData(o)}_updatePaginator(o){!this.remotePagetion&&super._updatePaginator(o)}load(){const o=this.paginator,e=(0,v.of)(null);return o?e.pipe((0,we.b)(()=>{this.loading=!0,this.countId++,o.disabled=!0}),(0,Xt.w)(()=>{const a=this.countId,i=new pt.kl;return i.pageSize=o.pageSize,i.pageIndex=o.pageIndex,this.remoteSourceFn(i,this.pageTokenMap.get(o.pageIndex)||"").pipe((0,W.K)(r=>(this.responseError.emit(r),(0,v.of)({}))),(0,Z.x)(()=>{this.loading=a!==this.countId&&this.loading}))}),(0,U.U)(a=>{const i=this.dataConverter(a);return this.data=i,o.disabled=!1,i})):e}}var Ze=m(598);let Dt=(()=>{class n{constructor(e){this.router=e}addNewOne(e,a){this.router.navigate([{outlets:{secondary:["entry","add",e]}}],{queryParamsHandling:"preserve",relativeTo:a})}edit(e,a){let i;i=null===e.recType?["balance",e.id]:["entry",e.bkId,e.id],this.router.navigate([{outlets:{secondary:i}}],{queryParamsHandling:"preserve",relativeTo:a,state:e})}closeSecondaryOutlet(e){this.router.navigate([{outlets:{secondary:null}}],{queryParamsHandling:"preserve",relativeTo:e})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(J.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var ke=m(6709),ie=m(4144);function ya(n,o){if(1&n&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Da(n,o){1&n&&(t.ynx(0),t.SDv(1,70),t.BQk())}function Oa(n,o){1&n&&(t.ynx(0),t.SDv(1,71),t.BQk())}function xa(n,o){1&n&&(t.ynx(0),t.SDv(1,72),t.BQk())}function va(n,o){1&n&&(t.ynx(0),t.SDv(1,73),t.BQk())}function Pa(n,o){1&n&&(t.ynx(0),t.SDv(1,74),t.BQk())}function wa(n,o){if(1&n&&(t.TgZ(0,"mat-option",15),t.ynx(1,68),t.YNc(2,Da,2,0,"ng-container",69),t.YNc(3,Oa,2,0,"ng-container",69),t.YNc(4,xa,2,0,"ng-container",69),t.YNc(5,va,2,0,"ng-container",69),t.YNc(6,Pa,2,0,"ng-container",69),t.BQk(),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("ngSwitch",e),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngSwitchCase",5)}}function $a(n,o){if(1&n&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function Za(n,o){if(1&n&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function ka(n,o){if(1&n&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function Ya(n,o){if(1&n&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function La(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"th",75)(1,"mat-checkbox",76),t.NdJ("change",function(i){t.CHM(e);const r=t.oxw();return t.KtG(i?r.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("matBadge",e.selection.selected.length)}}function Ba(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",77)(1,"mat-checkbox",78),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(i?s.selection.toggle(c):null)}),t.qZA()()}if(2&n){const e=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("checked",a.selection.isSelected(e))}}function Qa(n,o){1&n&&(t.TgZ(0,"th",79),t.ynx(1),t.SDv(2,80),t.BQk(),t.qZA())}function Ga(n,o){if(1&n&&(t.TgZ(0,"td",77)(1,"span",81),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,e.bizTime,"yyyy-MM-dd HH:mm:ss"))}}function Ja(n,o){1&n&&(t.TgZ(0,"th",79),t.ynx(1),t.SDv(2,82),t.BQk(),t.qZA())}function Xa(n,o){1&n&&(t.TgZ(0,"mat-icon",89),t._uU(1,"remove"),t.qZA())}function Wa(n,o){1&n&&(t.TgZ(0,"mat-icon",90),t._uU(1,"add"),t.qZA())}function Ua(n,o){if(1&n&&(t.TgZ(0,"mat-icon",91),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Oqu(e.targetId===a.accountId?"add":"remove")}}function za(n,o){if(1&n&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.ekj("text-info",0===e.recSubtype)("text-warning",0!==e.recSubtype),t.xp6(1),t.hij(" ",0===e.recSubtype?"add":"remove"," ")}}function Ha(n,o){if(1&n&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.ekj("text-info",0===e.recSubtype)("text-warning",0!==e.recSubtype),t.xp6(1),t.hij(" ",0===e.recSubtype?"add":"remove"," ")}}function Fa(n,o){1&n&&(t.TgZ(0,"mat-icon",91),t._uU(1,"help_outline"),t.qZA())}function qa(n,o){if(1&n&&(t.TgZ(0,"td",83),t.YNc(1,Xa,2,0,"mat-icon",84),t.YNc(2,Wa,2,0,"mat-icon",85),t.YNc(3,Ua,2,1,"mat-icon",86),t.YNc(4,za,2,5,"mat-icon",87),t.YNc(5,Ha,2,5,"mat-icon",87),t.YNc(6,Fa,2,0,"mat-icon",88),t._uU(7),t.ALo(8,"number"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("ngSwitch",e.recType),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngSwitchCase",5),t.xp6(2),t.AsE(" ",e.currencyFlag," ",t.xi3(8,8,e.amount/100,"0.2-2")," ")}}function ja(n,o){1&n&&(t.TgZ(0,"th",79),t.ynx(1),t.SDv(2,92),t.BQk(),t.qZA())}function Va(n,o){if(1&n&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.categoryName," ")}}function Ka(n,o){1&n&&(t.TgZ(0,"th",79),t.ynx(1),t.SDv(2,94),t.BQk(),t.qZA())}function to(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=o.$implicit,a=o.last;t.xp6(1),t.AsE(" ",e.name,"",a?"":"/"," ")}}function eo(n,o){if(1&n&&(t.TgZ(0,"td",93),t.YNc(1,to,2,2,"ng-container",95),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.members)}}function no(n,o){1&n&&(t.TgZ(0,"th",79),t.ynx(1),t.SDv(2,96),t.BQk(),t.qZA())}function ao(n,o){if(1&n&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.tradetgtName)}}function oo(n,o){1&n&&(t.TgZ(0,"th",79),t.ynx(1),t.SDv(2,97),t.BQk(),t._uU(3,"/ "),t.ynx(4),t.SDv(5,98),t.BQk(),t.qZA())}function io(n,o){if(1&n&&(t.ynx(0)(1),t._uU(2),t.BQk()()),2&n){const e=o.$implicit,a=o.last;t.xp6(2),t.AsE("",e.name,"",a?"":", ","")}}function ro(n,o){if(1&n&&(t.TgZ(0,"td",99)(1,"small",81),t.YNc(2,io,3,2,"ng-container",95),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"small",81),t._uU(5),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Q6J("ngForOf",e.tags),t.xp6(3),t.Oqu(e.accountName)}}function co(n,o){1&n&&(t.TgZ(0,"th",79),t.ynx(1),t.SDv(2,100),t.BQk(),t.qZA())}function so(n,o){if(1&n&&(t.TgZ(0,"td",101)(1,"span",102),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.comment)}}function _o(n,o){1&n&&t._UZ(0,"th",103)}function lo(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",77)(1,"button",104),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.edit(r))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function uo(n,o){if(1&n&&(t.TgZ(0,"td",77),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=o.$implicit,a=t.oxw();t.uIk("colspan",a.displayedColumns.length),t.xp6(1),t.AsE(" ",t.xi3(2,3,e.bizTime,"yyyy-MM-dd EEEE")," \xa0\xa0\xa0\xa0\xa0 ",e.comment," ")}}function mo(n,o){1&n&&t._UZ(0,"tr",105)}function go(n,o){1&n&&t._UZ(0,"tr",106)}function po(n,o){1&n&&t._UZ(0,"tr",107)}const fo=function(){return["daySummary"]};let Ao=(()=>{class n{constructor(e,a,i,r,c,s,l,d,f){this.route=e,this.elementRef=a,this.dateAdapter=i,this.algorithm=r,this.communication=c,this.notification=s,this.datetimeService=l,this.databaseService=d,this.operation=f,this.books=[],this.recordTypes=[R.PAY,R.REVENUE,R.TRANSFER,R.BORROW,R.RETURN],this.accounts=[],this.projects=[],this.members=[],this.payCategories=[],this.txnObjects=[],this.searchKeys={bkId:null,startTime:0,endTime:0,amountStart:null,amountEnd:null,comment:null,recTypeList:null,mainTypeIdList:null,subTypeIdList:null,accountIdList:null,projectIdList:null,tradetgtIdList:null,memberIdList:null,reimburseList:null,categoryIdList:null,queryFlowCount:!0},this.displayedColumns=[],this.selection=new Pe.Ov(!0,[]),this.range=new E.cw({start:new E.NI(null),end:new E.NI(null)}),this.deleting=!1,this.columnsToDisplay=["select","bizTime","amount","categoryName","members","tradetgtName","tags","comment","operation"],this.subscription=new ot.w0,this.isSummary=(_,g)=>!g.id,this.isNotSummary=(_,g)=>!!g.id,this.dataSource=new $e(_=>{const g=this.range.controls.start.value,A=this.range.controls.end.value,h={...this.searchKeys,startTime:g?this.datetimeService.getStartDatetime(g).valueOf():null,endTime:A?this.datetimeService.getEndDatetime(A).valueOf():null,pageSize:_.pageSize,pageIndex:_.pageIndex+1};let p;for(const u in h)p=h[u],Array.isArray(p)&&!p.length&&(h[u]=null);return this.notification.showLoading(this.elementRef.nativeElement),this.databaseService.queryEntries(h).pipe((0,W.K)(()=>(0,v.of)({code:500,data:{dailyItems:[],flowCount:0},error:""})))},_=>{const g=this.dateAdapter,A=this.accounts;let h=[];return this.selection.clear(),this.notification.hideLoading(),_?.data?.dailyItems?.forEach(p=>{h.push({bizTime:g.toIso8601(g.deserialize(p.date)),comment:" + "+p.income+"   |   - "+p.outgo}),p.flowList.forEach(u=>{u.accountName=A.find(T=>T.uuid===u.accountId)?.name}),h=h.concat(p.flowList)}),this.paginator.length=(0,w.su)(_?.data?.flowCount),h},!0,!1)}ngOnInit(){this.dataSource.paginator=this.paginator,this.datetimeService.initTimeRange(this.range),this.displayedColumns=this.columnsToDisplay,(0,it.D)([this.databaseService.getBooks(),this.databaseService.getShortAccounts()]).pipe((0,Z.x)(()=>{this.notification.hideLoading()})).subscribe(e=>{this.books=e[0].data.books;const a=this.books[0];a&&(this.searchKeys.bkId=a.id,this.dataSource.readied=!0,this.onBookSelectionChange({value:a.id})),this.accounts=e[1].data.accounts,this.initRefreshIndicator()})}ngOnDestroy(){this.datetimeService.destoryTimeRange(),this.operation.closeSecondaryOutlet(this.route.parent),this.subscription.unsubscribe()}onBookSelectionChange(e){const a=e.value;this.notification.showLoading(this.elementRef.nativeElement),(0,it.D)([this.databaseService.getTransactionObjects(a),this.databaseService.getBookProjects(a),this.databaseService.getMembers(a),this.databaseService.getEntryCategories(a,ct.PAY)]).pipe((0,Z.x)(()=>{this.notification.hideLoading(),this.communication.giveRefreshCommand()})).subscribe(i=>{this.txnObjects=i[0].data.bookTradeTargets,this.projects=i[1].data.bookProjects,this.members=i[2].data.bookMembers,this.payCategories=i[3].data.bookCategories})}isAllSelected(){const a=this.dataSource.data.length;return a>0&&this.selection.selected.length===a}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}search(){this.dataSource.reset()}reset(){const e=this.dateAdapter,a=this.searchKeys,i=e.today(),r=e.createDate(e.getYear(i),e.getMonth(i),1);this.range.setValue({start:r,end:i}),a.bkId=this.books[0].id,a.amountStart=null,a.amountEnd=null,a.comment=null,a.recTypeList=null,a.mainTypeIdList=null,a.subTypeIdList=null,a.accountIdList=null,a.projectIdList=null,a.tradetgtIdList=null,a.memberIdList=null,a.reimburseList=null,this.dataSource.reset()}addNewOne(){this.operation.addNewOne("new",this.route.parent)}edit(e){this.operation.edit(e,this.route.parent)}delete(){const e=this.selection.selected.map(a=>a.id);!e.length||this.deleting||(this.deleting=!0,this.notification.showLoading(this.elementRef.nativeElement),this.databaseService.deleteEntries(e).pipe((0,Z.x)(()=>{this.deleting=!1,this.notification.hideLoading(),this.communication.giveRefreshCommand()})).subscribe())}initRefreshIndicator(){this.subscription.add(this.communication.acceptRefreshCommand().pipe((0,rt.b)(300)).subscribe(()=>{this.dataSource.reload()}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(J.gz),t.Y36(t.SBq),t.Y36(Q._A),t.Y36(Ze.e),t.Y36(ft.O),t.Y36(st.g),t.Y36(Wt.d),t.Y36(_t),t.Y36(Dt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search-entries"]],viewQuery:function(e,a){if(1&e&&t.Gf(pt.NW,7),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first)}},hostAttrs:[1,"d-flex","flex-column","flex-nowrap","w-100","h-100"],decls:120,vars:33,consts:function(){let o,e,a,i,r,c,s,l,d,f,_,g,A,h,p,u,T,G,k,tt,D,lt,dt,et,ut,nt,N,Y,O,L,at;return o="\u8D26\u672C",e="\u67E5\u8BE2\u65E5\u671F\u8303\u56F4",a="\u5F00\u59CB\u65E5\u671F",i="\u7ED3\u675F\u65E5\u671F",r="\u7C7B\u578B",c="\u4F59\u989D\u53D8\u66F4",s="\u91D1\u989D",l="\u5907\u6CE8",d="\u8D26\u6237",f="\u6210\u5458",_="\u4EA4\u6613\u5BF9\u8C61",g="\u6807\u7B7E",A="\u62A5\u9500",h="\u5F85\u62A5\u9500",p="\u5DF2\u62A5\u9500",u="\u975E\u62A5\u9500",T="\u641C\u7D22",G="\u91CD\u7F6E",k="\u652F\u51FA",tt="\u6536\u5165",D="\u8F6C\u8D26",lt="\u501F\u8D37(\u5165\u8D26)",dt="\u501F\u8D37(\u51FA\u8D26)",et="\u65F6\u95F4",ut="\u91D1\u989D",nt="\u7C7B\u522B",N="\u6210\u5458",Y="\u4EA4\u6613\u5BF9\u8C61",O="\u6807\u7B7E",L="\u8D26\u6237",at="\u5907\u6CE8",[[3,"new","delete"],["appStartContent","",1,"d-flex","flex-column","h-100",3,"ngSubmit"],[1,"flex-fill","overflow-auto","p-3"],["appearance","outline",1,"w-100"],o,["name","book",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],e,[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder",a],["matEndDate","","formControlName","end","placeholder",i],["matSuffix","",3,"for"],["picker",""],r,["name","recordTypes","multiple","",3,"value","valueChange"],[3,"value"],c,s,[1,"d-flex","flex-row","flex-nowrap"],["name","amountStart","type","number","matInput","",3,"ngModel","ngModelChange"],[1,"mx-2","flex-grow-0","flex-shrink-0"],["name","amountEnd","type","number","matInput","",3,"ngModel","ngModelChange","click"],l,["name","comment","type","text","matInput","",3,"ngModel","ngModelChange"],d,["name","accounts","multiple","",3,"value","valueChange"],f,["name","members","multiple","",3,"value","valueChange"],_,["name","txnObjects","multiple","",3,"value","valueChange"],g,["name","tags","multiple","",3,"ngModel","ngModelChange"],A,["name","reimburse","multiple","",3,"ngModel","ngModelChange"],h,p,u,[1,"container-fluid","py-3","text-end"],["type","submit","mat-flat-button","","color","primary",1,"me-2"],T,["type","button","mat-stroked-button","","color","primary",3,"click"],G,[1,"d-flex","flex-column","flex-nowrap","h-100"],[1,"flex-fill","overflow-hidden"],[1,"w-100","mh-100","overflow-auto","main-content"],["mat-table","",1,"table","table-sm","table-bordered","table-striped","table-hover","table-narrow","w-100",3,"dataSource"],["matColumnDef","select","sticky","true"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","bizTime"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","amount"],["mat-cell","","class","text-nowrap",3,"ngSwitch",4,"matCellDef"],["matColumnDef","categoryName"],["mat-cell","","class","text-nowrap",4,"matCellDef"],["matColumnDef","members"],["matColumnDef","tradetgtName"],["matColumnDef","tags"],["mat-cell","","style","line-height: 1.1;",4,"matCellDef"],["matColumnDef","comment"],["mat-cell","","width","1000",4,"matCellDef"],["matColumnDef","operation","stickyEnd","true"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["matColumnDef","daySummary"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns","matRowDefWhen"],["class","table-primary text-start","mat-row","",4,"matRowDef","matRowDefColumns","matRowDefWhen"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[3,"ngSwitch"],[4,"ngSwitchCase"],k,tt,D,lt,dt,["mat-header-cell","",2,"width","50px"],["matBadgeColor","warn",3,"checked","indeterminate","matBadge","change"],["mat-cell",""],[3,"checked","click","change"],["mat-header-cell",""],et,[1,"text-nowrap"],ut,["mat-cell","",1,"text-nowrap",3,"ngSwitch"],["class","text-danger",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-muted",4,"ngSwitchCase"],[3,"text-info","text-warning",4,"ngSwitchCase"],["class","text-muted",4,"ngSwitchDefault"],[1,"text-danger"],[1,"text-success"],[1,"text-muted"],nt,["mat-cell","",1,"text-nowrap"],N,[4,"ngFor","ngForOf"],Y,O,L,["mat-cell","",2,"line-height","1.1"],at,["mat-cell","","width","1000"],[1,"ellipsis-description-line-2"],["mat-header-cell","","width","1"],["type","button","mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"table-primary","text-start"]]},template:function(e,a){if(1&e&&(t.TgZ(0,"app-default-operation-toolbar",0),t.NdJ("new",function(){return a.addNewOne()})("delete",function(){return a.delete()}),t.qZA(),t._UZ(1,"app-breadcrumb"),t.TgZ(2,"app-two-cols-layout")(3,"form",1),t.NdJ("ngSubmit",function(){return a.search()}),t.TgZ(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.ynx(7),t.SDv(8,4),t.BQk(),t.qZA(),t.TgZ(9,"mat-select",5),t.NdJ("valueChange",function(r){return a.searchKeys.bkId=r})("selectionChange",function(r){return a.onBookSelectionChange(r)}),t.YNc(10,ya,2,2,"mat-option",6),t.qZA()(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t.SDv(13,7),t.qZA(),t.TgZ(14,"mat-date-range-input",8),t._UZ(15,"input",9)(16,"input",10),t.qZA(),t._UZ(17,"mat-datepicker-toggle",11)(18,"mat-date-range-picker",null,12),t.qZA(),t.TgZ(20,"mat-form-field",3)(21,"mat-label"),t.SDv(22,13),t.qZA(),t.TgZ(23,"mat-select",14),t.NdJ("valueChange",function(r){return a.searchKeys.recTypeList=r}),t.YNc(24,wa,7,7,"mat-option",6),t.TgZ(25,"mat-option",15),t.SDv(26,16),t.qZA()()(),t.TgZ(27,"mat-form-field",3)(28,"mat-label"),t.SDv(29,17),t.qZA(),t.TgZ(30,"div",18)(31,"input",19),t.NdJ("ngModelChange",function(r){return a.searchKeys.amountStart=r}),t.qZA(),t.TgZ(32,"mat-icon",20),t._uU(33,"settings_ethernet"),t.qZA(),t.TgZ(34,"input",21),t.NdJ("ngModelChange",function(r){return a.searchKeys.amountEnd=r})("click",function(r){return r.stopPropagation()}),t.qZA()()(),t.TgZ(35,"mat-form-field",3)(36,"mat-label"),t.SDv(37,22),t.qZA(),t.TgZ(38,"input",23),t.NdJ("ngModelChange",function(r){return a.searchKeys.comment=r}),t.qZA()(),t.TgZ(39,"mat-form-field",3)(40,"mat-label"),t.SDv(41,24),t.qZA(),t.TgZ(42,"mat-select",25),t.NdJ("valueChange",function(r){return a.searchKeys.accountIdList=r}),t.YNc(43,$a,2,2,"mat-option",6),t.qZA()(),t.TgZ(44,"mat-form-field",3)(45,"mat-label"),t.SDv(46,26),t.qZA(),t.TgZ(47,"mat-select",27),t.NdJ("valueChange",function(r){return a.searchKeys.memberIdList=r}),t.YNc(48,Za,2,2,"mat-option",6),t.qZA()(),t.TgZ(49,"mat-form-field",3)(50,"mat-label"),t.SDv(51,28),t.qZA(),t.TgZ(52,"mat-select",29),t.NdJ("valueChange",function(r){return a.searchKeys.tradetgtIdList=r}),t.YNc(53,ka,2,2,"mat-option",6),t.qZA()(),t.TgZ(54,"mat-form-field",3)(55,"mat-label"),t.SDv(56,30),t.qZA(),t.TgZ(57,"mat-select",31),t.NdJ("ngModelChange",function(r){return a.searchKeys.projectIdList=r}),t.YNc(58,Ya,2,2,"mat-option",6),t.qZA()(),t.TgZ(59,"mat-form-field",3)(60,"mat-label"),t.SDv(61,32),t.qZA(),t.TgZ(62,"mat-select",33),t.NdJ("ngModelChange",function(r){return a.searchKeys.reimburseList=r}),t.TgZ(63,"mat-option",15),t.ynx(64),t.SDv(65,34),t.BQk(),t.qZA(),t.TgZ(66,"mat-option",15),t.ynx(67),t.SDv(68,35),t.BQk(),t.qZA(),t.TgZ(69,"mat-option",15),t.ynx(70),t.SDv(71,36),t.BQk(),t.qZA()()()(),t.TgZ(72,"div",37)(73,"button",38)(74,"mat-icon"),t._uU(75,"search"),t.qZA(),t.ynx(76),t.SDv(77,39),t.BQk(),t.qZA(),t.TgZ(78,"button",40),t.NdJ("click",function(){return a.reset()}),t.TgZ(79,"mat-icon"),t._uU(80,"search_off"),t.qZA(),t.ynx(81),t.SDv(82,41),t.BQk(),t.qZA()()(),t.TgZ(83,"div",42)(84,"div",43)(85,"div",44)(86,"table",45),t.ynx(87,46),t.YNc(88,La,2,3,"th",47),t.YNc(89,Ba,2,1,"td",48),t.BQk(),t.ynx(90,49),t.YNc(91,Qa,3,0,"th",50),t.YNc(92,Ga,4,4,"td",48),t.BQk(),t.ynx(93,51),t.YNc(94,Ja,3,0,"th",50),t.YNc(95,qa,9,11,"td",52),t.BQk(),t.ynx(96,53),t.YNc(97,ja,3,0,"th",50),t.YNc(98,Va,2,1,"td",54),t.BQk(),t.ynx(99,55),t.YNc(100,Ka,3,0,"th",50),t.YNc(101,eo,2,1,"td",54),t.BQk(),t.ynx(102,56),t.YNc(103,no,3,0,"th",50),t.YNc(104,ao,2,1,"td",54),t.BQk(),t.ynx(105,57),t.YNc(106,oo,6,0,"th",50),t.YNc(107,ro,6,2,"td",58),t.BQk(),t.ynx(108,59),t.YNc(109,co,3,0,"th",50),t.YNc(110,so,3,1,"td",60),t.BQk(),t.ynx(111,61),t.YNc(112,_o,1,0,"th",62),t.YNc(113,lo,4,0,"td",48),t.BQk(),t.ynx(114,63),t.YNc(115,uo,3,6,"td",48),t.BQk(),t.YNc(116,mo,1,0,"tr",64),t.YNc(117,go,1,0,"tr",65),t.YNc(118,po,1,0,"tr",66),t.qZA()()(),t._UZ(119,"mat-paginator",67),t.qZA()()),2&e){const i=t.MAs(19);t.xp6(9),t.Q6J("value",a.searchKeys.bkId),t.xp6(1),t.Q6J("ngForOf",a.books),t.xp6(4),t.Q6J("formGroup",a.range)("rangePicker",i),t.xp6(3),t.Q6J("for",i),t.xp6(6),t.Q6J("value",a.searchKeys.recTypeList),t.xp6(1),t.Q6J("ngForOf",a.recordTypes),t.xp6(1),t.Q6J("value",null),t.xp6(6),t.Q6J("ngModel",a.searchKeys.amountStart),t.xp6(3),t.Q6J("ngModel",a.searchKeys.amountEnd),t.xp6(4),t.Q6J("ngModel",a.searchKeys.comment),t.xp6(4),t.Q6J("value",a.searchKeys.accountIdList),t.xp6(1),t.Q6J("ngForOf",a.accounts),t.xp6(4),t.Q6J("value",a.searchKeys.memberIdList),t.xp6(1),t.Q6J("ngForOf",a.members),t.xp6(4),t.Q6J("value",a.searchKeys.tradetgtIdList),t.xp6(1),t.Q6J("ngForOf",a.txnObjects),t.xp6(4),t.Q6J("ngModel",a.searchKeys.projectIdList),t.xp6(1),t.Q6J("ngForOf",a.projects),t.xp6(4),t.Q6J("ngModel",a.searchKeys.reimburseList),t.xp6(1),t.Q6J("value",1),t.xp6(3),t.Q6J("value",2),t.xp6(3),t.Q6J("value",0),t.xp6(17),t.Q6J("dataSource",a.dataSource),t.xp6(30),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)("matRowDefWhen",a.isNotSummary),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(32,fo))("matRowDefWhen",a.isSummary),t.xp6(1),t.Q6J("pageSizeOptions",a.dataSource.pageSizeOptions)("pageSize",a.dataSource.pageSizeOptions[0])}},dependencies:[I.sg,I.RF,I.n9,I.ED,Jt.k,E._Y,E.Fj,E.wV,E.JJ,E.JL,E.On,E.F,St.lW,ke.oG,y.nW,y.wx,y.zY,y.By,y._g,$.KE,$.hX,$.R9,Nt.Hw,ie.Nt,Lt.gD,Q.ey,E.sg,E.u,pt.NW,M.BZ,M.fO,M.as,M.w1,M.Dz,M.nj,M.ge,M.ev,M.XQ,M.Gk,Bt.L,ne.Y,ae.o,oe.h,I.JJ,ee.e]}),n})();var Ye=m(2843),ho=m(455);function Eo(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"th",35)(1,"mat-checkbox",36),t.NdJ("change",function(i){t.CHM(e);const r=t.oxw();return t.KtG(i?r.masterToggle():null)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("matBadge",e.selection.selected.length)}}function Co(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",37)(1,"mat-checkbox",38),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(i?s.selection.toggle(c):null)}),t.qZA()()}if(2&n){const e=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("checked",a.selection.isSelected(e))}}function To(n,o){1&n&&(t.TgZ(0,"th",39),t.ynx(1),t.SDv(2,40),t.BQk(),t.qZA())}function So(n,o){if(1&n&&(t.TgZ(0,"td",37)(1,"span",41),t._uU(2),t.ALo(3,"date"),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.xi3(3,1,e.bizTime,"yyyy-MM-dd HH:mm:ss"))}}function No(n,o){1&n&&(t.TgZ(0,"th",39),t.ynx(1),t.SDv(2,42),t.BQk(),t.qZA())}function bo(n,o){1&n&&(t.TgZ(0,"mat-icon",49),t._uU(1,"remove"),t.qZA())}function Mo(n,o){1&n&&(t.TgZ(0,"mat-icon",50),t._uU(1,"add"),t.qZA())}function Io(n,o){if(1&n&&(t.TgZ(0,"mat-icon",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Oqu(e.targetId===a.accountId?"add":"remove")}}function Ro(n,o){if(1&n&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.ekj("text-info",0===e.recSubtype)("text-warning",0!==e.recSubtype),t.xp6(1),t.hij(" ",0===e.recSubtype?"add":"remove"," ")}}function yo(n,o){if(1&n&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.ekj("text-info",0===e.recSubtype)("text-warning",0!==e.recSubtype),t.xp6(1),t.hij(" ",0===e.recSubtype?"add":"remove"," ")}}function Do(n,o){1&n&&(t.TgZ(0,"mat-icon",51),t._uU(1,"help_outline"),t.qZA())}function Oo(n,o){if(1&n&&(t.TgZ(0,"td",43),t.YNc(1,bo,2,0,"mat-icon",44),t.YNc(2,Mo,2,0,"mat-icon",45),t.YNc(3,Io,2,1,"mat-icon",46),t.YNc(4,Ro,2,5,"mat-icon",47),t.YNc(5,yo,2,5,"mat-icon",47),t.YNc(6,Do,2,0,"mat-icon",48),t._uU(7),t.ALo(8,"number"),t.qZA()),2&n){const e=o.$implicit;t.Q6J("ngSwitch",e.recType),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngSwitchCase",5),t.xp6(2),t.AsE(" ",e.moneyType.flag," ",t.xi3(8,8,e.amount/100,"0.2-2")," ")}}function xo(n,o){1&n&&(t.TgZ(0,"th",39),t.ynx(1),t.SDv(2,52),t.BQk(),t.qZA())}function vo(n,o){if(1&n&&(t.TgZ(0,"td",53),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.AsE(" ",e.moneyType.flag," ",t.xi3(2,2,e.accountBalance,"0.2-2")," ")}}function Po(n,o){1&n&&(t.TgZ(0,"th",39),t.ynx(1),t.SDv(2,54),t.BQk(),t.qZA())}function wo(n,o){if(1&n&&(t.TgZ(0,"td",53),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.categoryName," ")}}function $o(n,o){1&n&&(t.TgZ(0,"th",39),t.ynx(1),t.SDv(2,55),t.BQk(),t.qZA())}function Zo(n,o){if(1&n&&(t.ynx(0)(1),t._uU(2),t.BQk()()),2&n){const e=o.$implicit,a=o.last;t.xp6(2),t.AsE("",e.name,"",a?"":", ","")}}function ko(n,o){if(1&n&&(t.TgZ(0,"td",37)(1,"small",41),t.YNc(2,Zo,3,2,"ng-container",56),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Q6J("ngForOf",e.tags)}}function Yo(n,o){1&n&&(t.TgZ(0,"th",39),t.ynx(1),t.SDv(2,57),t.BQk(),t.qZA())}function Lo(n,o){if(1&n&&(t.TgZ(0,"td",58)(1,"span",59),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.comment)}}function Bo(n,o){1&n&&t._UZ(0,"th",60)}function Qo(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",37)(1,"button",61),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.edit(r))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function Go(n,o){1&n&&t._UZ(0,"tr",62)}function Jo(n,o){1&n&&t._UZ(0,"tr",63)}let Xo=(()=>{class n{constructor(e,a,i,r,c,s,l,d,f){this.elementRef=e,this.route=a,this.dateAdapter=i,this.algorithm=r,this.notification=c,this.communication=s,this.datetimeService=l,this.databaseService=d,this.operation=f,this.displayedColumns=[],this.selection=new Pe.Ov(!0,[]),this.showBalance=!1,this.range=new E.cw({start:new E.NI(null),end:new E.NI(null)}),this.deleting=!1,this.columnsToDisplay=["select","bizTime","amount","accountBalance","categoryName","comment","operation"],this.subscription=new ot.w0,this.dataSource=new $e(_=>{const g=this.range.controls.start.value,A=this.range.controls.end.value;return this.notification.showLoading(this.elementRef.nativeElement),(g&&A?this.databaseService.getEntries(this.accountId,this.datetimeService.getStartDatetime(g),this.datetimeService.getEndDatetime(A)):(0,Ye._)(()=>new Error("No datetime conditions"))).pipe((0,W.K)(()=>(0,v.of)({code:500,data:{flows:[]},error:""})))},_=>{this.selection.clear(),this.notification.hideLoading();const g=this.accountId,A=_.data.flows;let h=0;return this.showBalance&&this.algorithm.reverseDeviceOfDuff(A,u=>{switch(u.recType){case R.PAY:h-=u.amount;break;case R.REVENUE:h+=u.amount;break;case R.TRANSFER:u.targetId===g?h+=u.amount:h-=u.amount;break;case R.BORROW:case R.RETURN:0===u.recSubtype?h+=u.amount:h-=u.amount;break;default:h=u.amount}u.accountBalance=h/100}),A},!1,!0)}ngOnInit(){this.displayedColumns=this.columnsToDisplay.filter(e=>"accountBalance"!==e||this.showBalance),this.dataSource.paginator=this.paginator,this.subscription.add(this.route.paramMap.subscribe(e=>{this.accountId=e.get("accountId")})),this.subscription.add(this.communication.acceptRefreshCommand().pipe((0,rt.b)(300)).subscribe(()=>{this.dataSource.reload()})),this.subscription.add(this.range.valueChanges.pipe((0,rt.b)(300)).subscribe(()=>{this.dataSource.reset()})),this.datetimeService.initTimeRange(this.range)}ngOnDestroy(){this.datetimeService.destoryTimeRange(),this.operation.closeSecondaryOutlet(this.route.parent),this.subscription.unsubscribe()}isAllSelected(){const a=this.dataSource.data.length;return a>0&&this.selection.selected.length===a}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(e=>this.selection.select(e))}onShowBalanceChange(e){e.checked?(this.range.setValue({start:this.datetimeService.getMinDate(),end:this.datetimeService.getMaxDate()}),this.range.disable()):this.range.enable(),this.displayedColumns=this.columnsToDisplay.filter(a=>"accountBalance"!==a||this.showBalance)}addNewOne(){this.operation.addNewOne(this.accountId,this.route.parent)}edit(e){this.operation.edit(e,this.route.parent)}delete(){const e=this.selection.selected.map(a=>a.id);!e.length||this.deleting||(this.deleting=!0,this.notification.showLoading(this.elementRef.nativeElement),this.databaseService.deleteEntries(e).pipe((0,Z.x)(()=>{this.deleting=!1,this.notification.hideLoading(),this.communication.giveRefreshCommand()})).subscribe())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(J.gz),t.Y36(Q._A),t.Y36(Ze.e),t.Y36(st.g),t.Y36(ft.O),t.Y36(Wt.d),t.Y36(_t),t.Y36(Dt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-account-entries"]],viewQuery:function(e,a){if(1&e&&t.Gf(pt.NW,7),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first)}},hostAttrs:[1,"d-flex","flex-column","flex-nowrap","w-100","h-100"],decls:53,vars:11,consts:function(){let o,e,a,i,r,c,s,l,d,f,_;return o="\u67E5\u8BE2\u65E5\u671F\u8303\u56F4",e="\u5F00\u59CB\u65E5\u671F",a="\u7ED3\u675F\u65E5\u671F",i="\u663E\u793A\u4F59\u989D",r="\u67E5\u8BE2\u8D26\u6237\u7684\u5168\u90E8\u8BB0\u5F55",c="\u65F6\u95F4",s="\u91D1\u989D",l="\u8D26\u6237\u4F59\u989D",d="\u7C7B\u522B",f="\u6807\u7B7E",_="\u5907\u6CE8",[[3,"new","delete"],["appStartContent","",1,"d-flex","flex-column","h-100"],[1,"p-3"],["appearance","outline",1,"w-100"],o,[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder",e],["matEndDate","","formControlName","end","placeholder",a],["matSuffix","",3,"for","disabled"],["picker",""],["color","primary",3,"ngModel","ngModelChange","change"],i,r,[1,"d-flex","flex-column","flex-nowrap","h-100"],[1,"flex-fill","overflow-hidden"],[1,"w-100","mh-100","overflow-auto","main-content"],["mat-table","",1,"table","table-sm","table-bordered","table-striped","table-hover","table-narrow","w-100",3,"dataSource"],["matColumnDef","select","sticky","true"],["mat-header-cell","","style","min-width: 50px;",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","bizTime"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","amount"],["mat-cell","","class","text-nowrap",3,"ngSwitch",4,"matCellDef"],["matColumnDef","accountBalance"],["mat-cell","","class","text-nowrap",4,"matCellDef"],["matColumnDef","categoryName"],["matColumnDef","tags"],["matColumnDef","comment"],["mat-cell","","width","1000",4,"matCellDef"],["matColumnDef","operation","stickyEnd","true"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell","",2,"min-width","50px"],["matBadgeColor","warn",3,"checked","indeterminate","matBadge","change"],["mat-cell",""],[3,"checked","click","change"],["mat-header-cell",""],c,[1,"text-nowrap"],s,["mat-cell","",1,"text-nowrap",3,"ngSwitch"],["class","text-danger",4,"ngSwitchCase"],["class","text-success",4,"ngSwitchCase"],["class","text-muted",4,"ngSwitchCase"],[3,"text-info","text-warning",4,"ngSwitchCase"],["class","text-muted",4,"ngSwitchDefault"],[1,"text-danger"],[1,"text-success"],[1,"text-muted"],l,["mat-cell","",1,"text-nowrap"],d,f,[4,"ngFor","ngForOf"],_,["mat-cell","","width","1000"],[1,"ellipsis-description-line-2"],["mat-header-cell","","width","1"],["type","button","mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]]},template:function(e,a){if(1&e&&(t.TgZ(0,"app-default-operation-toolbar",0),t.NdJ("new",function(){return a.addNewOne()})("delete",function(){return a.delete()}),t.qZA(),t._UZ(1,"app-breadcrumb"),t.TgZ(2,"app-two-cols-layout")(3,"div",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.SDv(7,4),t.qZA(),t.TgZ(8,"mat-date-range-input",5),t._UZ(9,"input",6)(10,"input",7),t.qZA(),t._UZ(11,"mat-datepicker-toggle",8)(12,"mat-date-range-picker",null,9),t.qZA(),t.TgZ(14,"div")(15,"mat-slide-toggle",10),t.NdJ("ngModelChange",function(r){return a.showBalance=r})("change",function(r){return a.onShowBalanceChange(r)}),t.ynx(16),t.SDv(17,11),t.BQk(),t.qZA()(),t.TgZ(18,"p")(19,"small"),t.ynx(20),t.SDv(21,12),t.BQk(),t.qZA()()()(),t.TgZ(22,"div",13)(23,"div",14)(24,"div",15)(25,"table",16),t.ynx(26,17),t.YNc(27,Eo,2,3,"th",18),t.YNc(28,Co,2,1,"td",19),t.BQk(),t.ynx(29,20),t.YNc(30,To,3,0,"th",21),t.YNc(31,So,4,4,"td",19),t.BQk(),t.ynx(32,22),t.YNc(33,No,3,0,"th",21),t.YNc(34,Oo,9,11,"td",23),t.BQk(),t.ynx(35,24),t.YNc(36,xo,3,0,"th",21),t.YNc(37,vo,3,5,"td",25),t.BQk(),t.ynx(38,26),t.YNc(39,Po,3,0,"th",21),t.YNc(40,wo,2,1,"td",25),t.BQk(),t.ynx(41,27),t.YNc(42,$o,3,0,"th",21),t.YNc(43,ko,3,1,"td",19),t.BQk(),t.ynx(44,28),t.YNc(45,Yo,3,0,"th",21),t.YNc(46,Lo,3,1,"td",29),t.BQk(),t.ynx(47,30),t.YNc(48,Bo,1,0,"th",31),t.YNc(49,Qo,4,0,"td",19),t.BQk(),t.YNc(50,Go,1,0,"tr",32),t.YNc(51,Jo,1,0,"tr",33),t.qZA()()(),t._UZ(52,"mat-paginator",34),t.qZA()()),2&e){const i=t.MAs(13);t.xp6(8),t.Q6J("formGroup",a.range)("rangePicker",i),t.xp6(3),t.Q6J("for",i)("disabled",a.showBalance),t.xp6(4),t.Q6J("ngModel",a.showBalance),t.xp6(10),t.Q6J("dataSource",a.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",a.dataSource.pageSizeOptions)("pageSize",a.dataSource.pageSizeOptions[0])}},dependencies:[I.sg,I.RF,I.n9,I.ED,Jt.k,E.Fj,E.JJ,E.JL,E.On,St.lW,ke.oG,y.nW,y.wx,y.zY,y.By,y._g,$.KE,$.hX,$.R9,Nt.Hw,ho.Rr,E.sg,E.u,pt.NW,M.BZ,M.fO,M.as,M.w1,M.Dz,M.nj,M.ge,M.ev,M.XQ,M.Gk,Bt.L,ne.Y,ae.o,oe.h,I.JJ,ee.e]}),n})();var Wo=m(1005);const Le={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Qt;const Uo=new Uint8Array(16);function zo(){if(!Qt&&(Qt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qt(Uo)}const x=[];for(let n=0;n<256;++n)x.push((n+256).toString(16).slice(1));const Fo=function Ho(n,o,e){if(Le.randomUUID&&!o&&!n)return Le.randomUUID();const a=(n=n||{}).random||(n.rng||zo)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,o){e=e||0;for(let i=0;i<16;++i)o[e+i]=a[i];return o}return function Be(n,o=0){return(x[n[o+0]]+x[n[o+1]]+x[n[o+2]]+x[n[o+3]]+"-"+x[n[o+4]]+x[n[o+5]]+"-"+x[n[o+6]]+x[n[o+7]]+"-"+x[n[o+8]]+x[n[o+9]]+"-"+x[n[o+10]]+x[n[o+11]]+x[n[o+12]]+x[n[o+13]]+x[n[o+14]]+x[n[o+15]]).toLowerCase()}(a)};class re{constructor(){this.id=0,this.amount=0,this.comment="",this.address="",this.attachments="",this.reimburse=0,this.edited=0,this.deleted=0,this.sourceSystem=201}}var Qe=m(5001);function qo(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function jo(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.categoryId),t.xp6(1),t.hij(" ",e.name," ")}}function Vo(n,o){if(1&n&&(t.TgZ(0,"mat-optgroup",53),t.YNc(1,jo,2,2,"mat-option",14),t.qZA()),2&n){const e=o.$implicit;t.Q6J("label",e.name),t.xp6(1),t.Q6J("ngForOf",e.outgoSubTypes)}}function Ko(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function ti(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function ei(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function ni(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"div",9)(2,"div",10)(3,"mat-form-field",11)(4,"mat-label"),t.SDv(5,35),t.qZA(),t.TgZ(6,"mat-select",36),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.accountId=i)}),t.YNc(7,qo,2,2,"mat-option",14),t.qZA()()(),t.TgZ(8,"div",10)(9,"mat-form-field",11)(10,"mat-label"),t.SDv(11,37),t.qZA(),t.TgZ(12,"mat-select",38),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.categoryId=i)}),t.YNc(13,Vo,2,2,"mat-optgroup",39),t.qZA()()()(),t.TgZ(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t.SDv(18,40),t.qZA(),t.TgZ(19,"mat-select",41),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.tags=i)}),t.YNc(20,Ko,2,2,"mat-option",14),t.qZA()()(),t.TgZ(21,"div",10)(22,"mat-form-field",11)(23,"mat-label"),t.SDv(24,42),t.qZA(),t.TgZ(25,"mat-select",43),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.tradetgtId=i)}),t.TgZ(26,"mat-option",44),t._uU(27,"-"),t.qZA(),t.YNc(28,ti,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(29,"div",9)(30,"div",10)(31,"mat-form-field",11)(32,"mat-label"),t.SDv(33,45),t.qZA(),t.TgZ(34,"mat-select",46),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.selectedMembers=i)}),t.YNc(35,ei,2,2,"mat-option",14),t.qZA()()(),t.TgZ(36,"div",10)(37,"mat-form-field",11)(38,"mat-label"),t.SDv(39,47),t.qZA(),t.TgZ(40,"mat-select",48),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.reimburse=i)}),t.TgZ(41,"mat-option",49),t.ynx(42),t.SDv(43,50),t.BQk(),t.qZA(),t.TgZ(44,"mat-option",49),t.ynx(45),t.SDv(46,51),t.BQk(),t.qZA(),t.TgZ(47,"mat-option",49),t.ynx(48),t.SDv(49,52),t.BQk(),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.entry.accountId),t.xp6(1),t.Q6J("ngForOf",e.accounts),t.xp6(5),t.Q6J("ngModel",e.entry.categoryId),t.xp6(1),t.Q6J("ngForOf",e.payCategories),t.xp6(6),t.Q6J("compareWith",e.compareTagWith)("ngModel",e.entry.tags),t.xp6(1),t.Q6J("ngForOf",e.tags),t.xp6(5),t.Q6J("ngModel",e.entry.tradetgtId),t.xp6(3),t.Q6J("ngForOf",e.txnObjects),t.xp6(6),t.Q6J("ngModel",e.selectedMembers),t.xp6(1),t.Q6J("ngForOf",e.members),t.xp6(5),t.Q6J("ngModel",e.entry.reimburse),t.xp6(1),t.Q6J("value",1),t.xp6(3),t.Q6J("value",2),t.xp6(3),t.Q6J("value",0)}}function ai(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function oi(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.categoryId),t.xp6(1),t.hij(" ",e.name," ")}}function ii(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}function ri(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function ci(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function si(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"div",9)(2,"div",10)(3,"mat-form-field",11)(4,"mat-label"),t.SDv(5,54),t.qZA(),t.TgZ(6,"mat-select",36),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.accountId=i)}),t.YNc(7,ai,2,2,"mat-option",14),t.qZA()()(),t.TgZ(8,"div",10)(9,"mat-form-field",11)(10,"mat-label"),t.SDv(11,55),t.qZA(),t.TgZ(12,"mat-select",56),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.categoryId=i)}),t.YNc(13,oi,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t.SDv(18,57),t.qZA(),t.TgZ(19,"mat-select",41),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.tags=i)}),t.TgZ(20,"mat-option",44),t._uU(21,"-"),t.qZA(),t.YNc(22,ii,2,2,"mat-option",14),t.qZA()()(),t.TgZ(23,"div",10)(24,"mat-form-field",11)(25,"mat-label"),t.SDv(26,58),t.qZA(),t.TgZ(27,"mat-select",43),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.tradetgtId=i)}),t.TgZ(28,"mat-option",44),t._uU(29,"-"),t.qZA(),t.YNc(30,ri,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(31,"div",9)(32,"div",10)(33,"mat-form-field",11)(34,"mat-label"),t.SDv(35,59),t.qZA(),t.TgZ(36,"mat-select",46),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.selectedMembers=i)}),t.YNc(37,ci,2,2,"mat-option",14),t.qZA()()(),t.TgZ(38,"div",10)(39,"mat-form-field",11)(40,"mat-label"),t.SDv(41,60),t.qZA(),t.TgZ(42,"mat-select",48),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.reimburse=i)}),t.TgZ(43,"mat-option",49),t.ynx(44),t.SDv(45,61),t.BQk(),t.qZA(),t.TgZ(46,"mat-option",49),t.ynx(47),t.SDv(48,62),t.BQk(),t.qZA(),t.TgZ(49,"mat-option",49),t.ynx(50),t.SDv(51,63),t.BQk(),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.entry.accountId),t.xp6(1),t.Q6J("ngForOf",e.accounts),t.xp6(5),t.Q6J("ngModel",e.entry.categoryId),t.xp6(1),t.Q6J("ngForOf",e.revenueCategories),t.xp6(6),t.Q6J("compareWith",e.compareTagWith)("ngModel",e.entry.tags),t.xp6(3),t.Q6J("ngForOf",e.tags),t.xp6(5),t.Q6J("ngModel",e.entry.tradetgtId),t.xp6(3),t.Q6J("ngForOf",e.txnObjects),t.xp6(6),t.Q6J("ngModel",e.selectedMembers),t.xp6(1),t.Q6J("ngForOf",e.members),t.xp6(5),t.Q6J("ngModel",e.entry.reimburse),t.xp6(1),t.Q6J("value",1),t.xp6(3),t.Q6J("value",2),t.xp6(3),t.Q6J("value",0)}}function _i(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function li(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function di(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"div",9)(2,"div",10)(3,"mat-form-field",11)(4,"mat-label"),t.SDv(5,64),t.qZA(),t.TgZ(6,"mat-select",65),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.accountId=i)}),t.YNc(7,_i,2,2,"mat-option",14),t.qZA()()(),t.TgZ(8,"div",10)(9,"mat-form-field",11)(10,"mat-label"),t.SDv(11,66),t.qZA(),t.TgZ(12,"mat-select",67),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.targetId=i)}),t.YNc(13,li,2,2,"mat-option",14),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.entry.accountId)("forbiddenSame",e.entry.targetId),t.xp6(1),t.Q6J("ngForOf",e.accounts),t.xp6(5),t.Q6J("ngModel",e.entry.targetId)("forbiddenSame",e.entry.accountId),t.xp6(1),t.Q6J("ngForOf",e.accounts)}}function ui(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,75),t.BQk()())}function mi(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,76),t.BQk()())}function gi(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,77),t.BQk()())}function pi(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,78),t.BQk()())}function fi(n,o){if(1&n&&(t.TgZ(0,"mat-option",74),t.YNc(1,ui,3,0,"ng-container",72),t.YNc(2,mi,3,0,"ng-container",72),t.YNc(3,gi,3,0,"ng-container",72),t.YNc(4,pi,3,0,"ng-container",72),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e)("ngSwitch",e),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4)}}function Ai(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,79),t.BQk()())}function hi(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,80),t.BQk()())}function Ei(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,81),t.BQk()())}function Ci(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,82),t.BQk()())}function Ti(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function Si(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,83),t.BQk()())}function Ni(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,84),t.BQk()())}function bi(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,85),t.BQk()())}function Mi(n,o){1&n&&(t.ynx(0)(1),t.SDv(2,86),t.BQk()())}function Ii(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.name," ")}}function Ri(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"div",9)(2,"div",10)(3,"mat-form-field",11)(4,"mat-label"),t.SDv(5,68),t.qZA(),t.TgZ(6,"mat-select",69),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.lendType=i)}),t.YNc(7,fi,5,6,"mat-option",70),t.qZA()()()(),t.TgZ(8,"div",9)(9,"div",10)(10,"mat-form-field",11)(11,"mat-label",71),t.YNc(12,Ai,3,0,"ng-container",72),t.YNc(13,hi,3,0,"ng-container",72),t.YNc(14,Ei,3,0,"ng-container",72),t.YNc(15,Ci,3,0,"ng-container",72),t.qZA(),t.TgZ(16,"mat-select",73),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.accountId=i)}),t.YNc(17,Ti,2,2,"mat-option",14),t.qZA()()(),t.TgZ(18,"div",10)(19,"mat-form-field",11)(20,"mat-label",71),t.YNc(21,Si,3,0,"ng-container",72),t.YNc(22,Ni,3,0,"ng-container",72),t.YNc(23,bi,3,0,"ng-container",72),t.YNc(24,Mi,3,0,"ng-container",72),t.qZA(),t.TgZ(25,"mat-select",36),t.NdJ("ngModelChange",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.entry.targetId=i)}),t.YNc(26,Ii,2,2,"mat-option",14),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngModel",e.entry.lendType),t.xp6(1),t.Q6J("ngForOf",e.loanTypes),t.xp6(4),t.Q6J("ngSwitch",e.entry.lendType),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngModel",e.entry.accountId),t.xp6(1),t.Q6J("ngForOf",e.creditors),t.xp6(3),t.Q6J("ngSwitch",e.entry.lendType),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngModel",e.entry.targetId),t.xp6(1),t.Q6J("ngForOf",e.accounts)}}function yi(n,o){if(1&n&&(t.TgZ(0,"mat-option",49),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function ce(){return Fo()}let Ge=(()=>{class n{constructor(e,a,i,r,c,s,l){this.elementRef=e,this.route=a,this.dateAdapter=i,this.communication=r,this.notification=c,this.databaseService=s,this.operation=l,this.books=[],this.accounts=[],this.tags=[],this.members=[],this.payCategories=[],this.revenueCategories=[],this.txnObjects=[],this.creditors=[],this.loanTypes=[P.BORROW,P.LEND,P.RECEIVE,P.REPAYMENT],this.compareTagWith=(d,f)=>d?.tagId===f?.tagId,this.isNew=!1,this.selectedTabIndex=0,this.saving=!1,this.subscription=new ot.w0,this.entry=new re,this.entry.bizId=ce(),this.entry.recType=R.PAY}ngOnInit(){this.isNew=!this.route.snapshot.paramMap.get("accountId"),this.subscription.add(this.route.paramMap.subscribe(e=>{const a=e.get("entryId"),i=e.get("accountId");i?(this.accountId="new"===i?void 0:i,this.entry.accountId=this.accountId,this.isNew=!0,this.bizDatetime=this.dateAdapter.today()):a&&(this.isNew=!1)}))}ngAfterViewInit(){this.notification.showLoading(this.elementRef.nativeElement),this.databaseService.getBooks().pipe((0,Wo.g)(100),(0,W.K)(e=>(this.notification.hideLoading(),(0,Ye._)(()=>e)))).subscribe(e=>{if(e&&e.data&&e.data.books[0]){const a=e.data.books[0];let i=a.id;this.books=e.data.books,this.isNew?(this.entry.bkId=a.id,this.entry.bookId=a.uuid):i=(0,w.su)(this.route.snapshot.paramMap.get("bookId")),(0,it.D)([this.databaseService.getShortAccounts(),this.databaseService.getShortAccounts(-1),this.getAdditionalDatas(i)]).pipe((0,Z.x)(()=>{this.notification.hideLoading()})).subscribe(r=>{if(this.accounts=r[0].data.accounts,this.creditors=r[1].data.accounts,this.isNew)!this.entry.accountId&&this.accounts[0]&&(this.entry.accountId=this.accounts[0].uuid);else{const c=this.route.snapshot.paramMap.get("entryId");this.getCurrentEntry(i,c)}setTimeout(()=>{this.onSelectedTabChange({index:this.selectedTabIndex})})})}})}ngOnDestroy(){this.subscription.unsubscribe()}onSelectedTabChange(e){const a=this.entry,i=e.index+1;let r;switch(a.recType=i,this.checkValuesWhetherExisted(),i){case R.PAY:r=this.payCategories[0];case R.REVENUE:if(r||(r=this.revenueCategories[0]),!a.accountId&&this.accountId){a.accountId=this.accountId;break}!a.categoryId&&r&&(a.categoryId=r.outgoSubTypes&&r.outgoSubTypes[0]?r.outgoSubTypes[0].categoryId:r.categoryId),!a.tags?.length&&this.tags&&this.tags.length&&(this.entry.tags=[this.tags[0]]),(!this.selectedMembers||!this.selectedMembers.length)&&this.members&&(this.selectedMembers=this.members.slice(0,1).map(c=>c.uuid));break;case R.TRANSFER:!a.accountId&&this.accountId&&(a.accountId=this.accountId),!a.targetId&&this.accounts[0]&&(a.targetId=this.accounts[0].uuid);break;default:typeof a.lendType>"u"&&(a.lendType=1),a.targetId||(a.targetId=this.accountId||(this.accounts[0]?this.accounts[0].uuid:void 0)),a.accountId||(a.accountId=this.creditors&&this.creditors[0]?this.creditors[0].uuid:void 0)}}onBookSelectionChange(e){const a=e.value;this.books&&this.books.some(i=>i.id===a&&(this.entry.bookId=i.uuid,!0)),this.notification.showLoading(this.elementRef.nativeElement),this.getAdditionalDatas(a).pipe((0,Z.x)(()=>{setTimeout(()=>{this.onSelectedTabChange({index:this.selectedTabIndex})})})).subscribe()}save(){this.update().subscribe(e=>{e&&this.cancel()})}saveAs(){const e=this.entryForm.controls;this.entryForm.form.updateValueAndValidity();for(const a in e)e[a].markAsTouched();this.entry.id=0,this.entry.bizId=ce(),this.save()}saveAndNew(){const e=this.entryForm.controls;this.entryForm.form.updateValueAndValidity();for(const a in e)e[a].markAsTouched();this.update().subscribe(a=>{a&&(this.entry.id=0,this.entry.bizId=ce())})}cancel(){this.operation.closeSecondaryOutlet(this.route.parent)}update(){if(this.checkValuesWhetherExisted(),this.entryForm&&this.entryForm.valid){const e=this.entry;switch(e.recType){case R.PAY:case R.REVENUE:e.targetId=void 0,e.profit=void 0,e.lendType=void 0,e.recSubtype=void 0,e.members=this.selectedMembers.map(a=>({memberId:a,amount:e.amount}));break;case R.TRANSFER:if(e.accountId===e.targetId)return;e.categoryId=void 0,e.tags=void 0,e.tradetgtId=void 0,e.profit=void 0,e.lendType=void 0,e.recSubtype=void 0,e.reimburse=0,e.targetAmount=e.amount,e.members=this.members.slice(0,1).map(a=>({memberId:a.uuid,amount:e.amount}));break;default:switch(e.categoryId=void 0,e.tags=void 0,e.tradetgtId=void 0,e.profit=0,e.reimburse=0,e.targetAmount=e.amount,e.lendType){case P.LEND:case P.REPAYMENT:e.recSubtype=1;break;default:e.recSubtype=0}(e.lendType===P.RECEIVE||e.lendType===P.REPAYMENT)&&(e.recType=R.RETURN),e.members=[{amount:e.amount}]}return e.bizTime=this.dateAdapter.toIso8601(this.bizDatetime),typeof e.comment>"u"&&(e.comment=""),this.saving=!0,this.notification.showLoading(this.elementRef.nativeElement),this.databaseService.saveEntry([e]).pipe((0,W.K)(()=>(0,v.of)(!1)),(0,U.U)(a=>!("boolean"!=typeof a&&a.error)),(0,Z.x)(()=>{this.saving=!1,this.notification.hideLoading(),this.communication.giveRefreshCommand()}))}return(0,v.of)(!1)}checkValuesWhetherExisted(){this.selects.forEach(e=>{if(e.options.length)if(e.multiple){if(e.value){const a=e.value.filter(i=>e.options.some(r=>r.value===i));e.ngControl.control.setValue(a)}}else e.options.some(a=>a.value===e.value)||e.ngControl.control.setValue(null)})}getCurrentEntry(e,a){this.getEntrySsp&&this.getEntrySsp.unsubscribe(),this.notification.showLoading(this.elementRef.nativeElement),this.getEntrySsp=this.databaseService.getEntry(e,a).pipe((0,kt.h)(i=>!i.error),(0,Z.x)(()=>{this.getEntrySsp=void 0,this.notification.hideLoading()})).subscribe(i=>{const r=i.data;r.amount=r.amount/100,this.accountId=r.accountId,this.bizDatetime=this.dateAdapter.deserialize(r.bizTime),this.selectedMembers=Array.isArray(r.members)?this.members.filter(c=>r.members.some(s=>s.memberId===c.uuid)).map(c=>c.uuid):this.members.slice(0,1).map(c=>c.uuid),r.recType===R.RETURN?r.lendType=0===r.recSubtype?P.RECEIVE:P.REPAYMENT:r.recType===R.BORROW&&(r.lendType=0===r.recSubtype?P.BORROW:P.LEND),this.entry=r,r.accountId&&!this.creditors.find(c=>c.uuid===r.accountId)&&this.creditors.push({uuid:r.accountId,name:r.accountName}),r.targetId&&!this.accounts.find(c=>c.uuid===r.targetId)&&this.accounts.push({uuid:r.targetId,name:r.targetName}),this.selectedTabIndex=(r.recType>5?4:r.recType)-1})}getAdditionalDatas(e){return(0,it.D)([this.databaseService.getTransactionObjects(e),this.databaseService.getBookProjects(e),this.databaseService.getMembers(e),this.databaseService.getEntryCategories(e,ct.PAY),this.databaseService.getEntryCategories(e,ct.REVENUE)]).pipe((0,Z.x)(()=>{this.notification.hideLoading()}),(0,U.U)(a=>{this.txnObjects=a[0].data.bookTradeTargets,this.tags=a[1].data.bookProjects.map(i=>({tagId:i.uuid,name:i.name})),this.members=a[2].data.bookMembers,this.payCategories=a[3].data.bookCategories,this.revenueCategories=a[4].data.bookCategories}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(J.gz),t.Y36(Q._A),t.Y36(ft.O),t.Y36(st.g),t.Y36(_t),t.Y36(Dt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-or-edit-entry"]],viewQuery:function(e,a){if(1&e&&(t.Gf(E.F,5),t.Gf(Lt.gD,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.entryForm=i.first),t.iGM(i=t.CRH())&&(a.selects=i)}},hostAttrs:[1,"d-flex","flex-column","flex-nowrap","w-100","h-100"],decls:62,vars:16,consts:function(){let o,e,a,i,r,c,s,l,d,f,_,g,A,h,p,u,T,G,k,tt,D,lt,dt,et,ut,nt,N,Y,O,L,at,b,mt,gt,B,Je,Xe,We,Ue,ze,He,Fe,qe,je,Ve;return o="\u652F\u51FA",e="\u6536\u5165",a="\u8F6C\u8D26",i="\u501F\u8D37",r="\u8D26\u672C",c="\u91D1\u989D",s="\u65F6\u95F4",l="\u5907\u6CE8",d="\u4FDD\u5B58",f="\u53E6\u5B58\u4E3A",_="\u4FDD\u5B58 \u518D\u8BB0",g="\u53D6\u6D88",A="\u8D26\u6237",h="\u7C7B\u522B",p="\u6807\u7B7E",u="\u4EA4\u6613\u5BF9\u8C61",T="\u6210\u5458",G="\u62A5\u9500",k="\u5F85\u62A5\u9500",tt="\u5DF2\u62A5\u9500",D="\u975E\u62A5\u9500",lt="\u8D26\u6237",dt="\u7C7B\u522B",et="\u6807\u7B7E",ut="\u4ED8\u6B3E\u65B9",nt="\u6210\u5458",N="\u62A5\u9500",Y="\u5F85\u62A5\u9500",O="\u5DF2\u62A5\u9500",L="\u975E\u62A5\u9500",at="\u8F6C\u51FA\u8D26\u6237",b="\u8F6C\u5165\u8D26\u6237",mt="\u7C7B\u522B",gt="\u501F\u5165",B="\u501F\u51FA",Je="\u6536\u6B3E",Xe="\u8FD8\u6B3E",We="\u503A\u6743\u4EBA",Ue="\u503A\u52A1\u4EBA",ze="\u503A\u52A1\u4EBA",He="\u503A\u6743\u4EBA",Fe="\u501F\u5165\u8D26\u6237",qe="\u501F\u51FA\u8D26\u6237",je="\u6536\u6B3E\u8D26\u6237",Ve="\u8FD8\u6B3E\u8D26\u6237",[["name","entryForm",1,"d-flex","flex-column","flex-nowrap","flex-fill","overflow-hidden",3,"ngSubmit"],["color","primary",3,"selectedIndex","selectedIndexChange","selectedTabChange"],["label",o],["label",e],["label",a],["label",i],[1,"flex-fill","overflow-auto"],["class","container-fluid pt-3",4,"ngIf"],[1,"container-fluid","pb-3"],[1,"row"],[1,"col","col-lg-6"],["appearance","outline"],r,["name","book","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],c,["name","amount","type","number","step","1","min","0.01","required","","matInput","",3,"ngModel","ngModelChange"],s,["name","bizDatetime","matInput","","required","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["color","primary"],["picker",""],[1,"col"],l,["name","comment","matInput","",3,"ngModel","ngModelChange"],[1,"container-fluid","pt-3","pb-3","text-end"],["type","submit","mat-flat-button","","color","primary",1,"me-2",3,"disabled"],d,["type","button","mat-flat-button","","color","primary",1,"me-2",3,"disabled","click"],f,["type","button","mat-flat-button","","color","accent",1,"me-2",3,"disabled","click"],_,["type","button","mat-stroked-button","","color","accent",1,"me-2",3,"disabled","click"],g,[1,"container-fluid","pt-3"],A,["name","account","required","",3,"ngModel","ngModelChange"],h,["name","payCategory","required","",3,"ngModel","ngModelChange"],[3,"label",4,"ngFor","ngForOf"],p,["name","tags","multiple","",3,"compareWith","ngModel","ngModelChange"],u,["name","txnObject",3,"ngModel","ngModelChange"],["value",""],T,["name","member","multiple","","required","",3,"ngModel","ngModelChange"],G,["name","reimburse",3,"ngModel","ngModelChange"],[3,"value"],k,tt,D,[3,"label"],lt,dt,["name","revenueCategory","required","",3,"ngModel","ngModelChange"],et,ut,nt,N,Y,O,L,at,["name","account","required","",3,"ngModel","forbiddenSame","ngModelChange"],b,["name","transferObject","required","",3,"ngModel","forbiddenSame","ngModelChange"],mt,["name","lendType","required","",3,"ngModel","ngModelChange"],[3,"value","ngSwitch",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["name","creditor","required","",3,"ngModel","ngModelChange"],[3,"value","ngSwitch"],gt,B,Je,Xe,We,Ue,ze,He,Fe,qe,je,Ve]},template:function(e,a){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.save()}),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedIndexChange",function(r){return a.selectedTabIndex=r})("selectedTabChange",function(r){return a.onSelectedTabChange(r)}),t._UZ(2,"mat-tab",2)(3,"mat-tab",3)(4,"mat-tab",4)(5,"mat-tab",5),t.qZA(),t.TgZ(6,"div",6),t.YNc(7,ni,50,15,"div",7),t.YNc(8,si,52,15,"div",7),t.YNc(9,di,14,6,"div",7),t.YNc(10,Ri,27,16,"div",7),t.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"mat-form-field",11)(15,"mat-label"),t.SDv(16,12),t.qZA(),t.TgZ(17,"mat-select",13),t.NdJ("ngModelChange",function(r){return a.entry.bkId=r})("selectionChange",function(r){return a.onBookSelectionChange(r)}),t.YNc(18,yi,2,2,"mat-option",14),t.qZA()()()(),t.TgZ(19,"div",9)(20,"div",10)(21,"mat-form-field",11)(22,"mat-label"),t.SDv(23,15),t.qZA(),t.TgZ(24,"input",16),t.NdJ("ngModelChange",function(r){return a.entry.amount=r}),t.qZA()()(),t.TgZ(25,"div",10)(26,"mat-form-field",11)(27,"mat-label"),t.SDv(28,17),t.qZA(),t.TgZ(29,"input",18),t.NdJ("ngModelChange",function(r){return a.bizDatetime=r}),t.qZA(),t._UZ(30,"mat-datepicker-toggle",19),t.TgZ(31,"mat-datepicker",20,21)(33,"mat-datepicker-actions"),t._UZ(34,"mat-timepicker"),t.qZA()()()()(),t.TgZ(35,"div",9)(36,"div",22)(37,"mat-form-field",11)(38,"mat-label"),t.SDv(39,23),t.qZA(),t.TgZ(40,"textarea",24),t.NdJ("ngModelChange",function(r){return a.entry.comment=r}),t.qZA()()()()()(),t.TgZ(41,"div",25)(42,"button",26)(43,"mat-icon"),t._uU(44,"save"),t.qZA(),t.ynx(45),t.SDv(46,27),t.BQk(),t.qZA(),t.TgZ(47,"button",28),t.NdJ("click",function(){return a.saveAs()}),t.TgZ(48,"mat-icon"),t._uU(49,"file_copy"),t.qZA(),t.ynx(50),t.SDv(51,29),t.BQk(),t.qZA(),t.TgZ(52,"button",30),t.NdJ("click",function(){return a.saveAndNew()}),t.TgZ(53,"mat-icon"),t._uU(54,"post_add"),t.qZA(),t.ynx(55),t.SDv(56,31),t.BQk(),t.qZA(),t.TgZ(57,"button",32),t.NdJ("click",function(){return a.cancel()}),t.TgZ(58,"mat-icon"),t._uU(59,"cancel"),t.qZA(),t.ynx(60),t.SDv(61,33),t.BQk(),t.qZA()()()),2&e){const i=t.MAs(32);t.xp6(1),t.Q6J("selectedIndex",a.selectedTabIndex),t.xp6(6),t.Q6J("ngIf",0===a.selectedTabIndex),t.xp6(1),t.Q6J("ngIf",1===a.selectedTabIndex),t.xp6(1),t.Q6J("ngIf",2===a.selectedTabIndex),t.xp6(1),t.Q6J("ngIf",3===a.selectedTabIndex),t.xp6(7),t.Q6J("ngModel",a.entry.bkId),t.xp6(1),t.Q6J("ngForOf",a.books),t.xp6(6),t.Q6J("ngModel",a.entry.amount),t.xp6(5),t.Q6J("matDatepicker",i)("ngModel",a.bizDatetime),t.xp6(1),t.Q6J("for",i),t.xp6(10),t.Q6J("ngModel",a.entry.comment),t.xp6(2),t.Q6J("disabled",a.saving),t.xp6(5),t.Q6J("disabled",a.saving||a.isNew),t.xp6(5),t.Q6J("disabled",a.saving),t.xp6(5),t.Q6J("disabled",a.saving)}},dependencies:[I.sg,I.O5,I.RF,I.n9,E._Y,E.Fj,E.wV,E.JJ,E.JL,E.Q7,E.qQ,E.On,E.F,St.lW,y.Mq,y.hl,y.nW,y.M5,$.KE,$.hX,$.R9,Nt.Hw,ie.Nt,Lt.gD,Q.ey,Q.Nv,Qe.a,bt.SP,bt.uX],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),n})();const Di=[{path:"dashboard",component:ta},{path:"accounts",component:Ia},{path:"search",component:Ao},{path:"accounts/:accountId",component:Xo},{path:"entry/add/:accountId",outlet:"secondary",component:Ge},{path:"entry/:bookId/:entryId",outlet:"secondary",component:Ge},{path:"balance/:entryId",outlet:"secondary",component:(()=>{class n{constructor(e,a,i,r,c,s,l,d){this.elementRef=e,this.router=a,this.route=i,this.dateAdapter=r,this.communication=c,this.notification=s,this.databaseService=l,this.operation=d,this.selectedTabIndex=0,this.saving=!1,this.subscription=new ot.w0,this.router.getCurrentNavigation()?(this.entry=this.router.getCurrentNavigation().extras.state,this.entry?(this.entry.amount=this.entry.accountBalance,this.bizDatetime=this.dateAdapter.deserialize(this.entry.bizTime)):this.entry=new re):this.entry=new re}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}save(){this.update().subscribe(e=>{e&&this.cancel()})}saveAndNew(){const e=this.entryForm.controls;this.entryForm.form.updateValueAndValidity();for(const a in e)e[a].markAsTouched();this.update().subscribe(a=>{a&&(this.entry.id=0)})}cancel(){this.operation.closeSecondaryOutlet(this.route.parent)}update(){if(this.entryForm&&this.entryForm.valid){const e=this.entry;return e.bizTime=this.bizDatetime.toISOString(),typeof e.comment>"u"&&(e.comment=""),this.saving=!0,this.notification.showLoading(this.elementRef.nativeElement),this.databaseService.saveEntry([e]).pipe((0,W.K)(()=>(0,v.of)(!1)),(0,U.U)(a=>!("boolean"!=typeof a&&a.error)),(0,Z.x)(()=>{this.saving=!1,this.notification.hideLoading(),this.communication.giveRefreshCommand()}))}return(0,v.of)(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(J.F0),t.Y36(J.gz),t.Y36(Q._A),t.Y36(ft.O),t.Y36(st.g),t.Y36(_t),t.Y36(Dt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-balance-modifier"]],viewQuery:function(e,a){if(1&e&&t.Gf(E.F,5),2&e){let i;t.iGM(i=t.CRH())&&(a.entryForm=i.first)}},hostAttrs:[1,"d-flex","flex-column","flex-nowrap","w-100","h-100"],decls:31,vars:6,consts:function(){let o,e,a,i,r;return o="\u4F59\u989D\u53D8\u66F4",e="\u91D1\u989D",a="\u65F6\u95F4",i="\u4FDD\u5B58",r="\u53D6\u6D88",[["name","entryForm",1,"d-flex","flex-column","flex-nowrap","flex-fill","overflow-hidden",3,"ngSubmit"],["color","primary"],["label",o],[1,"flex-fill","overflow-auto"],[1,"container-fluid","py-3"],[1,"row"],[1,"col","col-lg-6"],["appearance","legacy"],e,["name","amount","type","number","step","1","required","","matInput","",3,"ngModel","ngModelChange"],a,["name","bizDatetime","matInput","","required","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[1,"container-fluid","pt-3","pb-3","text-end"],["type","submit","mat-flat-button","","color","primary",1,"me-2",3,"disabled"],i,["type","button","mat-flat-button","","color","warn",1,"me-2",3,"disabled","click"],r]},template:function(e,a){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.save()}),t.TgZ(1,"mat-tab-group",1),t._UZ(2,"mat-tab",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),t.SDv(9,8),t.qZA(),t.TgZ(10,"input",9),t.NdJ("ngModelChange",function(r){return a.entry.amount=r}),t.qZA()()(),t.TgZ(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t.SDv(14,10),t.qZA(),t.TgZ(15,"input",11),t.NdJ("ngModelChange",function(r){return a.bizDatetime=r}),t.qZA(),t._UZ(16,"mat-datepicker-toggle",12),t.TgZ(17,"mat-datepicker",1,13),t._UZ(19,"mat-timepicker"),t.qZA()()()()()(),t.TgZ(20,"div",14)(21,"button",15)(22,"mat-icon"),t._uU(23,"save"),t.qZA(),t.ynx(24),t.SDv(25,16),t.BQk(),t.qZA(),t.TgZ(26,"button",17),t.NdJ("click",function(){return a.cancel()}),t.TgZ(27,"mat-icon"),t._uU(28,"cancel"),t.qZA(),t.ynx(29),t.SDv(30,18),t.BQk(),t.qZA()()()),2&e){const i=t.MAs(18);t.xp6(10),t.Q6J("ngModel",a.entry.amount),t.xp6(5),t.Q6J("matDatepicker",i)("ngModel",a.bizDatetime),t.xp6(1),t.Q6J("for",i),t.xp6(5),t.Q6J("disabled",a.saving),t.xp6(5),t.Q6J("disabled",a.saving)}},dependencies:[E._Y,E.Fj,E.wV,E.JJ,E.JL,E.Q7,E.On,E.F,St.lW,y.Mq,y.hl,y.nW,$.KE,$.hX,$.R9,Nt.Hw,ie.Nt,Qe.a,bt.SP,bt.uX],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),n})()}];let Oi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[J.Bz.forChild(Di),J.Bz]}),n})(),xi=(()=>{class n{constructor(e){this.notification=e}intercept(e,a){return Date.now(),a.handle(e).pipe((0,we.b)({next:c=>{c instanceof Gt.Zn&&c.body?.error&&this.notification.openError(c.body.error)}}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(st.g))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),vi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:t.EJc,useValue:"CNY"},{provide:Gt.TP,useClass:xi,multi:!0},ve,I.H9,_t,Dt,Ot.s,_e],imports:[sn.S,I.ez,Gt.JF,Jt.g,an,rn.t,pt.TU,on.JX,M.p0,bt.Nh,cn.m,Oi]}),n})()}}]);